<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#5698c3"><meta name="author" content="语轻星子"><meta name="copyright" content="语轻星子"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>imooc-blog项目开发-上(uniapp) | 轻语馆</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#5698c3"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"xxcijmz.top","root":"/","title":"轻语馆","version":"1.6.2","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"/data/sentences.json"},"algolia":{"appID":"I6Q6TFSWKC","apiKey":"8299a265813c86a465cc32755761abc9","indexName":"blogs","hits":{"per_page":10}}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="stylesheet" href="/css/content.css"><meta name="description" content="小程序相关小程序的基本组成结构 小程序的页面由什么组成? pages文件夹下存储了小程序的所有页面，同时每一个页面都会以文件夹的形式存在，文件夹由四个文件组成。  .js               页面的脚本文件，存放页面的数据、生命周期等  .json         当前页面的配置文件，用于配置当前页面的外观  .wxml       当前页面的模板结构  .wxss        当前页面">
<meta property="og:type" content="article">
<meta property="og:title" content="imooc-blog项目开发-上(uniapp)">
<meta property="og:url" content="https://xxcijmz.top/blogs/f4ee7e8d/index.html">
<meta property="og:site_name" content="轻语馆">
<meta property="og:description" content="小程序相关小程序的基本组成结构 小程序的页面由什么组成? pages文件夹下存储了小程序的所有页面，同时每一个页面都会以文件夹的形式存在，文件夹由四个文件组成。  .js               页面的脚本文件，存放页面的数据、生命周期等  .json         当前页面的配置文件，用于配置当前页面的外观  .wxml       当前页面的模板结构  .wxss        当前页面">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/1.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/2.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/3.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/4.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/5.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/6.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/7.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/8.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/9.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/10.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/11.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/12.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/13.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/14.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/15.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/16.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/17.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/18.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/19.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/20.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/21.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/22.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/19.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/20.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/24.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/25.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/26.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/27.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/28.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/29.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/30.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/f4ee7e8d/31.jpg">
<meta property="article:published_time" content="2021-10-26T08:11:47.000Z">
<meta property="article:modified_time" content="2021-11-18T10:47:14.685Z">
<meta property="article:author" content="语轻星子">
<meta property="article:tag" content="Vue">
<meta property="article:tag" content="uniapp">
<meta property="article:tag" content="小程序">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xxcijmz.top/blogs/f4ee7e8d/1.jpg"><script src="/js/ui/mode.js"></script></head><body><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="语轻星子"><img width="96" loading="lazy" src="https://cdn.jsdelivr.net/gh/xxc-yqxz/xxc-yqxz.github.io/images/avatar.jpg" alt="语轻星子"></a><div class="site-author-name"><a href="/about/">语轻星子</a></div><span class="site-name">轻语馆</span><sub class="site-subtitle">我也会加油，所以你也要加油，这是约定</sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">35</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">9</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">10</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://github.com/xxc-yqxz/xxc-yqxz.github.io" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=894043590&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=1379764422" title="网易云音乐" target="_blank" style="color:#C10D0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/269921139" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9B%B8%E5%85%B3"><span class="toc-number">1.</span> <span class="toc-text">小程序相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.</span> <span class="toc-text">小程序的基本组成结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxml-VS-html"><span class="toc-number">1.2.</span> <span class="toc-text">wxml VS html</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wxss-VS-css"><span class="toc-number">1.3.</span> <span class="toc-text">wxss VS css</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.</span> <span class="toc-text">json文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6"><span class="toc-number">1.5.</span> <span class="toc-text">小程序的内置组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%88%90%E5%91%98%E7%AE%A1%E7%90%86"><span class="toc-number">1.6.</span> <span class="toc-text">小程序成员管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B"><span class="toc-number">1.7.</span> <span class="toc-text">小程序发布流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8%E5%8E%9F%E5%88%99"><span class="toc-number">1.8.</span> <span class="toc-text">小程序的数据驱动原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B8%B8%E7%94%A8%E4%BA%8B%E4%BB%B6"><span class="toc-number">1.9.</span> <span class="toc-text">小程序的常用事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E4%BA%8B%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">1.10.</span> <span class="toc-text">小程序中事件传参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E3%80%90%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E3%80%91"><span class="toc-number">1.11.</span> <span class="toc-text">实现【双向数据绑定】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="toc-number">1.12.</span> <span class="toc-text">条件渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">1.13.</span> <span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E8%AF%BB"><span class="toc-number">1.14.</span> <span class="toc-text">配置文件解读</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%B7%E6%B1%82"><span class="toc-number">1.15.</span> <span class="toc-text">数据请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8promise%E8%A7%A3%E5%86%B3%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B"><span class="toc-number">1.16.</span> <span class="toc-text">使用promise解决异步编程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B5%E9%9D%A2%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.17.</span> <span class="toc-text">小程序页面的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PullToRefresh-%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E4%B8%8E%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD"><span class="toc-number">1.18.</span> <span class="toc-text">PullToRefresh 下拉刷新与上拉加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="toc-number">1.19.</span> <span class="toc-text">小程序的页面跳转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6"><span class="toc-number">1.20.</span> <span class="toc-text">小程序中的组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.21.</span> <span class="toc-text">组件的生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">1.22.</span> <span class="toc-text">数据监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB%E4%B8%8E%E9%80%9A%E8%AE%AF"><span class="toc-number">1.23.</span> <span class="toc-text">组件之间的关系与通讯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E6%8F%92%E6%A7%BD"><span class="toc-number">1.24.</span> <span class="toc-text">组件的插槽</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Uniapp%E7%9B%B8%E5%85%B3"><span class="toc-number">2.</span> <span class="toc-text">Uniapp相关</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-Hbuilder"><span class="toc-number">2.1.</span> <span class="toc-text">安装配置 Hbuilder</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%AE%89%E8%A3%85%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7"><span class="toc-number">2.1.1.</span> <span class="toc-text">下载并安装开发工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96"><span class="toc-number">2.1.2.</span> <span class="toc-text">安装依赖</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.1.3.</span> <span class="toc-text">创建项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.4.</span> <span class="toc-text">项目目录介绍</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.2.</span> <span class="toc-text">运行项目</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%88%B0%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">2.2.1.</span> <span class="toc-text">运行到微信小程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-number">2.2.2.</span> <span class="toc-text">运行到浏览器</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-VSCode%E5%BC%80%E5%8F%91-uniapp"><span class="toc-number">2.3.</span> <span class="toc-text">使用 VSCode开发 uniapp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%88%9B%E5%BB%BA-tabbar"><span class="toc-number">2.4.</span> <span class="toc-text">配置与创建 tabbar</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">2.4.1.</span> <span class="toc-text">项目初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEpackage-json"><span class="toc-number">2.4.2.</span> <span class="toc-text">配置package.json</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AD%A6%E5%91%8A%E4%B8%8E%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">2.5.</span> <span class="toc-text">警告与错误处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-%E3%80%90sitemap%E7%B4%A2%E5%BC%95%E6%83%85%E5%86%B5%E6%8F%90%E7%A4%BA%E3%80%91%E7%9A%84%E8%AD%A6%E5%91%8A%E9%97%AE%E9%A2%98"><span class="toc-number">2.5.1.</span> <span class="toc-text">解决 【sitemap索引情况提示】的警告问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-Cannot-read-property-39-forceUpdate-39-of-undefined-%E7%9A%84%E9%94%99%E8%AF%AF"><span class="toc-number">2.5.2.</span> <span class="toc-text">解决  Cannot read property &#39;forceUpdate&#39; of undefined 的错误</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E9%A1%B5%E9%9D%A2%E5%88%86%E6%9E%90"><span class="toc-number">2.6.</span> <span class="toc-text">项目页面分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86-Vue%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84%E4%B8%8Elogo%E5%9B%BE%E7%89%87%E5%B1%95%E7%A4%BA"><span class="toc-number">2.7.</span> <span class="toc-text">认识.Vue文件结构与logo图片展示</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#vue-%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-number">2.7.1.</span> <span class="toc-text">.vue 文件结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#logo%E5%9B%BE%E7%89%87%E5%B1%95%E7%A4%BA"><span class="toc-number">2.7.2.</span> <span class="toc-text">logo图片展示</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%90%9C%E7%B4%A2%E6%A1%86%E7%BB%84%E4%BB%B6"><span class="toc-number">2.8.</span> <span class="toc-text">创建搜索框组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E5%88%9B%E5%BB%BA%E5%B9%B6%E5%88%86%E6%9E%90-my-tabs-%E7%BB%84%E4%BB%B6"><span class="toc-number">2.9.</span> <span class="toc-text">tabs组件 - 创建并分析 my-tabs 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E5%B0%81%E8%A3%85%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-number">2.10.</span> <span class="toc-text">tabs组件- 封装网络请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E8%BF%9B%E8%A1%8C%E5%9F%BA%E6%9C%AC%E7%9A%84%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">2.11.</span> <span class="toc-text">tabs组件- 进行基本的数据展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E7%BE%8E%E5%8C%96%E6%A0%B7%E5%BC%8F"><span class="toc-number">2.12.</span> <span class="toc-text">tabs组件- 美化样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E8%AE%BE%E7%BD%AE%E6%BF%80%E6%B4%BB%E9%A1%B9"><span class="toc-number">2.13.</span> <span class="toc-text">tabs组件- 设置激活项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E5%AE%9A%E4%B9%89%E6%BB%91%E5%9D%97"><span class="toc-number">2.14.</span> <span class="toc-text">tabs组件- 定义滑块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs-%E7%BB%84%E4%BB%B6-%E5%AE%9E%E7%8E%B0%E6%BB%91%E5%9D%97%E7%9A%84%E6%BB%9A%E5%8A%A8%E6%95%88%E6%9E%9C-01"><span class="toc-number">2.15.</span> <span class="toc-text">tabs 组件-实现滑块的滚动效果 -01</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E5%AE%9E%E7%8E%B0%E6%BB%91%E5%9D%97%E7%9A%84%E6%BB%9A%E5%8A%A8%E6%95%88%E6%9E%9C-02"><span class="toc-number">2.16.</span> <span class="toc-text">tabs组件- 实现滑块的滚动效果 -02</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-scrollView-%E7%9A%84%E7%82%B9%E5%87%BB%E4%BD%8D%E7%A7%BB"><span class="toc-number">2.17.</span> <span class="toc-text">tabs组件- scrollView 的点击位移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tabs%E7%BB%84%E4%BB%B6-%E5%A2%9E%E5%8A%A0%E5%8F%AF%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">2.18.</span> <span class="toc-text">tabs组件- 增加可配置项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List%E7%BB%84%E4%BB%B6-%E5%88%86%E6%9E%90List%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">2.19.</span> <span class="toc-text">List组件- 分析List的基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-%E4%BD%BF%E7%94%A8-mock-%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%9E%84%E5%BB%BAList%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">2.20.</span> <span class="toc-text">List 组件- 使用 mock 数据，构建List的基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List%E7%BB%84%E4%BB%B6-%E7%BE%8E%E5%8C%96-item-%E6%A0%B7%E5%BC%8F"><span class="toc-number">2.21.</span> <span class="toc-text">List组件- 美化 item 样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-%E6%A0%B9%E6%8D%AE-tab-%E7%9A%84%E5%88%87%E6%8D%A2%EF%BC%8C%E8%8E%B7%E5%8F%96%E7%9C%9F%E5%AE%9E%E6%95%B0%E6%8D%AE"><span class="toc-number">2.22.</span> <span class="toc-text">List 组件 - 根据 tab 的切换，获取真实数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-%E6%B8%B2%E6%9F%93%E7%9C%9F%E5%AE%9E%E6%95%B0%E6%8D%AE"><span class="toc-number">2.23.</span> <span class="toc-text">List 组件 - 渲染真实数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-%E9%80%9A%E8%BF%87-swiper-%E6%94%B9%E9%80%A0List"><span class="toc-number">2.24.</span> <span class="toc-text">List 组件 - 通过 swiper 改造List</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-%E8%A7%A3%E5%86%B3%E5%88%97%E8%A1%A8%E9%AB%98%E5%BA%A6%E5%B1%95%E7%A4%BA%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">2.25.</span> <span class="toc-text">List 组件 - 解决列表高度展示错误的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-%E8%A7%A3%E5%86%B3-%E5%88%87%E6%8D%A2-tab-%E6%97%B6%E7%9A%84-list-%E7%9A%84%E5%8D%A1%E9%A1%BF%E9%97%AE%E9%A2%98"><span class="toc-number">2.26.</span> <span class="toc-text">List 组件 - 解决 切换 tab 时的 list 的卡顿问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-swiper-%E5%92%8C-tabs-%E8%81%94%E5%8A%A8"><span class="toc-number">2.27.</span> <span class="toc-text">List 组件 - swiper 和 tabs 联动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-tabs-%E4%B8%AD%E6%BB%91%E5%9D%97%E8%B7%9F%E9%9A%8F%E6%BB%9A%E5%8A%A8"><span class="toc-number">2.28.</span> <span class="toc-text">List 组件 - tabs 中滑块跟随滚动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8C%E6%88%90-tabs-%E7%9A%84%E5%90%B8%E9%A1%B6%E6%95%88%E6%9E%9C"><span class="toc-number">2.29.</span> <span class="toc-text">完成 tabs 的吸顶效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%88%97%E8%A1%A8%E6%BB%9A%E5%8A%A8%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.30.</span> <span class="toc-text">控制列表滚动位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#List-%E7%BB%84%E4%BB%B6-%E5%A4%84%E7%90%86%E7%83%AD%E5%BA%A6%E7%9A%84%E6%98%BE%E7%A4%BA"><span class="toc-number">2.31.</span> <span class="toc-text">List 组件 - 处理热度的显示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E5%88%86%E6%9E%90%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.32.</span> <span class="toc-text">文章搜索 - 分析文章搜索页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E4%BD%BF%E7%94%A8%E5%88%86%E5%8C%85%EF%BC%8C%E5%88%9B%E5%BB%BA-search-blog-%E9%A1%B5%E9%9D%A2"><span class="toc-number">2.33.</span> <span class="toc-text">文章搜索 - 使用分包，创建 search-blog 页面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5"><span class="toc-number">2.33.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%88%86%E5%8C%85"><span class="toc-number">2.33.2.</span> <span class="toc-text">实现分包</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E5%AE%8C%E6%88%90%E8%B7%B3%E8%BD%AC%EF%BC%8C%E6%B8%B2%E6%9F%93%E6%90%9C%E7%B4%A2%E6%A1%86"><span class="toc-number">2.34.</span> <span class="toc-text">文章搜索 - 完成跳转，渲染搜索框</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E4%B8%BA-my-search-%E7%BB%84%E4%BB%B6%E8%B5%8B%E4%BA%88%E6%90%9C%E7%B4%A2%E7%9A%84%E8%83%BD%E5%8A%9B"><span class="toc-number">2.35.</span> <span class="toc-text">文章搜索 - 为  my-search 组件赋予搜索的能力</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E6%98%BE%E7%A4%BA%E6%8E%A8%E8%8D%90%E6%90%9C%E7%B4%A2"><span class="toc-number">2.36.</span> <span class="toc-text">文章搜索 - 显示推荐搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E5%88%9B%E5%BB%BA%E4%B8%89%E4%B8%AA%E4%B8%9A%E5%8A%A1%E7%BB%84%E4%BB%B6"><span class="toc-number">2.37.</span> <span class="toc-text">文章搜索 - 创建三个业务组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E6%8E%A7%E5%88%B6%E4%B8%9A%E5%8A%A1%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B1%95%E7%A4%BA%E6%95%88%E6%9E%9C"><span class="toc-number">2.38.</span> <span class="toc-text">文章搜索 - 控制业务组件的展示效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E6%90%9C%E5%88%97%E8%A1%A8-%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="toc-number">2.39.</span> <span class="toc-text">热搜列表 - 数据获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E6%90%9C%E5%88%97%E8%A1%A8-%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">2.40.</span> <span class="toc-text">热搜列表 - 数据展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E6%90%9C%E5%88%97%E8%A1%A8-%E7%83%AD%E6%90%9C%E7%82%B9%E5%87%BB%E5%A4%84%E7%90%86"><span class="toc-number">2.41.</span> <span class="toc-text">热搜列表 - 热搜点击处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2-%E6%B8%B2%E6%9F%93%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">2.42.</span> <span class="toc-text">搜索历史 - 渲染基本结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2-%E7%BE%8E%E5%8C%96%E5%9F%BA%E6%9C%AC%E6%A0%B7%E5%BC%8F"><span class="toc-number">2.43.</span> <span class="toc-text">搜索历史 - 美化基本样式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2-%E4%BF%9D%E5%AD%98%E5%8E%86%E5%8F%B2%E6%95%B0%E6%8D%AE%E5%88%B0-searchData"><span class="toc-number">2.44.</span> <span class="toc-text">搜索历史 - 保存历史数据到 searchData</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2-%E5%A4%84%E7%90%86-searchData-%E7%9A%84%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"><span class="toc-number">2.45.</span> <span class="toc-text">搜索历史 -  处理 searchData 的删除操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">2.46.</span> <span class="toc-text">状态管理 - 全局状态管理工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-%E5%9C%A8%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%AF%BC%E5%85%A5-vuex"><span class="toc-number">2.47.</span> <span class="toc-text">状态管理 - 在项目中导入 vuex</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-%E6%B5%8B%E8%AF%95-vuex-%E6%98%AF%E5%90%A6%E5%AF%BC%E5%85%A5%E6%88%90%E5%8A%9F"><span class="toc-number">2.48.</span> <span class="toc-text">状态管理 - 测试 vuex 是否导入成功</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-%E6%9E%84%E5%BB%BA-search-%E6%A8%A1%E5%9D%97"><span class="toc-number">2.49.</span> <span class="toc-text">状态管理 - 构建 search 模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-%E4%BD%BF%E7%94%A8-search-%E6%A8%A1%E5%9D%97%E5%AE%8C%E6%88%90%E6%90%9C%E7%B4%A2%E5%8E%86%E5%8F%B2%E7%AE%A1%E7%90%86"><span class="toc-number">2.50.</span> <span class="toc-text">状态管理 - 使用 search 模块完成搜索历史管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">2.51.</span> <span class="toc-text">状态管理 - 数据持久化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E8%8E%B7%E5%8F%96%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E6%95%B0%E6%8D%AE"><span class="toc-number">2.52.</span> <span class="toc-text">搜索结果 - 获取搜索结果数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E6%B8%B2%E6%9F%93%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E6%95%B0%E6%8D%AE"><span class="toc-number">2.53.</span> <span class="toc-text">搜索结果 - 渲染搜索结果数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E5%A4%84%E7%90%86%E7%9B%B8%E5%AF%B9%E6%97%B6%E9%97%B4"><span class="toc-number">2.54.</span> <span class="toc-text">搜索结果 - 处理相对时间</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E9%AB%98%E4%BA%AE%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">2.55.</span> <span class="toc-text">搜索结果 - 高亮搜索结果关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E4%BB%8B%E7%BB%8D%E5%B9%B6%E4%BD%BF%E7%94%A8-mescroll-uni-%E7%BB%84%E4%BB%B6"><span class="toc-number">2.56.</span> <span class="toc-text">搜索结果 - 介绍并使用 mescroll-uni 组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E5%AE%9E%E7%8E%B0%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD%E5%8A%9F%E8%83%BD"><span class="toc-number">2.57.</span> <span class="toc-text">搜索结果 - 实现下拉刷新上拉加载功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-%E5%A4%84%E7%90%86%E7%A9%BA%E6%95%B0%E6%8D%AE%E5%9C%BA%E6%99%AF"><span class="toc-number">2.58.</span> <span class="toc-text">搜索结果 - 处理空数据场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%90%9C%E7%B4%A2-%E6%95%B0%E6%8D%AE%E9%87%8F%E9%99%90%E5%88%B6"><span class="toc-number">2.59.</span> <span class="toc-text">文章搜索 - 数据量限制</span></a></li></ol></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/JS/" style="font-size: 26.4px; color: #8cbbd1">JS</a> <a href="/tags/Vue/" style="font-size: 30px; color: #8abcd1">Vue</a> <a href="/tags/eggjs/" style="font-size: 19.2px; color: #8fb8d0">eggjs</a> <a href="/tags/serverless/" style="font-size: 19.2px; color: #8fb8d0">serverless</a> <a href="/tags/uniapp/" style="font-size: 22.8px; color: #8eb9d0">uniapp</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15.6px; color: #91b6cf">小程序</a> <a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 15.6px; color: #91b6cf">工程化</a> <a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 12px; color: #93b5cf">日记</a> <a href="/tags/%E6%A6%82%E5%BF%B5/" style="font-size: 22.8px; color: #8eb9d0">概念</a> <a href="/tags/%E9%83%A8%E7%BD%B2/" style="font-size: 12px; color: #93b5cf">部署</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://xxcijmz.top/blogs/f4ee7e8d/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="语轻星子"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="轻语馆"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">imooc-blog项目开发-上(uniapp)</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2021-10-26 16:11:47" itemprop="dateCreated datePublished" datetime="2021-10-26T16:11:47+08:00">2021-10-26</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2021-11-18 18:47:14" itemprop="dateModified" datetime="2021-11-18T18:47:14+08:00">2021-11-18</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="本文字数">28.5k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="阅读时长">140m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">项目开发</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Vue/" style="--text-color:#4fc08d"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Vue</span></a><a class="tag-item" href="/tags/uniapp/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">uniapp</span></a><a class="tag-item" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">小程序</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#5698c3;"><h2 id="小程序相关"><a href="#小程序相关" class="headerlink" title="小程序相关"></a>小程序相关</h2><h3 id="小程序的基本组成结构"><a href="#小程序的基本组成结构" class="headerlink" title="小程序的基本组成结构"></a>小程序的基本组成结构</h3><ul>
<li><p>小程序的页面由什么组成?</p>
<p>pages文件夹下存储了小程序的所有页面，同时每一个页面都会以文件夹的形式存在，文件夹由四个文件组成。</p>
<ul>
<li><p>.js               页面的脚本文件，存放页面的数据、生命周期等</p>
</li>
<li><p>.json         当前页面的配置文件，用于配置当前页面的外观</p>
</li>
<li><p>.wxml       当前页面的模板结构</p>
</li>
<li><p>.wxss        当前页面的页面样式表</p>
</li>
</ul>
</li>
<li><p>其它文件/文件夹的作用？</p>
<p>utils文件夹是一个工具类文件夹，用于存储一些工具类文件等。</p>
<p>app.js：小程序的项目逻辑文件，用来注册小程序实例，绑定生命周期回调函数、错误监听和页面不存在监听函数等。</p>
<p>app.json：小程序公共配置文件，决定页面的路径、窗口表现、设置网络超时时间、设置多tab</p>
<p>app.wxss：小程序公共样式表</p>
</li>
<li><p>project.config.json 文件的作用是什么?</p>
<p>是项目配置文件，用来记录我们对小程序开发工具所做的个性化配置</p>
<ul>
<li><p>setting 中保存了 编译相关的配置</p>
</li>
<li><p>projectname 中保存的是 项目名称</p>
</li>
<li><p>appid 中保存的是 小程序的账号 ID</p>
</li>
</ul>
</li>
<li><p>sitemap.json 文件的作用是什么？</p>
<p>配置小程序及其页面是否允许被微信索引</p>
<ul>
<li>rules中保存了索引规则列表的配置</li>
<li>rules规则中，action表示页面能否被索引(allow，disallow)，page表示生效的页面</li>
</ul>
</li>
</ul>
<h3 id="wxml-VS-html"><a href="#wxml-VS-html" class="headerlink" title="wxml VS html"></a>wxml VS html</h3><blockquote>
<p>什么是WXML？</p>
</blockquote>
<p>&emsp;&emsp;WXML（WeiXin Markup Language）是框架设计的一套标签语言（组件），用来构建小程序页面的结构，其作用类似于网页开发中的 HTML</p>
<blockquote>
<p>WXML 和 HTML 的区别</p>
</blockquote>
<ul>
<li><p>标签名称不同</p>
<ul>
<li>HTML（div，span，img，a）</li>
<li>WXML（view，text，image，navigator）</li>
</ul>
</li>
<li><p>属性节点不同</p>
<ul>
<li>&lt;a href=”#”&gt;超链接&lt;/a&gt;</li>
<li>&lt;navigator url=”/pages/home/home”&gt;跳转到home页&lt;/navigator&gt;</li>
</ul>
</li>
<li><p>提供了动态渲染数据的模板语法</p>
<ul>
<li>数据绑定</li>
<li>条件渲染</li>
<li>列表渲染</li>
</ul>
</li>
</ul>
<div class="warning">

<blockquote>
<p>是否可以在wxml中写入一个&lt;div&gt;标签？</p>
</blockquote>
</div>

<p>&emsp;&emsp;可以写入div 标签，但是 不要使用。 因为在wxml中所有 div 标签都会被解析为类 view 标签效果</p>
<h3 id="wxss-VS-css"><a href="#wxss-VS-css" class="headerlink" title="wxss VS css"></a>wxss VS css</h3><blockquote>
<p>什么是 WXSS</p>
</blockquote>
<ul>
<li>WXSS （WeiXin Style Sheets）是一套样式语言，用于描述WXML 的组件样式</li>
<li>类似于网页开发中的css</li>
<li>WXSS 具有 CSS 大部分的特性</li>
<li>WXSS中新增了此处单位 - <strong>rpx</strong>，一个 rpx 为页面宽度的 1 / 750</li>
<li>提供了全局的样式和局部样式<ul>
<li>全局样式：写入到 <strong>根目录的</strong> wxss 中的样式</li>
<li>局部样式：写入到 <strong>页面的</strong> wxss 中的样式</li>
<li>当全局样式与局部样式互斥是，优先使用局部样式。</li>
</ul>
</li>
</ul>
<blockquote>
<p>WXSS 支持哪些 CSS 选择器？</p>
</blockquote>
<ol>
<li> .class （推荐使用） 和 # id</li>
<li>element</li>
<li>并集选择器(，) 和 后代选择器(空格)</li>
<li>::after 和 ::before 等伪类选择器</li>
</ol>
<h3 id="json文件"><a href="#json文件" class="headerlink" title="json文件"></a>json文件</h3><p>小程序中，额外多出一个 .json 的配置文件，.json文件主要分为两个：</p>
<ol>
<li><p>项目根目录下的 .json 文件</p>
<p>用于修改项目的基本配置</p>
<ul>
<li>window<ul>
<li>navigationBar***</li>
<li>backgroundTextStyle</li>
</ul>
</li>
</ul>
</li>
<li><p>页面文件夹下的 .json文件</p>
<p>用于修改当前页面的基本配置（出现冲突以其为准）</p>
</li>
</ol>
<h3 id="小程序的内置组件"><a href="#小程序的内置组件" class="headerlink" title="小程序的内置组件"></a>小程序的内置组件</h3><ol>
<li><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/view.html">view</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html">scroll-view</a> 可以理解为：添加了overflow:scroll 属性的 div。</p>
<p>​                    需要给其指定一个固定的宽度和高度，当scroll-view中的内容超出了这个宽高，就可以进行滚动</p>
<p>​                    竖向滚动：</p>
<p>​                            1.scroll-view 拥有固定的高度</p>
<p>​                            2.scroll-view 内容的高度超出本身的高度</p>
<p>​                            3.给scroll-view 添加了scroll-y的属性</p>
<p>​                    横向滚动：</p>
<p>​                            1.scroll-view 拥有固定的宽度</p>
<p>​                            2.scroll-view 内容的高度超出本身的宽度</p>
<p>​                            3.给scroll-view 添加了scroll-x的属性</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test-scroll-view<span class="token punctuation">"</span></span> <span class="token attr-name">scroll-y</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scroll-view-child scroll-view-child-01<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>a<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scroll-view-child scroll-view-child-02<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>b<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scroll-view-child scroll-view-child-03<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>c<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.test-scroll-view</span><span class="token punctuation">&#123;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.scroll-view-child</span><span class="token punctuation">&#123;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.scroll-view-child-01</span><span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> blueviolet<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.scroll-view-child-02</span><span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> brown<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.scroll-view-child-03</span><span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> aqua<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre></li>
<li><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/text.html">text &amp;&amp; rich-text</a></p>
<p>text可以参照html中的span标签，用于展示文本的一个组件</p>
<p>view VS test  –&gt;  div VS span</p>
<p>rich-text可以通过nodes属性来显示富文本（html标签或字符串）。</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">swiper &amp;&amp; swiper-item</a></p>
<p>swiper内部只能放置swiper-item组件，否则会导致错误</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html">button</a></p>
<p>button中的opten-type属性表示了微信的开放能力</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html">image</a></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://img-baofun.zhhainiao.com/pcwallpaper_ugc/static/9896fa4067416113666207b7b5a74f08.JPG?x-oss-process=image%2fresize%2cm_lfit%2cw_3840%2ch_2160<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">></span></span></code></pre>

<p>可以通过设置mode属性来控制图片缩放效果</p>
</li>
</ol>
<h3 id="小程序成员管理"><a href="#小程序成员管理" class="headerlink" title="小程序成员管理"></a>小程序成员管理</h3><p>成员角色：</p>
<ul>
<li>管理员</li>
<li>项目成员</li>
<li>体验成员</li>
</ul>
<p><img src="/blogs/f4ee7e8d/1.jpg" loading="lazy"></p>
<h3 id="小程序发布流程"><a href="#小程序发布流程" class="headerlink" title="小程序发布流程"></a>小程序发布流程</h3><ul>
<li>本地 – 开发版本</li>
<li>上传 – 开发版本  / 体验版本（默认）</li>
<li>上传 – 审核版本</li>
<li>上传 – 线上版本</li>
</ul>
<p><img src="/blogs/f4ee7e8d/2.jpg" loading="lazy"></p>
<p><img src="/blogs/f4ee7e8d/3.jpg" loading="lazy"></p>
<p><img src="/blogs/f4ee7e8d/4.jpg" loading="lazy"></p>
<p><img src="/blogs/f4ee7e8d/5.jpg" loading="lazy"></p>
<p><img src="/blogs/f4ee7e8d/6.jpg" loading="lazy"></p>
<p>同时，还可以通过提交审核按钮，将小程序变为审核版本（要确保小程序基本信息填写完成），审核通过后，小程序将变为线上版本。</p>
<h3 id="小程序的数据驱动原则"><a href="#小程序的数据驱动原则" class="headerlink" title="小程序的数据驱动原则"></a>小程序的数据驱动原则</h3><blockquote>
<p>什么是数据驱动？</p>
</blockquote>
<ul>
<li>当数据发生变化时，视图理应发生变化</li>
</ul>
<blockquote>
<p>小程序中如何完成数据绑定？</p>
</blockquote>
<ul>
<li><p>在data中定义数据</p>
</li>
<li><p>在wxml中通过双大括号<code>&#123;&#123;&#125;&#125;</code>使用数据</p>
</li>
<li><p>之后当数据通过一些事件回调发生了变化后，视图会跟着重新渲染</p>
</li>
</ul>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">index<span class="token punctuation">.</span>js


<span class="token comment">// 获取应用实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 定义数据</span>
  data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    product<span class="token operator">:</span><span class="token punctuation">&#123;</span>
      price<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
      num<span class="token operator">:</span><span class="token number">5</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- 在 wxml 中如果要访问数据（data定义），必须要使用 &#123;&#123;&#125;&#125; --></span>
  <span class="token comment">&lt;!-- &#123;&#123;&#125;&#125; 语法中可以放置【任意的、单一的 JavaScript 表达式】 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的单价：&#123;&#123;product.price&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的数量：&#123;&#123;product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的总价格：&#123;&#123;product.price * product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>



<h3 id="小程序的常用事件"><a href="#小程序的常用事件" class="headerlink" title="小程序的常用事件"></a>小程序的常用事件</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">小程序的常用事件</a></p>
<blockquote>
<p>如何为按钮添加点击事件？</p>
</blockquote>
<ul>
<li>bindtap || bind:tap</li>
</ul>
<blockquote>
<p>如何修改 data 中数据的值？</p>
</blockquote>
<ul>
<li>通过 this.setData({})  定义新的值</li>
<li>通过 this.data 访问具体的值</li>
</ul>
<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的单价：&#123;&#123;product.price&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的数量：&#123;&#123;product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的总价格：&#123;&#123;product.price * product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>

  <span class="token comment">&lt;!-- 
    1. 创建一个按钮
    2. 监听按钮的点击事件
    3. 当用户点击时，让product.num + 1
   --></span>
  <span class="token comment">&lt;!-- 
    小程序中点击事件不是click，而是tap
    监听tap事件，需要用到 bind
      1. bindtap(推荐)
      2. bind:tap
   --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onAddNum<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>num +1 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">index<span class="token punctuation">.</span>js


<span class="token comment">// 获取应用实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 定义数据</span>
  data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    product<span class="token operator">:</span><span class="token punctuation">&#123;</span>
      price<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
      num<span class="token operator">:</span><span class="token number">5</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * num + 1 的对应事件
   * 注意此处事件定义的位置与data平级
   */</span>
  <span class="token function">onAddNum</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 修改 data 的数据：setData</span>
    <span class="token comment">// 访问 data 的数据：this.data</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// key代表：修改的数据</span>
      <span class="token comment">// val代表：当前 key 的最新值</span>
      <span class="token string">'product.num'</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>product<span class="token punctuation">.</span>num <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="小程序中事件传参"><a href="#小程序中事件传参" class="headerlink" title="小程序中事件传参"></a>小程序中事件传参</h3><blockquote>
<p>如何为点击事件传递参数？</p>
</blockquote>
<ul>
<li>通过属性绑定（data-xx） 把需要传递的参数绑定到DOM中。</li>
<li>在对应的回调函数中，通过 e.target.dataset 进行访问。</li>
</ul>
<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- 在 wxml 中如果要访问数据（data定义），必须要使用 &#123;&#123;&#125;&#125; --></span>
  <span class="token comment">&lt;!-- &#123;&#123;&#125;&#125; 语法中可以放置【任意的、单一的 JavaScript 表达式】 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的单价：&#123;&#123;product.price&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的数量：&#123;&#123;product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的总价格：&#123;&#123;product.price * product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>

  <span class="token comment">&lt;!-- 我们希望 onAddNum 接收参数，每次点击 num 时，增加传入的参数的数量 --></span>
  <span class="token comment">&lt;!-- 
    为 点击事件 传递参数：
      1. event 对象: 形参
        1.1 通过 e.target.dataset 访问 传递的参数
      2. data- 属性: 实参
        2.1 小程序中 不能直接为回调方法传递实参
        2.2 而是需要通过属性绑定的形式，把需要传递的参数绑定到当前 DOM 元素的 data-xx 属性下
   --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onAddNum<span class="token punctuation">"</span></span> <span class="token attr-name">data-step</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>num +N <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">index<span class="token punctuation">.</span>js


<span class="token comment">// 获取应用实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 定义数据</span>
  data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    product<span class="token operator">:</span><span class="token punctuation">&#123;</span>
      price<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
      num<span class="token operator">:</span><span class="token number">5</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token function">onAddNum</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 拿到传递的参数</span>
    <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>step<span class="token punctuation">)</span>
    <span class="token comment">// 修改 data 的数据：setData</span>
    <span class="token comment">// 访问 data 的数据：this.data</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// key代表：修改的数据</span>
      <span class="token comment">// val代表：当前 key 的最新值</span>
      <span class="token string">'product.num'</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>product<span class="token punctuation">.</span>num <span class="token operator">+</span> step
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="实现【双向数据绑定】"><a href="#实现【双向数据绑定】" class="headerlink" title="实现【双向数据绑定】"></a>实现【双向数据绑定】</h3><blockquote>
<p>什么叫做双向数据绑定？</p>
</blockquote>
<ul>
<li>当视图发生变化时，数据跟随发生变化</li>
<li>当数据发生变化时，视图跟随发生变化</li>
</ul>
<blockquote>
<p>小程序中如何实现双向数据绑定？</p>
</blockquote>
<ul>
<li>通过value 为input 视图绑定数据</li>
<li>通过监听 bindinput 获取视图变化，在回调中修改数据</li>
</ul>
<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- 在 wxml 中如果要访问数据（data定义），必须要使用 &#123;&#123;&#125;&#125; --></span>
  <span class="token comment">&lt;!-- &#123;&#123;&#125;&#125; 语法中可以放置【任意的、单一的 JavaScript 表达式】 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的单价：&#123;&#123;product.price&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的数量：&#123;&#123;product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    商品的总价格：&#123;&#123;product.price * product.num&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>

  <span class="token comment">&lt;!-- 
    创建一个数字输入框，输入框于【商品数量】完成【双向数据绑定】
    即：
      1.输入框内容（视图）发生变化时，商品的数量（数据）同步跟随发生变化
      2.商品数量（数据）发生变化时，输入框内容（视图）同步跟随发生变化
   --></span>
   <span class="token comment">&lt;!-- 
     把一个复杂的功能拆解成多个简单的步骤
     1. 创建一个【数字输入框】
     2. 设置【商品数量为输入框的初始值】
     3. 监听用户的输入行为
     4. 获取用户的输入信息
     5. 赋值给【商品数量】
    --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
      商品的数量：
    <span class="token comment">&lt;!-- 1. 创建一个数字输入框 --></span>
    <span class="token comment">&lt;!-- 2. 设置【商品数量为输入框的初始值】  --></span>
    <span class="token comment">&lt;!-- 3. 监听用户的输入行为 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>num-input<span class="token punctuation">"</span></span> <span class="token attr-name">bindinput</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onInput<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>number<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; product.num &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">index<span class="token punctuation">.</span>js

<span class="token comment">// 获取应用实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 定义数据</span>
  data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    product<span class="token operator">:</span><span class="token punctuation">&#123;</span>
      price<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
      num<span class="token operator">:</span><span class="token number">5</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">/***
   * 输入框输入的对应事件
   */</span>
  <span class="token function">onInput</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 4. 获取用户输入的值</span>
    <span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
    <span class="token comment">// 5. 赋值给【商品数量】</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      <span class="token string">'product.num'</span><span class="token operator">:</span>val
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>



<h3 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h3><blockquote>
<p>v-if 与 hidden的区别是什么？</p>
</blockquote>
<ol>
<li><p>wx:if 条件满足则渲染，否则不渲染</p>
</li>
<li><p>当hidden 条件满足 则隐藏，否则不隐藏</p>
</li>
</ol>
<blockquote>
<p>如何区分两者的使用场景？</p>
</blockquote>
<p>​     一般来说，wx:if 有更高的切换消耗，而 hidden 有更高的初始渲染消耗。</p>
<p>​     因此，如果业务需要平缓切换的情境下，用hidden更好。</p>
<p>​     如果在运行时条件不大可能改变，用wx:if 更好。</p>
<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token comment">&lt;!-- 
    根据花费不同，得到不同的回应：
    1.如果【总价格 &lt;= 100】：hello 帅哥
    2.如果【总价格 > 100 &amp;&amp; 总价格 &lt; 1000】: 哇哦 有钱人哦
    3.如果【总价格 >= 1000】：土豪，你好
--></span>
<span class="token comment">&lt;!-- 
    条件渲染：
    1. wx:if ... wx:elif ... wx:else
    2. hidden（针对当前业务，使用hidden更好）
--></span>
<span class="token comment">&lt;!--  1. wx:if ... wx:elif ... wx:else：判断结果 true 则进行渲染，否则不进行渲染 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    回答：
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;product.price * product.num &lt;= 100&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello 帅哥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>elif</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;product.price * product.num > 100 &amp;&amp; product.price * product.num &lt; 1000&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>哇哦 有钱人哦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">></span></span>土豪，你好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- 2. hidden：结果为 true 则【隐藏】，否则【不隐藏】 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    售货员小姐姐对你发出一声惊呼：
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;!(product.price * product.num &lt;= 100)&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>hello 帅哥<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;!(product.price * product.num > 100 &amp;&amp; product.price * product.num &lt; 1000)&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>哇哦 有钱人哦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;product.price * product.num &lt; 1000&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>土豪，你好<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<h3 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h3><blockquote>
<p>使用 wx:for时，当前项的【下标变量名】和【当前项变量名】默认分别是什么？</p>
</blockquote>
<ul>
<li>默认下标变量名为：index</li>
<li>默认当前项变量名为：item</li>
</ul>
<blockquote>
<p>block组件是否会被渲染？</p>
</blockquote>
<ul>
<li>block只是一个包裹性质的容器，并不会被渲染</li>
</ul>
<pre class="language-html" data-language="html"><code class="language-html">index.html

<span class="token comment">&lt;!-- 
    列表渲染：wx:for
    wx:for="&#123;&#123;要循环的列表&#125;&#125;"
    默认的当前项和下标名称：
    item、index
--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>product-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- block 组件：包裹性值的容器，不会进行渲染 --></span>
    <span class="token comment">&lt;!-- 
        wx:for 它必须要配合 wx:key 进行使用，wx:key 可以提高 for 循环 的性能。 
        对应的 key 值必须是一个不可以重复的值
        注意：使用 index 作为 wx:key 的表达式是不需要使用 &#123;&#123;&#125;&#125;
    --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; products &#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>product-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">></span></span>索引：&#123;&#123;index&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>--
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">></span></span>商品名：&#123;&#123; item.name &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>--
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">></span></span>价格：&#123;&#123; item.price &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">index<span class="token punctuation">.</span>js

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 定义数据</span>
  data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    products<span class="token operator">:</span><span class="token punctuation">[</span>
      <span class="token punctuation">&#123;</span>
        name<span class="token operator">:</span><span class="token string">'苹果'</span><span class="token punctuation">,</span>
        price<span class="token operator">:</span><span class="token number">3.2</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span>
        name<span class="token operator">:</span><span class="token string">'面包'</span><span class="token punctuation">,</span>
        price<span class="token operator">:</span><span class="token number">5</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span>
        name<span class="token operator">:</span><span class="token string">'可乐'</span><span class="token punctuation">,</span>
        price<span class="token operator">:</span><span class="token number">5</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>



<h3 id="配置文件解读"><a href="#配置文件解读" class="headerlink" title="配置文件解读"></a>配置文件解读</h3><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html">app.json配置文件</a></p>
<ul>
<li><p>pages        string[]        必填        页面路径列表</p>
<p>当我们新建了Pages时，就会在pages项中自动添加相关属性。或者当我们手动添加属性时，就会自动新建Pages。</p>
</li>
<li><p>window     Object          非必填        全局的默认窗口表现</p>
<p>用于设置小程序的状态栏、导航条、标题、窗口背景色。</p>
<img src="/blogs/f4ee7e8d/7.jpg" style="zoom:67%;" loading="lazy"></li>
<li><p>tabbar       Object          非必填        底部tab栏的表现</p>
<pre class="language-json" data-language="json"><code class="language-json">app.json

<span class="token punctuation">&#123;</span>
  <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
    <span class="token string">"pages/list/list"</span><span class="token punctuation">,</span>
    <span class="token string">"pages/logs/logs"</span><span class="token punctuation">,</span>
    <span class="token string">"pages/test-01/test-01"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"window"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"backgroundTextStyle"</span><span class="token operator">:</span> <span class="token string">"light"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#fff"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"Weixin"</span><span class="token punctuation">,</span>
    <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"black"</span><span class="token punctuation">,</span>
    <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#00ff00"</span><span class="token punctuation">,</span>		<span class="token comment">// backgroundColor需要配合enablePullDownRefresh才可以得到体现</span>
    <span class="token property">"enablePullDownRefresh"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"tabBar"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token property">"selectedColor"</span><span class="token operator">:</span> <span class="token string">"#efabcc"</span><span class="token punctuation">,</span>
    <span class="token property">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
      <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>
      <span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"首页"</span><span class="token punctuation">,</span>
      <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/home-unselect.png"</span><span class="token punctuation">,</span>
      <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/home-selected.png"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
      <span class="token property">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/list/list"</span><span class="token punctuation">,</span>
      <span class="token property">"text"</span><span class="token operator">:</span><span class="token string">"列表"</span><span class="token punctuation">,</span>
      <span class="token property">"iconPath"</span><span class="token operator">:</span> <span class="token string">"/images/list-unselect.png"</span><span class="token punctuation">,</span>
      <span class="token property">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"/images/list-select.png"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"style"</span><span class="token operator">:</span> <span class="token string">"v2"</span><span class="token punctuation">,</span>
  <span class="token property">"sitemapLocation"</span><span class="token operator">:</span> <span class="token string">"sitemap.json"</span>
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-json" data-language="json"><code class="language-json">index.json	

<span class="token comment">// 当页面配置文件与全局配置文件冲突时，以全局配置文件为主。</span>
<span class="token punctuation">&#123;</span>
  <span class="token property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"navigationBarBackgroundColor"</span><span class="token operator">:</span> <span class="token string">"#000"</span><span class="token punctuation">,</span>
  <span class="token property">"navigationBarTextStyle"</span><span class="token operator">:</span> <span class="token string">"white"</span>
<span class="token punctuation">&#125;</span></code></pre></li>
</ul>
<h3 id="数据请求"><a href="#数据请求" class="headerlink" title="数据请求"></a>数据请求</h3><blockquote>
<p>小程序中的数据请求有什么限制？以及如何解决这种限制</p>
</blockquote>
<ul>
<li><p>限制：</p>
<ol>
<li><p>只能请求 HTTPS 类型的接口</p>
</li>
<li><p>必须把接口的域名添加到信任列表中</p>
</li>
</ol>
</li>
<li><p>解决方案：</p>
<ol>
<li><p>生产环境（兼容开发环境）：把接口类型变为https，同时把接口的域名添加到信任列表中</p>
</li>
<li><p>开发环境：勾选【不校验合法域名】</p>
</li>
</ol>
<p><img src="/blogs/f4ee7e8d/8.jpg" loading="lazy"></p>
<img src="/blogs/f4ee7e8d/9.jpg" style="zoom:50%;" loading="lazy"></li>
</ul>
<blockquote>
<p>小程序中的数据请求会存在跨域问题吗？为什么？</p>
</blockquote>
<p>&emsp;&emsp;跨域问题主要针对浏览器而言，而小程序宿主环境为【微信小程序客户端】，所以小程序中不存在【跨域问题】</p>
<blockquote>
<p>小程序的数据请求可以叫做`ajax`请求吗？为什么？</p>
</blockquote>
<p>&emsp;&emsp;ajax依赖于 XMLHttpRequest 对象，而小程序宿主环境为【微信小程序客户端】，所以小程序中的【网络请求】不是 ajax 请求。</p>
<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- 当点击按钮时，发起 get 请求 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onGetClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>发起 get 请求<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- 当点击按钮时，发起 post 请求 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onPostClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>发起 post 请求<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">index<span class="token punctuation">.</span>js

<span class="token comment">// 获取应用实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/**
 
 */</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">/**
   * get 请求
   */</span>
  <span class="token function">onGetClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/getList'</span><span class="token punctuation">,</span>
      method<span class="token operator">:</span><span class="token string">'GET'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token function">onPostClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/postData'</span><span class="token punctuation">,</span>
      method<span class="token operator">:</span><span class="token string">'POST'</span><span class="token punctuation">,</span>
      data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
        msg<span class="token operator">:</span><span class="token string">"祝我看到京吹3"</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="使用promise解决异步编程"><a href="#使用promise解决异步编程" class="headerlink" title="使用promise解决异步编程"></a>使用promise解决异步编程</h3><blockquote>
<p>promise 是如何解决回调地狱的问题呢？</p>
</blockquote>
<ul>
<li>通过 .then 的方式进行链式调用</li>
</ul>
<blockquote>
<p>promise 的状态分为几种，分别是什么？</p>
</blockquote>
<ul>
<li>待定（pending）：初始状态，既没有被兑现，也没有被拒绝。</li>
<li>已兑现（fulfilled）：意味着操作成功完成。</li>
<li>已拒绝（rejected）：表示操作失败。</li>
</ul>
<blockquote>
<p>如何让promise 变成 已兑现 的状态，如何接收已兑现的结果</p>
</blockquote>
<ul>
<li>通过 resolve 可以把Promise的状态，从pending变为 fulfilled。</li>
<li>通过 promise.then方法传递的第一个回调函数的第一个参数接收 fulfilled 的结果。</li>
</ul>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token constant">A</span>、<span class="token constant">B</span>、<span class="token constant">C</span>、<span class="token constant">D</span> 函数返回一个Promise对象<span class="token punctuation">,</span>并且在对象内部实现了相关逻辑

<span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token constant">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">&#125;</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span></code></pre>

<blockquote>
<p>async和await 的作用是什么？</p>
</blockquote>
<ul>
<li>async + await 必须配合 promise 使用，同时async 和 await 必须一起使用</li>
<li>async + await 可以简化 promise 的异步操作，把 promise 的异步操作变成【同步的写法】</li>
<li>async：标记一个函数，把一个函数标记为【异步函数】</li>
<li>await：需要在【异步函数】中使用，标记当前的操作为【异步操作】</li>
</ul>
<blockquote>
<p>使用await 的注意事项是什么？</p>
</blockquote>
<ul>
<li>await 必须在被 async 标记的函数中使用</li>
</ul>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> resA <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 此处的 resA 相当于 上方代码的 A</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resA<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> resB <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resB<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> resC <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resC<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> resD <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resD<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>



<blockquote>
<p>如何使 wx.request 配合 async + await 使用</p>
</blockquote>
<ul>
<li>使用 promise 封装 wx.request 请求</li>
<li>使用 async 和 await 简化 promise 操作</li>
</ul>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * async + await
 * 目标：使用 async + await 完成需求。
 */</span>
<span class="token comment">/**
 * 1.因为小程序中的 wx.request 方法不支持 promise 化，所以使用promise 封装 wx.request请求
 */</span>
<span class="token keyword">async</span> <span class="token function">onAsyncClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> resA <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resA<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token keyword">const</span> resB <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resB<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token keyword">const</span> resC <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resC<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
  <span class="token keyword">const</span> resD <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resD<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function">pA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行A接口的逻辑'</span><span class="token punctuation">)</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/A'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">fail</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function">pB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行B接口的逻辑'</span><span class="token punctuation">)</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/B'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">fail</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function">pC</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行C接口的逻辑'</span><span class="token punctuation">)</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/C'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">fail</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function">pD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行D接口的逻辑'</span><span class="token punctuation">)</span>
    wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/D'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token function-variable function">fail</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="小程序页面的生命周期"><a href="#小程序页面的生命周期" class="headerlink" title="小程序页面的生命周期"></a>小程序页面的生命周期</h3><blockquote>
<p>什么是生命周期？什么是生命周期函数？</p>
</blockquote>
<ul>
<li>生命周期：一件事物由 创建 到 销毁 的全过程</li>
<li>生命周期函数：生命周期中的关键时刻</li>
</ul>
<blockquote>
<p>onReady 的调用时机是什么？</p>
</blockquote>
<ul>
<li>页面初次渲染完成后</li>
<li>一般在这里 获取服务端数据</li>
</ul>
<pre class="language-html" data-language="html"><code class="language-html">list.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData.list&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;index&#125;&#125;--&#123;&#123;item.title&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">list<span class="token punctuation">.</span>js

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>

  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面加载
   */</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onLoad'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面初次渲染完成
   */</span>
  <span class="token function-variable function">onReady</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onReady'</span><span class="token punctuation">)</span>
    <span class="token comment">// 请求服务端获取数据</span>
    <span class="token comment">// 页面出现之后，可以获取接口数据，并进行渲染</span>
     <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
       <span class="token string">'listData'</span><span class="token operator">:</span>data
     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面显示
   */</span>
  <span class="token function-variable function">onShow</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onShow'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面隐藏
   */</span>
  <span class="token function-variable function">onHide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onHide'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面卸载
   */</span>
  <span class="token function-variable function">onUnload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onUnload'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 请求数据的方法
   */</span>
  <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/getList'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="PullToRefresh-下拉刷新与上拉加载"><a href="#PullToRefresh-下拉刷新与上拉加载" class="headerlink" title="PullToRefresh 下拉刷新与上拉加载"></a>PullToRefresh 下拉刷新与上拉加载</h3><div class="success">

<blockquote>
<p>分页：当列表数据过多时，一次性加载所有的数据会导致请求过慢，所以前端就会分页来加载数据。</p>
<p>如果我们想要在当前项目中实现【分页请求】，就需要借助【下拉刷新于上拉加载】的功能，也就是pullToRefresh</p>
</blockquote>
</div>



<blockquote>
<p>如何开启下拉刷新？</p>
</blockquote>
<ul>
<li>在页面的json文件中通过 enablePullDownRefresh 开启</li>
</ul>
<blockquote>
<p>在 onPullDownRefresh 中，一般进行什么操作？</p>
</blockquote>
<ul>
<li>重置页面</li>
<li>重置数据源</li>
<li>关闭下拉动画</li>
</ul>
<blockquote>
<p>在 onReachButton 中，一般进行什么操作？</p>
</blockquote>
<ul>
<li>判断数据是否已经加载完成</li>
<li>自增页数</li>
<li>累加数据</li>
</ul>
<p>整个【分页加载分为两个部分】</p>
<ol>
<li>上拉加载</li>
<li>下拉刷新</li>
</ol>
<p><strong>上拉加载：</strong></p>
<pre class="language-html" data-language="html"><code class="language-html">list.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;index&#125;&#125;--&#123;&#123;item.title&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- 底线 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;total===listData.length&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>--- 我也是有底线的 ---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">list<span class="token punctuation">.</span>js

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>

  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    page<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    size<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    total<span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面初次渲染完成
   */</span>
  <span class="token function-variable function">onReady</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onReady'</span><span class="token punctuation">)</span>
    <span class="token comment">// 请求服务端获取数据</span>
    <span class="token comment">// 页面出现之后，可以获取接口数据，并进行渲染</span>
     <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
       <span class="token string">'listData'</span><span class="token operator">:</span>data<span class="token punctuation">.</span>list<span class="token punctuation">,</span>
       total<span class="token operator">:</span>data<span class="token punctuation">.</span>total
     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 页面上拉触底事件的处理函数
   */</span>
  <span class="token function-variable function">onReachBottom</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 当已经没有新数据之后，不再发起请求 </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>total <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>listData<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onReachBottom'</span><span class="token punctuation">)</span>
    <span class="token comment">// 1.修改page</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      page<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token comment">// 2.获取最新数据</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 3.新获取到的数据补充到现有数据的后面</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>listData<span class="token punctuation">,</span><span class="token operator">...</span>data<span class="token punctuation">.</span>list<span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>


  <span class="token comment">/**
   * 请求数据的方法
   */</span>
  <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/getList'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
          page<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token punctuation">,</span>
          size<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>size
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<p><strong>下拉刷新：</strong></p>
<p>想要在【小程序】中实现【下拉刷新】不同于上拉加载，需要首先开启【下拉刷新】：</p>
<pre class="language-json" data-language="json"><code class="language-json">list.json

<span class="token punctuation">&#123;</span>
  <span class="token property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token property">"backgroundColor"</span><span class="token operator">:</span> <span class="token string">"#ccc"</span><span class="token punctuation">,</span>
  <span class="token property">"enablePullDownRefresh"</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">list<span class="token punctuation">.</span>js

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>

  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    page<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
    size<span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    total<span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
    listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>


  <span class="token comment">/**
   * 生命周期函数--监听页面初次渲染完成
   */</span>
  <span class="token function-variable function">onReady</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'onReady'</span><span class="token punctuation">)</span>
    <span class="token comment">// 请求服务端获取数据</span>
    <span class="token comment">// 页面出现之后，可以获取接口数据，并进行渲染</span>
     <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
       <span class="token string">'listData'</span><span class="token operator">:</span>data<span class="token punctuation">.</span>list<span class="token punctuation">,</span>
       total<span class="token operator">:</span>data<span class="token punctuation">.</span>total
     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 页面相关事件处理函数--监听用户下拉动作
   */</span>
  <span class="token function-variable function">onPullDownRefresh</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 1. 重置页数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      page<span class="token operator">:</span><span class="token number">1</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token comment">// 2. 获取最新的数据</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 3. 使用新数据覆盖就数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      listData<span class="token operator">:</span>data<span class="token punctuation">.</span>list
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token comment">// 4. 关闭下拉刷新的动作（在真机中，下拉刷新的动作是不会自动关闭的）</span>
    wx<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 请求数据的方法
   */</span>
  <span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/test/getList'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
          page<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>page<span class="token punctuation">,</span>
          size<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>size
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="小程序的页面跳转"><a href="#小程序的页面跳转" class="headerlink" title="小程序的页面跳转"></a>小程序的页面跳转</h3><blockquote>
<p>页面跳转的方式有几种？</p>
</blockquote>
<p>小程序的页面跳转分为两种方式：</p>
<ol>
<li><p>声明式导航</p>
<ol>
<li>跳转到tabbar 页面</li>
<li>跳转到 非 tabbar页面</li>
<li>后退页面</li>
</ol>
<pre class="language-html" data-language="html"><code class="language-html">list.wxml

<span class="token comment">&lt;!-- 声明式导航：跳转到 tabbar 页面 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switchTab<span class="token punctuation">"</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/index/index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>声明式导航，跳转到 tabbar页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- 声明式导航，navigator --></span>
    <span class="token comment">&lt;!-- 声明式导航，跳转到 非 tabbar页面 --></span>
    <span class="token comment">&lt;!-- url 的表达式必须以 / 开头 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/detail/detail<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;index&#125;&#125;--&#123;&#123;item.title&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- 底线 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;total===listData.length&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>--- 我也是有底线的 ---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html">detail.wxml

<span class="token comment">&lt;!--pages/detail/detail.wxml--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">></span></span>pages/detail/detail.wxml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- 声明式导航：后退页面 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigateBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>声明式导航：后退页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">></span></span></code></pre></li>
<li><p>编程式导航</p>
<ol>
<li>跳转到tabbar 页面</li>
<li>跳转到 非 tabbar页面</li>
<li>后退页面</li>
</ol>
<p>小程序中提供了三个API，用来帮助我们进行 <strong>编程式导航</strong></p>
<ol>
<li><p>wx:switchTab：跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- 编程式导航：跳转到tabbar页面 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSwitchToHome<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>编程式导航：跳转到tabbar页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>

onSwitchToHome()&#123;
    wx.switchTab(&#123;
      url: '/pages/index/index',
    &#125;)
  &#125;</code></pre></li>
<li><p>wx:navigateTo：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- 编程式导航：跳转到 非 tabbar 页面 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onNavigateToDetail<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>编程式导航：跳转到 非 tabbar 页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>


onNavigateToDetail()&#123;
    wx.navigateTo(&#123;
    	url: '/pages/detail/detail',
    &#125;)
&#125;</code></pre></li>
<li><p>wx:navigateBack：关闭当前页面，返回上一页面或多级页面</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- 编程式导航：后退页面 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigateBack<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onNavigateBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>编程式导航：后退页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">></span></span>

onNavigateBack()&#123;
    wx.navigateBack(&#123;
    	delta:1 // 表示页面后退的层级
    &#125;)
&#125;</code></pre></li>
</ol>
</li>
</ol>
<blockquote>
<p>跳转到tabbar 页面和 非tabbar 页面的方式分别是什么？</p>
</blockquote>
<ul>
<li><p>声明式导航</p>
<ul>
<li><p>跳转到tabbar页面：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>switchTab<span class="token punctuation">"</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/index/index<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre></li>
<li><p>跳转到非tabbar页面：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>navigate<span class="token punctuation">"</span></span><span class="token attr-name">(默认值，可以不指定)</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/detail/detail<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span></code></pre></li>
</ul>
</li>
<li><p>编程式导航</p>
<ul>
<li><p>跳转到tabbar页面：</p>
<p>wx.switchTab({url:’xx’})</p>
</li>
<li><p>跳转到非tabbar页面：</p>
<p>wx.navigateTo({url:’xx’})</p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>如何进行导航传参？</p>
</blockquote>
<p>【小程序】的导航传参遵循：get请求的标准</p>
<ul>
<li>以 ? 分割 url 和 参数</li>
<li>以 = 连接参数的 key 和 value</li>
<li>以 &amp; 来拼接参数</li>
</ul>
<pre class="language-html" data-language="html"><code class="language-html">list.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- 导航传参 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/pages/detail/detail?index=&#123;&#123;index&#125;&#125;&amp;title=&#123;&#123;item.title&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123;index&#125;&#125;--&#123;&#123;item.title&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">></span></span>
        
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- 底线 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;total===listData.length&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>--- 我也是有底线的 ---<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">detail<span class="token punctuation">.</span>js

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>

  <span class="token comment">/**
   * 页面的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    index<span class="token operator">:</span><span class="token string">''</span><span class="token punctuation">,</span>
    title<span class="token operator">:</span><span class="token string">''</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 生命周期函数--监听页面加载
   */</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>	<span class="token comment">// 在onLoad中接收导航传参的参数。</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      index<span class="token operator">:</span>options<span class="token punctuation">.</span>index<span class="token punctuation">,</span>
      title<span class="token operator">:</span>options<span class="token punctuation">.</span>title
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html">detail.wxml

<span class="token comment">&lt;!-- 传递过来的参数 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>&#123;&#123;index&#125;&#125; --- &#123;&#123;title&#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<div class="base">

<blockquote>
<p>编程式导航同理</p>
</blockquote>
</div>

<h3 id="小程序中的组件"><a href="#小程序中的组件" class="headerlink" title="小程序中的组件"></a>小程序中的组件</h3><blockquote>
<p>组件应该被放入到哪个文件夹中？</p>
</blockquote>
<p>在根目录的components中</p>
<blockquote>
<p>如何在页面中使用自定义组件？</p>
</blockquote>
<ol>
<li>在页面的.json文件中，通过 usingComponents 进行注册</li>
<li>在 wxml文件中，以注册的 key 为标签名进行使用</li>
</ol>
<ol>
<li><p>创建组件</p>
<ol>
<li>创建 components 文件夹</li>
<li>创建 tabs 和 list 文件夹</li>
<li>右键 新建 Component</li>
</ol>
<p><img src="/blogs/f4ee7e8d/10.jpg" loading="lazy"></p>
<p><img src="/blogs/f4ee7e8d/11.jpg" loading="lazy"></p>
</li>
<li><p>使用组件</p>
<ol>
<li>找到页面的 .json 文件</li>
<li>在 usingComponents 文件夹下 <strong>注册组件</strong><ol>
<li> key 为当前组件在该页面中的标签名</li>
<li>value 为组件的代码路径</li>
</ol>
</li>
<li>在页面的 wxml 文件中，以注册的 key 为标签名，使用组件</li>
</ol>
</li>
</ol>
<p><img src="/blogs/f4ee7e8d/12.jpg" loading="lazy"></p>
<h3 id="组件的生命周期"><a href="#组件的生命周期" class="headerlink" title="组件的生命周期"></a>组件的生命周期</h3><blockquote>
<p>组件的生命周期 和 方法 分别应该被放入到哪个节点下？</p>
</blockquote>
<p>&emsp;&emsp;<strong>组件</strong>的生命周期应该被定义在 lifetimes 中，而方法必须要放入 methods 中</p>
<blockquote>
<p>组件的生命周期有哪些？</p>
</blockquote>
<ol>
<li>created：组件实例刚刚被创建好。<strong>此时还不能调用</strong> setData（注意与 vue 中的created进行区分）</li>
<li>attached：组件完全初始化完毕、进入页面节点树后。<strong>绝大多数初始化工作可以在这个时机进行</strong></li>
<li>detached：在组件离开页面节点树后</li>
</ol>
<blockquote>
<p>获取数据的操作应该在哪个函数中进行？</p>
</blockquote>
<p>&emsp;&emsp;attached</p>
<pre class="language-html" data-language="html"><code class="language-html">tabs.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-x</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-box<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab &#123;&#123;active === index? <span class="token punctuation">'</span>active<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span>&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    &#123;&#123;item.label&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-css" data-language="css"><code class="language-css">tabs.wxss

<span class="token comment">/* components/tabs/tabs.wxss */</span>
<span class="token selector">.tabs-box</span><span class="token punctuation">&#123;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 750rpx<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.tab</span><span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 12px 22px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.active</span><span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span>#f94d2a
<span class="token punctuation">&#125;</span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">tabs<span class="token punctuation">.</span>js

<span class="token comment">// components/tabs/tabs.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">/**
   * 组件的属性列表
   */</span>
  properties<span class="token operator">:</span> <span class="token punctuation">&#123;</span>

  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// tabs 数据</span>
    listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 标记当前选中的 index</span>
    active<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   * 组件中的方法必须定义到 methods 选项中
   */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 获取数据的方法
     */</span>
    <span class="token function">loadTabsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/hot/tabs'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            listData<span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">,</span>
            active<span class="token operator">:</span><span class="token number">0</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 生命周期函数列表
   */</span>
  lifetimes<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 组件完全初始化完毕、进入页面节点树后
     */</span>
    <span class="token function">attached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadTabsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41687724/article/details/113520856?spm=1001.2101.3001.6650.5&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-5.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~default-5.no_search_link">scroll-view不支持flex布局的问题</a></p>
<h3 id="数据监听器"><a href="#数据监听器" class="headerlink" title="数据监听器"></a>数据监听器</h3><blockquote>
<p>小程序中通过哪个选项来声明数据监听器？</p>
</blockquote>
<ul>
<li>observers</li>
</ul>
<blockquote>
<p>数据监听器的使用场景是什么？</p>
</blockquote>
<ul>
<li>监听数据变化，在数据变化后进行一些操作</li>
</ul>
<pre class="language-html" data-language="html"><code class="language-html">tabs.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-x</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-box<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab &#123;&#123;active === index? <span class="token punctuation">'</span>active<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span>&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onItemClick<span class="token punctuation">"</span></span> <span class="token attr-name">data-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; index &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    &#123;&#123;item.label&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">tabs<span class="token punctuation">.</span>js

<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">/**
   * 组件的属性列表
   */</span>
  properties<span class="token operator">:</span> <span class="token punctuation">&#123;</span>

  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// tabs 数据</span>
    listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 标记当前选中的 index</span>
    active<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   * 组件中的方法必须定义到 methods 选项中
   */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 获取数据的方法
     */</span>
    <span class="token function">loadTabsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/hot/tabs'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            listData<span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">,</span>
            active<span class="token operator">:</span><span class="token number">0</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 1.监听用户选中项的变化
     * item点击事件
     */</span>
    <span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// 1.1 ：获取用户选中的下标</span>
      <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>index<span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">;</span>
      <span class="token comment">// 1.2 ：修改选中项</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        active<span class="token operator">:</span>index
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 生命周期函数列表
   */</span>
  lifetimes<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 组件完全初始化完毕、进入页面节点树后
     */</span>
    <span class="token function">attached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadTabsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// 监听用户选中的 tab，根据用户选中的 tabs 来切换底部 list 的数据</span>
  <span class="token comment">// 步骤：(本节实现前两步)</span>
  <span class="token comment">// 1. 监听用户选中项的变化</span>
  <span class="token comment">// 2. 获取用户选中的数据 id</span>
  <span class="token comment">// 3. 把 id 传递给 list 组件</span>
  <span class="token comment">// 4. list 组件根据接收到的 id 获取对应的数据</span>

  <span class="token comment">/**
   * 1.3 监听active 的变化
   * 通过数据监听器：observers
   */</span>
  observers<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// key：要监听的数据</span>
    <span class="token comment">// value：数据变化时，调用的函数</span>
    <span class="token function-variable function">active</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// val：变化之后的值</span>
      <span class="token comment">// 2. 获取用户选中的数据 </span>
      <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>label<span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>listData<span class="token punctuation">[</span>val<span class="token punctuation">]</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<h3 id="组件之间的关系与通讯"><a href="#组件之间的关系与通讯" class="headerlink" title="组件之间的关系与通讯"></a>组件之间的关系与通讯</h3><blockquote>
<p>组件之间数据传递的关系可以分为哪几种？</p>
</blockquote>
<ol>
<li>父向子传递数据</li>
<li>子向父传递数据</li>
<li>兄弟之间传递数据</li>
</ol>
<blockquote>
<p>不同关系之间的传递数据方式？</p>
</blockquote>
<ol>
<li><p>父子关系：</p>
<ol>
<li><p>父向子传参：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 子组件：通过 properties 声明要从父组件中接收的数据</span>
<span class="token comment">/**
* 组件的属性列表
*/</span>
properties<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    tabId<span class="token operator">:</span>String
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    
<span class="token comment">// 父组件：通过自定义属性的形式传递数据，以子组件中定义的 key 为属性名，以要传递的数据为属性值</span>
<span class="token operator">&lt;</span>list tabId <span class="token operator">=</span> <span class="token string">"&#123;&#123;tabSelectId&#125;&#125;"</span><span class="token operator">></span></code></pre></li>
<li><p>子向父传参：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 子组件：通过 triggerEvent 方法发送一个通知，通知父组件接收数据。</span>
<span class="token comment">// 方法的第一个参数为：通知名</span>
<span class="token comment">// 方法的第二个参数为：要传递的数据</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    id
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">// 父组件：通过 bind 监听子组件中发送的通知</span>
<span class="token comment">// bind 后的内容为 子组件发送的通知名，表达式为接收到该通知时所触发的方法</span>
<span class="token operator">&lt;</span>tabs bind<span class="token operator">:</span>change<span class="token operator">=</span><span class="token string">"onTabChange"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>tabs<span class="token operator">></span>
<span class="token comment">// 方法被触发后可以通过 e.detail 的形式获取子组件传递过来的数据对象</span>
<span class="token function">onTabChange</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        tabSelectId<span class="token operator">:</span> id
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre></li>
</ol>
</li>
<li><p>兄弟关系</p>
<ol>
<li><p>兄弟组件之间传参：<strong>兄弟关系 === 没有关系</strong>。 兄弟组件只是为了方便称呼的一个叫法而已。</p>
</li>
<li><p>所以想要完成兄弟组件之间的传参，就需要：<strong>为它们建立关系。</strong></p>
<p>而建立关系说白了就是为了找到一个：<strong>和这两个组件都认识的 ”中间人“ 。</strong> </p>
<p>这个中间人一般为：<strong>统一的父组件。</strong></p>
<p>而最后：兄弟组件之间想要传递数据，就需要利用 ”中间人进行传递“，也就是：</p>
<p>【兄弟 A 组件】传递数据给 父组件（中间人）</p>
<p>父组件（中间人）再把数据传递给 【兄弟 B 组件】</p>
</li>
</ol>
</li>
</ol>
<p>子组件：</p>
<p>Tab：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-x</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabs-box<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab &#123;&#123;active === index? <span class="token punctuation">'</span>active<span class="token punctuation">'</span>:<span class="token punctuation">'</span><span class="token punctuation">'</span>&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onItemClick<span class="token punctuation">"</span></span> <span class="token attr-name">data-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123; index &#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    &#123;&#123;item.label&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// components/tabs/tabs.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// tabs 数据</span>
    listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 标记当前选中的 index</span>
    active<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   * 组件中的方法必须定义到 methods 选项中
   */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 获取数据的方法
     */</span>
    <span class="token function">loadTabsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/hot/tabs'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            listData<span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list<span class="token punctuation">,</span>
            active<span class="token operator">:</span><span class="token number">0</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 1.监听用户选中项的变化
     * item点击事件
     */</span>
    <span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token comment">// 1.1 ：获取用户选中的下标</span>
      <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>index<span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">;</span>
      <span class="token comment">// 1.2 ：修改选中项</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        active<span class="token operator">:</span>index
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 生命周期函数列表
   */</span>
  lifetimes<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 组件完全初始化完毕、进入页面节点树后
     */</span>
    <span class="token function">attached</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadTabsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// 监听用户选中的 tab，根据用户选中的 tabs 来切换底部 list 的数据</span>
  <span class="token comment">// 步骤：</span>
  <span class="token comment">// 1. 监听用户选中项的变化</span>
  <span class="token comment">// 2. 获取用户选中的数据 id</span>
  <span class="token comment">// 3. 把 id 传递给 list 组件</span>
  <span class="token comment">// 4. list 组件根据接收到的 id 获取对应的数据</span>

  <span class="token comment">/**
   * 1.3 监听active 的变化
   * 通过数据监听器：observers
   */</span>
  observers<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// key：要监听的数据</span>
    <span class="token comment">// value：数据变化时，调用的函数</span>
    <span class="token function-variable function">active</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">// val：变化之后的值</span>
      <span class="token comment">// 2. 获取用户选中的数据 </span>
      <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>listData<span class="token punctuation">[</span>val<span class="token punctuation">]</span>
      <span class="token comment">// 3. 把 id 传递给 list 组件</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
        id
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<pre class="language-css" data-language="css"><code class="language-css"><span class="token comment">/* components/tabs/tabs.wxss */</span>
<span class="token selector">.tabs-box</span><span class="token punctuation">&#123;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 750rpx<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
  <span class="token comment">/* 想要让 tab 固定到顶部 */</span>
  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span>9<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.tab</span><span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 12px 22px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.active</span><span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span>#f94d2a
<span class="token punctuation">&#125;</span></code></pre>



<p>List：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// components/list/list.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token comment">/**
   * 组件的属性列表
   */</span>
  properties<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    tabId<span class="token operator">:</span>String
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的初始数据
   */</span>
  data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    listData<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 数据请求的方法
     */</span>
    <span class="token function">loadListData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span><span class="token string">'https://api.imooc-blog.lgdsunday.club/api/hot/list'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
          type<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>tabId  <span class="token comment">// 通过 this.data 访问 properties 中的数据</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            listData<span class="token operator">:</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>list
          <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 数据监听器
   */</span>
  observers<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token function-variable function">tabId</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token comment">// 第一次会传一个' '，因为tabId的初始值为空</span>
      <span class="token comment">// 4. list 组件根据接收到的 id 获取对应的数据</span>
      <span class="token comment">// console.log(`list组件中接收到的id:$&#123;val&#125;`)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadListData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    &#123;&#123;item.title&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span></code></pre>

<p>父组件：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// index.js</span>
<span class="token comment">// 获取应用实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">getApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  data<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    tabSelectId<span class="token operator">:</span><span class="token string">''</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">/**
   * 监听子组件的 change 事件回调
   */</span>
  <span class="token function">onTabChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">const</span> <span class="token punctuation">&#123;</span>id<span class="token punctuation">&#125;</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">父组件中接收到的 ID：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
      tabSelectId<span class="token operator">:</span>id
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- 监听子组件的 change 事件 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tabs</span> <span class="token attr-name"><span class="token namespace">bind:</span>change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onTabChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tabs</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span> <span class="token attr-name">tabId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;tabSelectId&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>



<h3 id="组件的插槽"><a href="#组件的插槽" class="headerlink" title="组件的插槽"></a>组件的插槽</h3><blockquote>
<p>什么时候需要使用插槽？</p>
</blockquote>
<ul>
<li>由父组件来指定子组件中某一部分展示的内容和样式时</li>
</ul>
<blockquote>
<p>小程序中如何定义多个插槽？</p>
</blockquote>
<ul>
<li>指定 options 的 multipleSolts 为 true</li>
</ul>
<p>定义单一插槽：</p>
<p>在组件中使用 slot 组件定义插槽。表示占据了这一块空间，等待父组件填充。</p>
<pre class="language-html" data-language="html"><code class="language-html">list.wxml

<span class="token comment">&lt;!-- 单一插槽 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span> <span class="token attr-name">tabId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;tabSelectId&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>这是我在 index 页面中放入的 view<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">></span></span></code></pre>



<p>定义多个插槽：</p>
<p>小程序默认只能定义一个插槽，如果要定义多个插槽那么需要：在组件中指定 options 选项的 multipleSlots 选项为 true</p>
<p>然后通过 slot 的 name 属性为插槽命名。例如：&lt;slot name=”header”&gt;&lt;/slot&gt;</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">list<span class="token punctuation">.</span>js

<span class="token comment">// components/list/list.js</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  options<span class="token operator">:</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 在当前组件中开启了多个插槽</span>
    multipleSlots<span class="token operator">:</span><span class="token boolean">true</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html">list.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token attr-name">scroll-y</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;listData&#125;&#125;<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    &#123;&#123;item.title&#125;&#125;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-html" data-language="html"><code class="language-html">index.wxml

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- 监听子组件的 change 事件 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tabs</span> <span class="token attr-name"><span class="token namespace">bind:</span>change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onTabChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tabs</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span> <span class="token attr-name">tabId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#123;tabSelectId&#125;&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我是列表的头部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>我是列表的尾部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>



<h2 id="Uniapp相关"><a href="#Uniapp相关" class="headerlink" title="Uniapp相关"></a>Uniapp相关</h2><h3 id="安装配置-Hbuilder"><a href="#安装配置-Hbuilder" class="headerlink" title="安装配置 Hbuilder"></a>安装配置 Hbuilder</h3><h4 id="下载并安装开发工具"><a href="#下载并安装开发工具" class="headerlink" title="下载并安装开发工具"></a>下载并安装开发工具</h4><ol>
<li><p>uniapp 同样提供了一个专门的开发工具 HBuilder X，<a target="_blank" rel="noopener" href="https://www.dcloud.io/hbuilderx.html">可以点击</a></p>
</li>
<li><p>点击 <code>DOWNLOAD</code> </p>
</li>
<li><p>选择 <code>App 开发版本</code><br> <img src="/blogs/f4ee7e8d/13.jpg" loading="lazy"></p>
</li>
<li><p><code>windows</code> 版本下载完成之后会得到一个 <code>zip</code> 的压缩包文件，解压完成即可使用</p>
</li>
<li><p><code>macos</code> 版本下来完成会得到一个 <code>dmg</code> 的安装包，直接安装即可</p>
</li>
</ol>
<h4 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h4><p>有些时候，项目开发前需要一些依赖</p>
<p> <img src="/blogs/f4ee7e8d/14.jpg" loading="lazy"></p>
<p><img src="/blogs/f4ee7e8d/15.jpg" loading="lazy"></p>
<h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p><img src="/blogs/f4ee7e8d/16.jpg" loading="lazy"></p>
<h4 id="项目目录介绍"><a href="#项目目录介绍" class="headerlink" title="项目目录介绍"></a>项目目录介绍</h4><pre class="language-javascript" data-language="javascript"><code class="language-javascript">├─pages			    <span class="token comment">// 页面存放文件夹，等同于 微信小程序中的 pages</span>
│  └─index			<span class="token comment">// 默认生成的页面</span>
├─<span class="token keyword">static</span>			<span class="token comment">// 静态资源存放文件夹</span>
└─uni_modules		<span class="token comment">// uni-app组件目录</span>
│  └─uni<span class="token operator">-</span>xxx		<span class="token comment">// uni-app 所提供的业务组件，等同于 微信小程序中的组件</span>
├─App<span class="token punctuation">.</span>vue			<span class="token comment">// 应用配置文件，用来配置全局样式、生命周期函数等，等同于 微信小程序中的app.js</span>
└─main<span class="token punctuation">.</span>js			<span class="token comment">// 项目入口文件</span>
├─mainfest<span class="token punctuation">.</span>json		 <span class="token comment">// 配置应用名称、appid、logo、版本等打包信息，</span>
└─pages<span class="token punctuation">.</span>json		<span class="token comment">// 配置页面路径、窗口样式、tabBar 等页面类信息，等同于 微信小程序中的app.json</span>
└─uni<span class="token punctuation">.</span>scss			<span class="token comment">// uni-app内置的常用样式变量</span></code></pre>

<h3 id="运行项目"><a href="#运行项目" class="headerlink" title="运行项目"></a>运行项目</h3><h4 id="运行到微信小程序"><a href="#运行到微信小程序" class="headerlink" title="运行到微信小程序"></a>运行到微信小程序</h4><ol>
<li><p>配置【微信开发工具】路径</p>
<p><img src="/blogs/f4ee7e8d/17.jpg" loading="lazy"></p>
</li>
<li><p>设置【微信开发工具路径】</p>
<p><img src="/blogs/f4ee7e8d/18.jpg" loading="lazy"></p>
</li>
<li><p><strong>切记：</strong> 一定要在 <code>HBuilder X</code> 中双击打开你项目中的某一个文件（比如：<code>App.vue</code>）</p>
<p><img src="/blogs/f4ee7e8d/19.jpg" loading="lazy"></p>
</li>
<li><p>运行到微信小程序</p>
<p><img src="/blogs/f4ee7e8d/20.jpg" loading="lazy"></p>
</li>
<li><p>底部会提示编译</p>
<p><img src="/blogs/f4ee7e8d/21.jpg" loading="lazy"></p>
</li>
<li><p>编译成功，微信小程序自动启动</p>
<p><img src="/blogs/f4ee7e8d/22.jpg" loading="lazy"></p>
</li>
</ol>
<h4 id="运行到浏览器"><a href="#运行到浏览器" class="headerlink" title="运行到浏览器"></a>运行到浏览器</h4><ol>
<li><strong>切记：</strong> 一定要在 <code>HBuilder X</code> 中双击打开你项目中的某一个文件（比如：<code>App.vue</code>）</li>
</ol>
<p><img src="/blogs/f4ee7e8d/19.jpg" loading="lazy"></p>
<ol start="2">
<li>无需配置，直接运行</li>
</ol>
<p><img src="/blogs/f4ee7e8d/20.jpg" loading="lazy"></p>
<ol start="3">
<li>编译完成，浏览器自动打开，运行成功</li>
</ol>
<h3 id="使用-VSCode开发-uniapp"><a href="#使用-VSCode开发-uniapp" class="headerlink" title="使用 VSCode开发 uniapp"></a>使用 VSCode开发 uniapp</h3><p>虽说 <code>HBuilder X</code> 开发体验还算不错，但是有时候金窝银窝不如自己的狗窝，当我们习惯了 <code>VSCode</code> 之后，有时候不太愿意换开发工具。</p>
<p>那么怎么使用 <code>VSCode</code> 来开发 <code>uniapp</code> 呢？ 其实是有办法的。</p>
<ol>
<li>使用 <code>HBuilder X</code> 运行项目（运行方式，参考上一小节）</li>
<li>使用 <code>VSCode</code> 打开项目</li>
<li>在 <code>VSCode</code> 中安装插件：<ol>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ModyQyW.vscode-uni-helper">uni-helper</a> - 让开发者在 VSCode 中开发 uni-* 的体验尽可能好。</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ModyQyW.vscode-uni-app-snippets">uni-app-snippets</a> - 支持 uni-app 基本能力的代码片段，包括组件和 API</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ModyQyW.vscode-uni-app-schemas">uni-app-schemas</a> - 支持 uni-app <code>pages.json</code> 和 <code>manifest.json</code> 简单的格式校验</li>
<li><a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ModyQyW.vscode-uni-ui-snippets">uni-ui-snippets</a> - 支持 uni-ui 组件代码片段</li>
</ol>
</li>
<li>在 <code>VSCode</code> 中修改代码，运行结果自动发生变化</li>
</ol>
<h3 id="配置与创建-tabbar"><a href="#配置与创建-tabbar" class="headerlink" title="配置与创建 tabbar"></a>配置与创建 tabbar</h3><h4 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h4><ol>
<li>删除 <code>pages</code> 下的 <code>index</code> 文件夹</li>
<li>在 <code>pages</code> 文件夹处，右键 -&gt; 选择新建页面</li>
<li>确认新建页面的信息<br><img src="/blogs/f4ee7e8d/24.jpg" loading="lazy"></li>
<li>点击创建按钮完成新建。</li>
<li>循环以上顺序，依次完成 <code>hot</code>、<code>hot-video</code>、<code>my</code> 三个页面的创建</li>
</ol>
<h4 id="配置package-json"><a href="#配置package-json" class="headerlink" title="配置package.json"></a>配置package.json</h4><ol>
<li><p>删除 <code>index</code> 路径</p>
</li>
<li><p>新建 <code>tabbar</code> 节点</p>
</li>
<li><p>复制 <strong>资源</strong> 文件夹下 <code>tab-icons</code> 文件夹到 <code>static</code> 文件夹中</p>
</li>
<li><p>最终代码如下：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token string">"tabBar"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token string">"selectedColor"</span><span class="token operator">:</span> <span class="token string">"#f94d2a"</span><span class="token punctuation">,</span>
  <span class="token string">"list"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      <span class="token string">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/hot/hot"</span><span class="token punctuation">,</span>
      <span class="token string">"text"</span><span class="token operator">:</span> <span class="token string">"热榜"</span><span class="token punctuation">,</span>
      <span class="token string">"iconPath"</span><span class="token operator">:</span> <span class="token string">"static/tab-icons/hot.png"</span><span class="token punctuation">,</span>
      <span class="token string">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"static/tab-icons/hot-active.png"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      <span class="token string">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/hot-video/hot-video"</span><span class="token punctuation">,</span>
      <span class="token string">"text"</span><span class="token operator">:</span> <span class="token string">"热播"</span><span class="token punctuation">,</span>
      <span class="token string">"iconPath"</span><span class="token operator">:</span> <span class="token string">"static/tab-icons/hot-video.png"</span><span class="token punctuation">,</span>
      <span class="token string">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"static/tab-icons/hot-video-active.png"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      <span class="token string">"pagePath"</span><span class="token operator">:</span> <span class="token string">"pages/my/my"</span><span class="token punctuation">,</span>
      <span class="token string">"text"</span><span class="token operator">:</span> <span class="token string">"我的"</span><span class="token punctuation">,</span>
      <span class="token string">"iconPath"</span><span class="token operator">:</span> <span class="token string">"static/tab-icons/my.png"</span><span class="token punctuation">,</span>
      <span class="token string">"selectedIconPath"</span><span class="token operator">:</span> <span class="token string">"static/tab-icons/my-active.png"</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre></li>
<li><p>如果修改完成之后，依然得到了以下错误，那么可以在 <code>HBuilder X</code> 中重新运行项目到微信开发者工具解决<br><img src="/blogs/f4ee7e8d/25.jpg" loading="lazy"></p>
</li>
</ol>
<h3 id="警告与错误处理"><a href="#警告与错误处理" class="headerlink" title="警告与错误处理"></a>警告与错误处理</h3><h4 id="解决-【sitemap索引情况提示】的警告问题"><a href="#解决-【sitemap索引情况提示】的警告问题" class="headerlink" title="解决 【sitemap索引情况提示】的警告问题"></a>解决 【sitemap索引情况提示】的警告问题</h4><p><img src="/blogs/f4ee7e8d/26.jpg" loading="lazy"></p>
<p>微信小程序默认开启了索引功能，但是因为我们没有配置索引策略，导致出现了这么一个警告的问题。具体情况可以参考：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html">https://developers.weixin.qq.com/miniprogram/dev/framework/sitemap.html</a></p>
<p>而如果想要解决这个警告也非常简单，因为一般情况项目不需要被微信索引，所以我们只需要 <strong>关闭</strong> 默认索引功能即可！</p>
<ol>
<li><p>双击打开 manifest.json</p>
</li>
<li><p>点击源码视图</p>
</li>
<li><p>下翻找到 <code>mp-weixin</code> 配置节点</p>
</li>
<li><p>在 <code>settings</code> 下新增 <code>&quot;checkSiteMap&quot; : false</code></p>
<p><img src="/blogs/f4ee7e8d/27.jpg" loading="lazy"></p>
</li>
</ol>
<h4 id="解决-Cannot-read-property-39-forceUpdate-39-of-undefined-的错误"><a href="#解决-Cannot-read-property-39-forceUpdate-39-of-undefined-的错误" class="headerlink" title="解决  Cannot read property &#39;forceUpdate&#39; of undefined 的错误"></a>解决 <code> Cannot read property &#39;forceUpdate&#39; of undefined</code> 的错误</h4><p>这个错误的原因非常简单，是因为我们没有为项目配置 <code>appID</code> 的原因，所以只需要完成 <code>APPID</code> 配置即可。</p>
<ol>
<li>双击打开 <code>manifest.json</code></li>
<li>找到【微信小程序配置】</li>
<li>在此处添加 <code>APPID</code> 即可</li>
</ol>
<p><img src="/blogs/f4ee7e8d/28.jpg" loading="lazy"></p>
<h3 id="项目页面分析"><a href="#项目页面分析" class="headerlink" title="项目页面分析"></a>项目页面分析</h3><p><img src="/blogs/f4ee7e8d/29.jpg" loading="lazy"></p>
<h3 id="认识-Vue文件结构与logo图片展示"><a href="#认识-Vue文件结构与logo图片展示" class="headerlink" title="认识.Vue文件结构与logo图片展示"></a>认识.Vue文件结构与logo图片展示</h3><h4 id="vue-文件结构"><a href="#vue-文件结构" class="headerlink" title=".vue 文件结构"></a>.vue 文件结构</h4><ol>
<li><code>template</code>：定义当前页面的结构。相当于 <code>wxml</code> </li>
<li><code>script</code>：定义当前页面的逻辑。相当于 <code>js</code></li>
<li><code>style</code>：定义当前页面的样式。相当于 <code>wxss</code><ol>
<li>为 <code>style</code> 标签增加 <code>scoped</code> 属性：表示当前样式只在当前页面生效</li>
</ol>
</li>
</ol>
<h4 id="logo图片展示"><a href="#logo图片展示" class="headerlink" title="logo图片展示"></a>logo图片展示</h4><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- logo --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aspectFit<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/static/images/logo.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">&lt;style lang="scss" scoped>
.hot-container</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> $uni-bg-color<span class="token punctuation">;</span>		<span class="token comment">/*此处的$uni-bg-color 在根目录的 uni.scss中定义了，所以可以直接使*/</span>
  <span class="token selector">.logo</span> <span class="token punctuation">&#123;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
&lt;/style></code></pre>



<h3 id="创建搜索框组件"><a href="#创建搜索框组件" class="headerlink" title="创建搜索框组件"></a>创建搜索框组件</h3><ol>
<li>创建components 文件夹</li>
<li>右键新建组件</li>
</ol>
<p><img src="/blogs/f4ee7e8d/30.jpg" loading="lazy">.</p>
<ol start="3">
<li><p>明确当前my-search组件功能</p>
<pre><code>*1.具备输入框的样式*
 
*2.不可输入*
 
*3.placeholder 内容可以在父组件定义*
</code></pre>
</li>
<li><p>具体实现</p>
<p><strong><code>my-search.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;!-- 
		1.具备输入框的样式
		2.不可输入
		3.placeholder 内容可以在父组件定义
	 --&gt;
	&lt;view class&#x3D;&quot;my-search-container&quot;&gt;
		&lt;!-- 收缩按钮 --&gt;
		&lt;view class&#x3D;&quot;my-search-box&quot;&gt;
			&lt;!-- 搜索图标 --&gt;
			&lt;image src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;search.png&quot; class&#x3D;&quot;icon&quot; &#x2F;&gt;
			&lt;!-- placeholder --&gt;
			&lt;text class&#x3D;&quot;placeholder&quot;&gt;&#123;&#123; placeholderText &#125;&#125;&lt;&#x2F;text&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;my-search&quot;,
	&#x2F;&#x2F; properties
	props: &#123;
		placeholderText: &#123;
			type: String,
			default: &quot;搜索&quot;,
		&#125;,
	&#125;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.my-search-container &#123;
	display: flex;
	align-items: center;
	.my-search-box &#123;
		height: 36px;
		width: 100%;
		background-color: $uni-bg-color;
		border-radius: 15px;
		border: 1px solid $uni-bg-color-border;
		display: flex;
		align-items: center;
		padding: 0 $uni-spacing-row-base;

		.icon &#123;
			width: $uni-img-size-sm;
			height: $uni-img-size-sm;
		&#125;

		.placeholder &#123;
			font-size: $uni-font-size-sm;
			margin-left: $uni-spacing-row-sm;
			color: $uni-text-color-placeholder;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<p><strong><code>hot-vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;hot-container&quot;&gt;
		&lt;!-- 可直接使用组件，无需注册 --&gt;
		&lt;view class&#x3D;&quot;search-box&quot;&gt;
         	   
			&lt;my-search placeholderText&#x3D;&quot;uni-app 自定义组件&quot;&gt;&lt;&#x2F;my-search&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.hot-container &#123;
	...
	.search-box &#123;
		padding: 0 16px;
		margin-bottom: $uni-spacing-col-base;
	&#125;
&#125;
&lt;&#x2F;style&gt;
</code></pre></li>
</ol>
<h3 id="tabs组件-创建并分析-my-tabs-组件"><a href="#tabs组件-创建并分析-my-tabs-组件" class="headerlink" title="tabs组件 - 创建并分析 my-tabs 组件"></a>tabs组件 - 创建并分析 <code>my-tabs</code> 组件</h3><ol>
<li><p>创建 <code>my-tabs</code> 组件</p>
</li>
<li><p>分析 <code>my-tabs</code> 组件的能力 -&gt; 希望创建一个通用的 <code>my-tabs</code> 组件，可以满足各个应用中的需求</p>
<ol>
<li><p>可在父组件中定制 <code>my-tabs</code> 样式</p>
</li>
<li><p>可在父组件中设置展示数据</p>
</li>
<li><p>可在父组件中设置默认的激活项</p>
</li>
<li><p>由此分析，定义处以下代码：</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view&gt; &lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;my-tabs&quot;,
	props: &#123;
		&#x2F;&#x2F; 1. 可以在父组件中定制样式
		&#x2F;&#x2F; 配置对象
		config: &#123;
			type: Object,
			&#x2F;&#x2F; default	如果是复杂数据类型，那么需要指定 value 为一个函数，通过返回值的形式执行默认值
			default: () &#x3D;&gt; &#123;
				return &#123;&#125;;
			&#125;,
		&#125;,
		&#x2F;&#x2F; 2.可以在父组件中指定数据
		tabData: &#123;
			type: Array,
			default: () &#x3D;&gt; &#123;
				return [];
			&#125;,
		&#125;,
		&#x2F;&#x2F; 3.可以在父组件中选中项
		defaultIndex: &#123;
			type: Number,
			default: 0,
		&#125;,
	&#125;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot;&gt;
&lt;&#x2F;style&gt;
</code></pre></li>
</ol>
</li>
</ol>
<h3 id="tabs组件-封装网络请求"><a href="#tabs组件-封装网络请求" class="headerlink" title="tabs组件- 封装网络请求"></a>tabs组件- 封装网络请求</h3><ol>
<li><p>创建 <code>utils</code> 文件夹</p>
</li>
<li><p>创建request.js文件，封装请求对象</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 封装请求对象</span>
<span class="token keyword">const</span> <span class="token constant">BASE_URL</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.imooc-blog.lgdsunday.club/api</span><span class="token template-punctuation string">`</span></span>

<span class="token comment">/**
 * 
 * @param &#123;*&#125; param0 &#123; url,data,method &#125;
 * @returns Promise
 */</span>
<span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 通过 uni.request 发起网络请求</span>
        uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            url<span class="token operator">:</span> <span class="token constant">BASE_URL</span> <span class="token operator">+</span> url<span class="token punctuation">,</span>
            data<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            method<span class="token punctuation">,</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> data<span class="token punctuation">,</span> statusCode<span class="token punctuation">,</span> header <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// 请求成功</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// 请求失败</span>
                    <span class="token comment">// 给用户一个提示</span>
                    uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                        title<span class="token operator">:</span> data<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
                        icon<span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
                        mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                        duration<span class="token operator">:</span> <span class="token number">3000</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> request</code></pre></li>
<li><p>创建api文件夹，在 api 文件夹中新建 <code>hot.js</code>，在其中封装hot请求相关方法</p>
</li>
</ol>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../utils/request'</span>

<span class="token comment">/**
    热搜文章类型
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getHotTabs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/hot/tabs'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<ol start="4">
<li>在<code>hot.vue</code>中 使用封装方法</li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">...
&lt;script&gt;
import &#123; getHotTabs &#125; from &quot;api&#x2F;hot&quot;;
export default &#123;
	data() &#123;
		return &#123;&#125;;
	&#125;,
	&#x2F;**
	 * created：组件实例配置完成，但 DOM 未渲染，我们可以在此处进行网络请求，配置响应式数据
	 *&#x2F;
	created() &#123;
		this.loadHotTabs();
	&#125;,
	&#x2F;**
	 * uniapp中所有的方法必须被定义到 methods 中
	 *&#x2F;
	methods: &#123;
		async loadHotTabs() &#123;
			const res &#x3D; await getHotTabs();
			console.log(res);
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;
...</code></pre>

<h3 id="tabs组件-进行基本的数据展示"><a href="#tabs组件-进行基本的数据展示" class="headerlink" title="tabs组件- 进行基本的数据展示"></a>tabs组件- 进行基本的数据展示</h3><ol>
<li><p>在 <code>hot.vue</code>中使用</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;hot-container&quot;&gt;
		&lt;image class&#x3D;&quot;logo&quot; src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;logo.png&quot; mode&#x3D;&quot;aspectFit&quot; &#x2F;&gt;
		&lt;view class&#x3D;&quot;search-box&quot;&gt;
			&lt;my-search placeholderText&#x3D;&quot;uni-app 自定义组件&quot;&gt;&lt;&#x2F;my-search&gt;
		&lt;&#x2F;view&gt;
		&lt;!-- tabs --&gt;
		&lt;!-- uniapp 中进行 父向子传递数据 ， 遵循vue 中 v-bind 指令 -&gt; :tabData&#x3D;&quot;&quot; &#x3D;&#x3D;&#x3D; bind:tabData &#x3D; &quot;&#123;&#123;tabData&#125;&#125;&quot;--&gt;
		&lt;my-tabs :tabData&#x3D;&quot;tabData&quot;&gt;&lt;&#x2F;my-tabs&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; getHotTabs &#125; from &quot;api&#x2F;hot&quot;;
export default &#123;
	data() &#123;
		return &#123;
			tabData: [],
		&#125;;
	&#125;,
	created() &#123;
		this.loadHotTabs();
	&#125;,
	methods: &#123;
		async loadHotTabs() &#123;
			const &#123; data: res &#125; &#x3D; await getHotTabs();
			console.log(res);
			this.tabData &#x3D; res.list;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;
...
</code></pre></li>
<li><p>在 <code>my-tabs.vue</code>中使用</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;tab-container&quot;&gt;
		&lt;view class&#x3D;&quot;tab-box&quot;&gt;
			&lt;scroll-view scroll-x class&#x3D;&quot;scroll-view&quot; scroll-with-animation&gt;
				&lt;view class&#x3D;&quot;scroll-content&quot;&gt;
					&lt;!-- 
						小程序：wx:for &#x3D; &quot;&#123;&#123;arr&#125;&#125;&quot; default 变量名 item，下标 index
						uniapp：遵循 vue 的 v-for 指令
						v-for&#x3D;&quot;(item,index) in arr&quot; :key&#x3D;&quot;index&quot;
					 --&gt;
					&lt;block v-for&#x3D;&quot;(item, index) in tabData&quot; :key&#x3D;&quot;index&quot;&gt;
						&lt;view&gt;&#123;&#123; item.label || item &#125;&#125;&lt;&#x2F;view&gt;
					&lt;&#x2F;block&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;scroll-view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;my-tabs&quot;,
	props: &#123;
		config: &#123;
			type: Object,
			default: () &#x3D;&gt; &#123;
				return &#123;&#125;;
			&#125;,
		&#125;,
		tabData: &#123;
			type: Array,
			default: () &#x3D;&gt; &#123;
				return [];
			&#125;,
		&#125;,
		defaultIndex: &#123;
			type: Number,
			default: 0,
		&#125;,
	&#125;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot;&gt;
&lt;&#x2F;style&gt;</code></pre></li>
</ol>
<h3 id="tabs组件-美化样式"><a href="#tabs组件-美化样式" class="headerlink" title="tabs组件- 美化样式"></a>tabs组件- 美化样式</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;tab-container&quot;&gt;
		&lt;view class&#x3D;&quot;tab-box&quot;&gt;
			&lt;scroll-view scroll-x class&#x3D;&quot;scroll-view&quot; scroll-with-animation&gt;
				&lt;view class&#x3D;&quot;scroll-content&quot;&gt;
					&lt;view class&#x3D;&quot;tab-item-box&quot;&gt;
						&lt;block v-for&#x3D;&quot;(item, index) in tabData&quot; :key&#x3D;&quot;index&quot;&gt;
							&lt;view class&#x3D;&quot;tab-item&quot;&gt;&#123;&#123; item.label || item &#125;&#125;&lt;&#x2F;view&gt;
						&lt;&#x2F;block&gt;
					&lt;&#x2F;view&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;scroll-view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

...

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.tab-container &#123;
	font-size: $uni-font-size-base;
	height: 45px;
	line-height: 45px;
	background-color: $uni-bg-color;
	.tab-box &#123;
		width: 100%;
		height: 45px;
		display: flex;
		position: relative;
		.scroll-view &#123;
			white-space: nowrap;
			width: 100%;
			height: 100%;
			box-sizing: border-box;
			.scroll-content &#123;
				width: 100%;
				height: 100%;
				position: relative;
				.tab-item-box &#123;
					height: 100%;
					.tab-item &#123;
						height: 100%;
						display: inline-block;
						text-align: center;
						padding: 0 15px;
						position: relative;
						color: $uni-text-color;
					&#125;
				&#125;
			&#125;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;
</code></pre>

<h3 id="tabs组件-设置激活项"><a href="#tabs组件-设置激活项" class="headerlink" title="tabs组件- 设置激活项"></a>tabs组件- 设置激活项</h3><ol>
<li>因为根据 <strong>子组件不可以直接修改父组件传递过来的数据</strong> 特性，所以可以通过定义一个 <code>data-&gt; activeIndex</code> 来跟随 <code>defaultIndex</code> 的变化</li>
</ol>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 当前激活项的 index(由于不可以在子组件中修改父组件传递的值，所以我们定义一个值来接收父组件的值，并通过修改这个值来实现效果切换)</span>
			activeIndex<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	watch<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// 监听激活项目的变化</span>
		defaultIndex<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 当 defaultIndex 发生变化时，回调的方法</span>
			<span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>activeIndex <span class="token operator">=</span> val<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
			<span class="token comment">// immediate: 当前的handler 回调将会在侦听开始之后立即被调用</span>
			immediate<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre>

<ol start="2">
<li>找到 <code>tab-item</code> 的 <code>view</code> ，判断 <code>active</code> 的状态。并添加点击事件，修改 <code>activeIndex</code> 的值</li>
</ol>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-item<span class="token punctuation">"</span></span>
      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; <span class="token punctuation">'</span>tab-item-active<span class="token punctuation">'</span>: index === activeIndex &#125;<span class="token punctuation">"</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onTabClick(index)<span class="token punctuation">"</span></span>
      <span class="token punctuation">></span></span>&#123;&#123; item.label || item &#125;&#125;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript">methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
	* tabItem 的点击事件
	*/</span>
    <span class="token function">onTabClick</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>defaultIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>
        <span class="token comment">// 发送一个通知，表示激活项发送变化了</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"tabClick"</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre>

<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token selector">.tab-item </span><span class="token punctuation">&#123;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0 15px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">$uni-text-color</span><span class="token punctuation">;</span>

    <span class="token selector"><span class="token parent important">&amp;</span>-active </span><span class="token punctuation">&#123;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">$uni-text-color-hot</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="tabs组件-定义滑块"><a href="#tabs组件-定义滑块" class="headerlink" title="tabs组件- 定义滑块"></a>tabs组件- 定义滑块</h3><pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- 滑块 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>underline<span class="token punctuation">"</span></span>
      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
              transform: <span class="token punctuation">'</span>translateX(<span class="token punctuation">'</span> + slider.left + <span class="token punctuation">'</span>px)<span class="token punctuation">'</span>,
              &#125;<span class="token punctuation">"</span></span>
      <span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 滑块</span>
        slider<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 滑块距离左侧的距离</span>
            left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre>

<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token selector">.underline </span><span class="token punctuation">&#123;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token variable">$uni-text-color-hot</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
    <span class="token property">transition</span><span class="token punctuation">:</span> 0.5s<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="tabs-组件-实现滑块的滚动效果-01"><a href="#tabs-组件-实现滑块的滚动效果-01" class="headerlink" title="tabs 组件-实现滑块的滚动效果 -01"></a>tabs 组件-实现滑块的滚动效果 -01</h3><ol>
<li>确定滚动的时机</li>
<li>计算滚动的距离</li>
</ol>
<p><strong>确定滚动的时机</strong></p>
<ol>
<li> 监听激活项目的变化</li>
<li> tab 的点击事件处理</li>
</ol>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
* 根据当前的 activeIndex， 计算 滑块的滚动位置
*/</span>
<span class="token function">tabToIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 获取到当前的 activeIndex</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>activeIndex<span class="token punctuation">;</span>
    <span class="token comment">// TODO:计算滑块的滚动 === this.slider.left</span>
    <span class="token comment">// 配置 滚动条的 left</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>slider <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// TODO: left 怎么定义呢？</span>
        <span class="token comment">// tabItem 的宽度、tabItem的 left、 slider 的width</span>
        <span class="token comment">// left = tabItem.left + (tabItem.width - silder.width) / 2;</span>
        left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre>

<h3 id="tabs组件-实现滑块的滚动效果-02"><a href="#tabs组件-实现滑块的滚动效果-02" class="headerlink" title="tabs组件- 实现滑块的滚动效果 -02"></a>tabs组件- 实现滑块的滚动效果 -02</h3><ol>
<li>确定滚动的时机</li>
<li>计算滚动的距离<ol>
<li>维护一个单独的数据对象 <code>tabList</code></li>
<li>在 <code>tabList</code>  的 <code>item</code> 中为一个 <code>_slider</code> 属性</li>
<li>该属性保存了 【当前 <code>item</code> 下 的滑块位置】<ol>
<li>计算公式：<code>滑块左侧位置 = item.left + (item.width - slider.width) / 2</code></li>
</ol>
</li>
</ol>
</li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;tab-container&quot;&gt;
		&lt;view class&#x3D;&quot;tab-box&quot;&gt;
			&lt;scroll-view scroll-x class&#x3D;&quot;scroll-view&quot; scroll-with-animation&gt;
				&lt;view class&#x3D;&quot;scroll-content&quot;&gt;
					&lt;view class&#x3D;&quot;tab-item-box&quot;&gt;
						&lt;block v-for&#x3D;&quot;(item, index) in tabData&quot; :key&#x3D;&quot;index&quot;&gt;
							&lt;view
								:id&#x3D;&quot;&#39;_tab_&#39; + index&quot;
								class&#x3D;&quot;tab-item&quot;
								:class&#x3D;&quot;&#123; &#39;tab-item-active&#39;: index &#x3D;&#x3D;&#x3D; activeIndex &#125;&quot;
								@click&#x3D;&quot;onTabClick(index)&quot;
								&gt;&#123;&#123; item.label || item &#125;&#125;&lt;&#x2F;view
							&gt;
						&lt;&#x2F;block&gt;
					&lt;&#x2F;view&gt;
					&lt;!-- 滑块 --&gt;
					&lt;view
						class&#x3D;&quot;underline&quot;
						:style&#x3D;&quot;&#123;
							transform: &#39;translateX(&#39; + slider.left + &#39;px)&#39;,
							width: defaultConfig.underLineWidth + &#39;px&#39;,
							height: defaultConfig.underLineHeight + &#39;px&#39;,
							backgroundColor: defaultConfig.underLineColor,
						&#125;&quot;
					&gt;&lt;&#x2F;view&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;scroll-view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;my-tabs&quot;,
	props: &#123;
		config: &#123;
			type: Object,
			default: () &#x3D;&gt; &#123;
				return &#123;&#125;;
			&#125;,
		&#125;,
		tabData: &#123;
			type: Array,
			default: () &#x3D;&gt; &#123;
				return [];
			&#125;,
		&#125;,
		defaultIndex: &#123;
			type: Number,
			default: 0,
		&#125;,
	&#125;,
	data() &#123;
		return &#123;
			&#x2F;&#x2F; 组件内部维护的数据对象，为每个 item 单独维护一个 slider 的滑块对象
			tabList: [],
			&#x2F;&#x2F; 当前激活项的 index(由于不可以在子组件中修改父组件传递的值，所以我们定义一个值来接收父组件的值，并通过修改这个值来实现效果切换)
			activeIndex: -1,
			&#x2F;&#x2F; 滑块
			&#x2F;&#x2F; 想要实现滑块的滚动：
			&#x2F;&#x2F; 1. 确定滚动的时机 -&gt; 点击 tab 时
			&#x2F;&#x2F; 2. 计算滑块滚动的距离
			slider: &#123;
				&#x2F;&#x2F; 滑块距离左侧的距离
				left: 0,
			&#125;,
			&#x2F;&#x2F; 默认配置
			defaultConfig: &#123;
				&#x2F;&#x2F; 下划线的宽度
				underLineWidth: 24,
				&#x2F;&#x2F; 下划线的高度
				underLineHeight: 2,
				&#x2F;&#x2F; 下划线的颜色
				underLineColor: &quot;#f94d2a&quot;,
			&#125;,
		&#125;;
	&#125;,
	methods: &#123;
		&#x2F;**
		 * 更新tab的宽度
		 *&#x2F;
		updateTabWidth() &#123;
			&#x2F;&#x2F; 获取tabItem 的宽度、tabItem 的left，为 tabList 中的每个 item 维护一个 slider 对象
			let data &#x3D; this.tabList;
			if (data.length &#x3D;&#x3D;&#x3D; 0) return;
			&#x2F;&#x2F; uniapp 中 拿到渲染之后的 dom
			&#x2F;&#x2F; 获取 dom 的固定写法
			const query &#x3D; uni.createSelectorQuery().in(this);
			&#x2F;&#x2F; 循环数据源
			data.forEach((item, index) &#x3D;&gt; &#123;
				&#x2F;&#x2F; 获取 dom 的 固定写法
				query
					.select(&quot;#_tab_&quot; + index)
					.boundingClientRect((res) &#x3D;&gt; &#123;
						&#x2F;&#x2F; res 就是这时拿到的 dom
						&#x2F;&#x2F; 为数据对象的每个 item 都维护一个 _slider 对象
						item._slider &#x3D; &#123;
							&#x2F;&#x2F; left &#x3D; tabItem.left + (tabItem.width - silder.width) &#x2F; 2;
							left:
								res.left + (res.width - this.defaultConfig.underLineWidth) &#x2F; 2,
						&#125;;
						&#x2F;&#x2F; 运算完成之后，计算一次【滑块的位置】
						if (data.length - 1 &#x3D;&#x3D;&#x3D; index) &#123;
							this.tabToIndex();
						&#125;
					&#125;)
					.exec();
			&#125;);
		&#125;,
		&#x2F;**
		 * tabItem 的点击事件
		 *&#x2F;
		onTabClick(index) &#123;
			this.activeIndex &#x3D; index;
			this.tabToIndex();
			&#x2F;&#x2F; 发送一个通知，表示激活项发送变化了
			this.$emit(&quot;tabClick&quot;, index);
		&#125;,
		&#x2F;**
		 * 根据当前的 activeIndex， 计算 滑块的滚动位置
		 *&#x2F;
		tabToIndex() &#123;
			&#x2F;&#x2F; 获取到当前的 activeIndex
			const index &#x3D; this.activeIndex;
			&#x2F;&#x2F; TODO:计算滑块的滚动 &#x3D;&#x3D;&#x3D; this.slider.left
			&#x2F;&#x2F; 配置 滚动条的 left
			this.slider &#x3D; &#123;
				&#x2F;&#x2F; TODO: left 怎么定义呢？
				&#x2F;&#x2F; tabItem 的宽度、tabItem的 left、 slider 的width
				&#x2F;&#x2F; left &#x3D; tabItem.left + (tabItem.width - silder.width) &#x2F; 2;
				left: this.tabList[index]._slider.left,
			&#125;;
		&#125;,
	&#125;,
	watch: &#123;
		tabData: &#123;
			&#x2F;&#x2F; 当tabData 发生变化时，回调的方法
			handler(val) &#123;
				this.tabList &#x3D; val;
				&#x2F;&#x2F; tabList 数据就已经和 tabData 同步了
				&#x2F;&#x2F; 维护 tabList 中的每个 item，为 DOM 渲染完成之后
				&#x2F;&#x2F; this.$nextTick()		uniapp 虽然支持，但是 this.$nextTick() 存在兼容性问题
				setTimeout(() &#x3D;&gt; &#123;
					&#x2F;&#x2F; 计算 item 的slider
					this.updateTabWidth();
				&#125;, 0);
			&#125;,
			immediate: true,
		&#125;,
         &#x2F;&#x2F; 监听激活项目的变化
		defaultIndex: &#123;
			&#x2F;&#x2F; 当 defaultIndex 发生变化时，回调的方法
			handler(val) &#123;
				this.activeIndex &#x3D; val;
			&#125;,
			&#x2F;&#x2F; immediate: 当前的handler 回调将会在侦听开始之后立即被调用
			immediate: true,
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;
...</code></pre>

<h3 id="tabs组件-scrollView-的点击位移"><a href="#tabs组件-scrollView-的点击位移" class="headerlink" title="tabs组件- scrollView 的点击位移"></a>tabs组件- scrollView 的点击位移</h3><p>当【选中项】变化时，希望scrollView 也进行对应的位移。</p>
<ol>
<li>为scroll-view添加 scroll-left 属性</li>
</ol>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span>
             <span class="token attr-name">:scroll-left</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scrollLeft<span class="token punctuation">"</span></span>
             <span class="token attr-name">scroll-x</span>
             <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scroll-view<span class="token punctuation">"</span></span>
             <span class="token attr-name">scroll-with-animation</span>
<span class="token punctuation">></span></span></code></pre>

<ol start="2">
<li>在tabToIndex 中计算scrollLeft 的值：</li>
</ol>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">tabToIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    <span class="token comment">// 控制scrollView 进行横向的滚动</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>activeIndex <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultConfig<span class="token punctuation">.</span>underLineWidth<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre>

<h3 id="tabs组件-增加可配置项"><a href="#tabs组件-增加可配置项" class="headerlink" title="tabs组件- 增加可配置项"></a>tabs组件- 增加可配置项</h3><ol>
<li>为tab-item添加一些可以被外部传入的config所影响的样式</li>
</ol>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
      <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>_tab_<span class="token punctuation">'</span> + index<span class="token punctuation">"</span></span>
      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tab-item<span class="token punctuation">"</span></span>
      <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; <span class="token punctuation">'</span>tab-item-active<span class="token punctuation">'</span>: index === activeIndex &#125;<span class="token punctuation">"</span></span>
      <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onTabClick(index)<span class="token punctuation">"</span></span>
      <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
              color:
              activeIndex === index
              ? defaultConfig.activeTextColor
              : defaultConfig.textColor,
              &#125;<span class="token punctuation">"</span></span>
      <span class="token punctuation">></span></span>&#123;&#123; item.label || item &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span>
    <span class="token punctuation">></span></span></code></pre>

<ol start="2">
<li>监听config，并将config与defaultConfig合并，并将合并后的值赋于defaultConfig。</li>
</ol>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript">props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		config<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
			<span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			defaultConfig<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
				<span class="token comment">// 默认的字体颜色</span>
				textColor<span class="token operator">:</span> <span class="token string">"#333333"</span><span class="token punctuation">,</span>
				<span class="token comment">// 高亮的字体颜色</span>
				activeTextColor<span class="token operator">:</span> <span class="token string">"#f94d2a"</span><span class="token punctuation">,</span>
				<span class="token comment">// 下划线的宽度</span>
				underLineWidth<span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>
				<span class="token comment">// 下划线的高度</span>
				underLineHeight<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
				<span class="token comment">// 下划线的颜色</span>
				underLineColor<span class="token operator">:</span> <span class="token string">"#f94d2a"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
watch<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		config<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 当 config 发生变化时，回调的方法</span>
			<span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>defaultConfig <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>defaultConfig<span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>defaultConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
			immediate<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre>

<h3 id="List组件-分析List的基本结构"><a href="#List组件-分析List的基本结构" class="headerlink" title="List组件- 分析List的基本结构"></a>List组件- 分析List的基本结构</h3><pre><code>  *1. 使用 mock 数据（假数据），构建 List 的基本结构*

  *2. 美化样式*

  *3. 根据 tab 的切换，获取真实数据*

  *4. 渲染真实数据*

  *5. 让 list 具备左右切换的能力*

  *6. 完成 list 与 tabs 联动的能力*
</code></pre>
<h3 id="List-组件-使用-mock-数据，构建List的基本结构"><a href="#List-组件-使用-mock-数据，构建List的基本结构" class="headerlink" title="List 组件- 使用 mock 数据，构建List的基本结构"></a>List 组件- 使用 mock 数据，构建List的基本结构</h3><ol>
<li>创建 hot-list-item以及 hot-ranking 组件</li>
<li>编写组件结构</li>
</ol>
<p><strong><code>hot-list-item</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;item-container&quot;&gt;
		&lt;view class&#x3D;&quot;item-box&quot;&gt;
			&lt;!-- 左侧 --&gt;
			&lt;view class&#x3D;&quot;item-box-left&quot;&gt;
				&lt;!-- 排名 --&gt;
				&lt;hot-ranking&gt;&lt;&#x2F;hot-ranking&gt;
			&lt;&#x2F;view&gt;
			&lt;!-- 右侧 --&gt;
			&lt;view class&#x3D;&quot;item-box-right&quot;&gt;
				&lt;!-- 标题 --&gt;
				&lt;view class&#x3D;&quot;item-title&quot;&gt;标题&lt;&#x2F;view&gt;
				&lt;!-- 简介 --&gt;
				&lt;view class&#x3D;&quot;item-desc&quot;&gt;简介&lt;&#x2F;view&gt;
				&lt;view class&#x3D;&quot;item-bottom-box&quot;&gt;
					&lt;!-- 作者 --&gt;
					&lt;text class&#x3D;&quot;item-author&quot;&gt;作者&lt;&#x2F;text&gt;
					&lt;!-- 热度 --&gt;
					&lt;view class&#x3D;&quot;hot-box&quot;&gt;
						&lt;!-- 小图标 --&gt;
						&lt;image src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;hot-icon.png&quot; mode&#x3D;&quot;scaleToFill&quot; &#x2F;&gt;
						&lt;text class&#x3D;&quot;hot-text&quot;&gt;1000 热度&lt;&#x2F;text&gt;
					&lt;&#x2F;view&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;</code></pre>

<p><strong><code>hot-ranking</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;ranking-container&quot;&gt;
		&lt;image class&#x3D;&quot;ranking-bg&quot; src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;ranking-1.png&quot; &#x2F;&gt;
		&lt;text class&#x3D;&quot;ranking-text&quot;&gt;1&lt;&#x2F;text&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;</code></pre>

<ol start="3">
<li>在 hot 页面中使用</li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;view&gt;
    &lt;hot-list-item v-for&#x3D;&quot;(item, index) in 50&quot; :key&#x3D;&quot;index&quot;&gt; &lt;&#x2F;hot-list-item&gt;
&lt;&#x2F;view&gt;</code></pre>

<h3 id="List组件-美化-item-样式"><a href="#List组件-美化-item-样式" class="headerlink" title="List组件- 美化 item 样式"></a>List组件- 美化 item 样式</h3><p><strong><code>hot-list-item.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;item-container&quot;&gt;
		&lt;view class&#x3D;&quot;item-box&quot;&gt;
			&lt;!-- 左侧 --&gt;
			&lt;view class&#x3D;&quot;item-box-left&quot;&gt;
				&lt;!-- 排名 --&gt;
				&lt;hot-ranking&gt;&lt;&#x2F;hot-ranking&gt;
			&lt;&#x2F;view&gt;
			&lt;!-- 右侧 --&gt;
			&lt;view class&#x3D;&quot;item-box-right&quot;&gt;
				&lt;!-- 标题 --&gt;
				&lt;view class&#x3D;&quot;item-title&quot;&gt;标题&lt;&#x2F;view&gt;
				&lt;!-- 简介 --&gt;
				&lt;view class&#x3D;&quot;item-desc&quot;&gt;简介&lt;&#x2F;view&gt;
				&lt;view class&#x3D;&quot;item-bottom-box&quot;&gt;
					&lt;!-- 作者 --&gt;
					&lt;text class&#x3D;&quot;item-author&quot;&gt;作者&lt;&#x2F;text&gt;
					&lt;!-- 热度 --&gt;
					&lt;view class&#x3D;&quot;hot-box&quot;&gt;
						&lt;!-- 小图标 --&gt;
						&lt;image
							class&#x3D;&quot;hot-icon&quot;
							src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;hot-icon.png&quot;
							mode&#x3D;&quot;scaleToFill&quot;
						&#x2F;&gt;
						&lt;text class&#x3D;&quot;hot-text&quot;&gt;1000 热度&lt;&#x2F;text&gt;
					&lt;&#x2F;view&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;hot-list-item&quot;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.item-container &#123;
	padding-bottom: $uni-font-size-lg;
	.item-box &#123;
		display: flex;
		margin: 0 $uni-spacing-row-base;
		padding: $uni-spacing-col-lg $uni-spacing-row-base;
		background-color: $uni-bg-color;
		border-radius: $uni-spacing-col-lg;
		box-shadow: 2px 2px 5px 1px rgba(143, 143, 143, 0.1);
		.item-box-left &#123;
			margin-right: $uni-spacing-row-sm;
		&#125;
		.item-box-right &#123;
			width: 100%;	&#x2F;* 此处设置为100% 后，就会占据剩余宽度 *&#x2F;
			.item.title &#123;
				font-size: $uni-font-size-lg;
				font-weight: bold;
				color: $uni-text-color-title;
			&#125;
			.item-desc &#123;
				padding-top: $uni-spacing-col-sm;
				font-size: $uni-font-size-base;
				color: $uni-text-color;
			&#125;
			.item-bottom-box &#123;
				margin-top: $uni-spacing-row-sm;
				display: flex;
				justify-content: space-between;
				align-items: center;
				.item-author &#123;
					font-size: $uni-font-size-sm;
					color: $uni-text-color-placeholder;
				&#125;
				.hot-box &#123;
					.hot-icon &#123;
						width: $uni-img-size-sm;
						height: $uni-img-size-sm;
                          vertical-align: top;		&#x2F;* 原本icon要和文字基线对齐，其本身高度加基线距离底部的高度就会导致父容器被其撑开，而设置vertical-align后，就不需要对齐了，则其高度就为父容器高度 *&#x2F;
					&#125;
					.hot-text &#123;
						margin-left: $uni-spacing-row-sm;
						font-size: $uni-font-size-sm;
						color: $uni-text-color-hot;
					&#125;
				&#125;
			&#125;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<p><strong><code>hot-ranking.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;ranking-container&quot;&gt;
		&lt;image class&#x3D;&quot;ranking-bg&quot; src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;ranking-1.png&quot; &#x2F;&gt;
		&lt;text class&#x3D;&quot;ranking-text&quot;&gt;1&lt;&#x2F;text&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;hot-ranking&quot;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.ranking-container &#123;
	position: relative;
	text-align: center;
	width: 18px;		&#x2F;* 此处设置了宽度后，同时兄弟容器(item-box-right)设置了宽度为100%，则兄弟容器会占据父容器剩余宽度 *&#x2F;
	height: 20px;
	.ranking-bg &#123;
		width: 100%;		&#x2F;* 使图片占满整个container *&#x2F;
		height: 100%;
	&#125;
	.ranking-text &#123;
		position: absolute;		&#x2F;* 通过设置绝对定位，将文字居于图片正中间 *&#x2F;
		left: 50%;
		top: 50%;
		transform: translate(-55%, -55%);
		font-size: $uni-font-size-sm;
		font-weight: bold;
		color: $uni-text-color;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<h3 id="List-组件-根据-tab-的切换，获取真实数据"><a href="#List-组件-根据-tab-的切换，获取真实数据" class="headerlink" title="List 组件 - 根据 tab 的切换，获取真实数据"></a>List 组件 - 根据 tab 的切换，获取真实数据</h3><p><strong><code>api/hot.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 热搜文章列表
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getHotListFromTabType</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/hot/list'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            type
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>hot.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;hot-container&quot;&gt;
		&lt;image class&#x3D;&quot;logo&quot; src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;logo.png&quot; mode&#x3D;&quot;aspectFit&quot; &#x2F;&gt;
		&lt;view class&#x3D;&quot;search-box&quot;&gt;
			&lt;my-search placeholderText&#x3D;&quot;uni-app 自定义组件&quot;&gt;&lt;&#x2F;my-search&gt;
		&lt;&#x2F;view&gt;
		&lt;my-tabs
			:tabData&#x3D;&quot;tabData&quot;
			:config&#x3D;&quot;&#123;
				textColor: &#39;skyblue&#39;,
				activeTextColor: &#39;green&#39;,
			&#125;&quot;
			:defaultIndex&#x3D;&quot;currentIndex&quot;
			@tabClick&#x3D;&quot;onTabClick&quot;
		&gt;&lt;&#x2F;my-tabs&gt;

		&lt;!-- list视图 --&gt;
		&lt;!-- 
			1. 使用 mock 数据（假数据），构建 List 的基本结构
			2. 美化样式
			3. 根据 tab 的切换，获取真实数据
			4. 渲染真实数据
			5. 让 list 具备左右切换的能力
			6. 完成 list 与 tabs 联动的能力
		 --&gt;
		&lt;view&gt;
			&lt;!-- 加载动画 --&gt;
			&lt;uni-load-more status&#x3D;&quot;loading&quot; v-if&#x3D;&quot;isLoading&quot; &#x2F;&gt;
			&lt;block v-else&gt;
				&lt;hot-list-item v-for&#x3D;&quot;(item, index) in 50&quot; :key&#x3D;&quot;index&quot;&gt;
				&lt;&#x2F;hot-list-item&gt;
			&lt;&#x2F;block&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; getHotTabs, getHotListFromTabType &#125; from &quot;api&#x2F;hot&quot;;
export default &#123;
	data() &#123;
		return &#123;
			&#x2F;&#x2F; tab 数据源
			tabData: [],
			&#x2F;&#x2F; 激活项
			currentIndex: 0,
			&#x2F;&#x2F; list列表数据加载 loading
			isLoading: true,
			&#x2F;&#x2F; 以 index 为 key，以 对应的 list 为 value
			listData: &#123;&#125;,
		&#125;;
	&#125;,
	created() &#123;
		this.loadHotTabs();
	&#125;,
	methods: &#123;
		&#x2F;**
		 * 获取 热搜文章类型
		 *&#x2F;
		async loadHotTabs() &#123;
			const &#123; data: res &#125; &#x3D; await getHotTabs();
			this.tabData &#x3D; res.list;
			&#x2F;&#x2F; 因为，我们获取 list 数据时，需要 tab 中对应的 id
			this.loadHotListFromTab();
		&#125;,
		&#x2F;**
		 * 获取 List 列表数据
		 *&#x2F;
		async loadHotListFromTab() &#123;
			&#x2F;&#x2F; 1. 如果没有获取到数据
			if (!this.listData[this.currentIndex]) &#123;
				&#x2F;&#x2F; 1 没有获取到数据
				&#x2F;&#x2F; 1.1 展示loading
				this.isLoading &#x3D; true;
				&#x2F;&#x2F; 1.2 调用接口获取数据
				const id &#x3D; this.tabData[this.currentIndex].id;
				const &#123; data: res &#125; &#x3D; await getHotListFromTabType(id);
				&#x2F;&#x2F; 1.3 把数据保存到本地
				this.listData[this.currentIndex] &#x3D; res.list;
				&#x2F;&#x2F; 1.4 隐藏 Loading
				this.isLoading &#x3D; false;
			&#125;
		&#125;,
		&#x2F;**
		 * tab 点击事件
		 *&#x2F;
		onTabClick(index) &#123;
			this.currentIndex &#x3D; index;
			this.loadHotListFromTab();
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;
</code></pre>

<h3 id="List-组件-渲染真实数据"><a href="#List-组件-渲染真实数据" class="headerlink" title="List 组件 - 渲染真实数据"></a>List 组件 - 渲染真实数据</h3><p><strong><code>hot.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- 加载动画 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-load-more</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isLoading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-list-item</span>
                       <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in listData[currentIndex]<span class="token punctuation">"</span></span>
                       <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
                       <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
                       <span class="token attr-name">:ranking</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index + 1<span class="token punctuation">"</span></span>
                       <span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-list-item</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>hot-list-item.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;item-container&quot;&gt;
		&lt;view class&#x3D;&quot;item-box&quot;&gt;
			&lt;!-- 左侧 --&gt;
			&lt;view class&#x3D;&quot;item-box-left&quot;&gt;
				&lt;!-- 排名 --&gt;
				&lt;hot-ranking :ranking&#x3D;&quot;ranking&quot;&gt;&lt;&#x2F;hot-ranking&gt;
			&lt;&#x2F;view&gt;
			&lt;!-- 右侧 --&gt;
			&lt;view class&#x3D;&quot;item-box-right&quot;&gt;
				&lt;!-- 标题 --&gt;
				&lt;view class&#x3D;&quot;item-title line-clamp-2&quot;&gt;&#123;&#123; data.title &#125;&#125;&lt;&#x2F;view&gt;
				&lt;!-- 简介 --&gt;
				&lt;view class&#x3D;&quot;item-desc line-clamp-2&quot;&gt;&#123;&#123; data.desc &#125;&#125;&lt;&#x2F;view&gt;
				&lt;view class&#x3D;&quot;item-bottom-box&quot;&gt;
					&lt;!-- 作者 --&gt;
					&lt;text class&#x3D;&quot;item-author&quot;&gt;&#123;&#123; data.nickname &#125;&#125;&lt;&#x2F;text&gt;
					&lt;!-- 热度 --&gt;
					&lt;view class&#x3D;&quot;hot-box&quot;&gt;
						&lt;!-- 小图标 --&gt;
						&lt;image
							class&#x3D;&quot;hot-icon&quot;
							src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;hot-icon.png&quot;
							mode&#x3D;&quot;scaleToFill&quot;
						&#x2F;&gt;
						&lt;text class&#x3D;&quot;hot-text&quot;&gt;&#123;&#123; data.views &#125;&#125; 热度&lt;&#x2F;text&gt;
					&lt;&#x2F;view&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;hot-list-item&quot;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
	props: &#123;
		&#x2F;&#x2F; item 的数据
		data: &#123;
			type: Object,
			require: true,
		&#125;,
		&#x2F;&#x2F; 排名
		ranking: &#123;
			type: Number,
			require: true,
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

...</code></pre>

<p><strong><code>hot-ranking.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;ranking-container&quot;&gt;
		&lt;image class&#x3D;&quot;ranking-bg&quot; :src&#x3D;&quot;getRankingBg&quot; &#x2F;&gt;
		&lt;text class&#x3D;&quot;ranking-text&quot; :class&#x3D;&quot;&#123; &#39;text-white&#39;: ranking &lt;&#x3D; 3 &#125;&quot;&gt;&#123;&#123;
			ranking
		&#125;&#125;&lt;&#x2F;text&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;hot-ranking&quot;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
	props: &#123;
		ranking: &#123;
			type: Number,
			required: true,
		&#125;,
	&#125;,
	&#x2F;**
	 * 当依赖值发生变化时，计算属性就会重新计算
	 *&#x2F;
	computed: &#123;
		&#x2F;&#x2F; 每个计算属性都必须要有一个 返回值
		getRankingBg() &#123;
			if (this.ranking &lt;&#x3D; 3) &#123;
				return require(&#96;@&#x2F;static&#x2F;images&#x2F;ranking-$&#123;this.ranking&#125;.png&#96;);
			&#125;
			return require(&#96;@&#x2F;static&#x2F;images&#x2F;ranking-other.png&#96;);
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.ranking-container &#123;
	...
	.text-white &#123;
		color: white;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<p><strong><code>styles/global.scss</code></strong></p>
<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token comment">/**
    定义公共样式的地方
*/</span>

<span class="token comment">// 最多展示两行</span>
<span class="token selector">.line-clamp-2 </span><span class="token punctuation">&#123;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden <span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box <span class="token punctuation">;</span>
    <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> 2 <span class="token punctuation">;</span>
    <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical <span class="token punctuation">;</span>
    <span class="token property">word-break</span><span class="token punctuation">:</span> break-all <span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>main.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App'</span>
<span class="token comment">// 引入公共样式</span>
<span class="token keyword">import</span> <span class="token string">'./styles/global.scss'</span>

Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

App<span class="token punctuation">.</span>mpType <span class="token operator">=</span> <span class="token string">'app'</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>App
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>

<h3 id="List-组件-通过-swiper-改造List"><a href="#List-组件-通过-swiper-改造List" class="headerlink" title="List 组件 - 通过 swiper 改造List"></a>List 组件 - 通过 swiper 改造List</h3><p><strong><code>hot.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- current 表示当前展示哪个 swiperItem，加上后，当我们通过点击改变了currentIndex，可以使得swiper自动切换到对应的swiperItem --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swiper<span class="token punctuation">"</span></span> <span class="token attr-name">:current</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentIndex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- swiperItem 的数量，需要由 tabData 进行决定 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span>
                 <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swiper-item<span class="token punctuation">"</span></span>
                 <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(tabItem, tabIndex) in tabData<span class="token punctuation">"</span></span>
                 <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabIndex<span class="token punctuation">"</span></span>
                 <span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
            <span class="token comment">&lt;!-- 加载动画 --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-load-more</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isLoading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
            <span class="token comment">&lt;!-- 列表 --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
                <span class="token comment">&lt;!-- 列表循环数据的索引值由currentIndex 改为 tabIndex --></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-list-item</span>
                               <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in listData[tabIndex]<span class="token punctuation">"</span></span>
                               <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
                               <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
                               <span class="token attr-name">:ranking</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index + 1<span class="token punctuation">"</span></span>
                               <span class="token punctuation">></span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-list-item</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">></span></span></code></pre>

<p><strong>当前的问题：</strong></p>
<ol>
<li>列表高度展示错误</li>
<li>切换 <code>tab</code> 时的 <code>list</code> 的卡顿问题</li>
</ol>
<h3 id="List-组件-解决列表高度展示错误的问题"><a href="#List-组件-解决列表高度展示错误的问题" class="headerlink" title="List 组件 - 解决列表高度展示错误的问题"></a>List 组件 - 解决列表高度展示错误的问题</h3><p><strong>原因：</strong></p>
<p>没有给 <code>swiper</code> 指定高度。</p>
<p><strong>解决方案：</strong></p>
<p>指定高度即可。</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;hot-container&quot;&gt;
		&lt;image class&#x3D;&quot;logo&quot; src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;logo.png&quot; mode&#x3D;&quot;aspectFit&quot; &#x2F;&gt;
		&lt;view class&#x3D;&quot;search-box&quot;&gt;
			&lt;my-search placeholderText&#x3D;&quot;uni-app 自定义组件&quot;&gt;&lt;&#x2F;my-search&gt;
		&lt;&#x2F;view&gt;
		&lt;my-tabs
			:tabData&#x3D;&quot;tabData&quot;
			:config&#x3D;&quot;&#123;
				textColor: &#39;skyblue&#39;,
				activeTextColor: &#39;green&#39;,
			&#125;&quot;
			:defaultIndex&#x3D;&quot;currentIndex&quot;
			@tabClick&#x3D;&quot;onTabClick&quot;
		&gt;&lt;&#x2F;my-tabs&gt;
		&lt;swiper
			class&#x3D;&quot;swiper&quot;
			:current&#x3D;&quot;currentIndex&quot;
			:style&#x3D;&quot;&#123; height: currentSwiperHeight + &#39;px&#39; &#125;&quot;
		&gt;
			&lt;swiper-item
				class&#x3D;&quot;swiper-item&quot;
				v-for&#x3D;&quot;(tabItem, tabIndex) in tabData&quot;
				:key&#x3D;&quot;tabIndex&quot;
			&gt;
				&lt;view&gt;
					&lt;uni-load-more status&#x3D;&quot;loading&quot; v-if&#x3D;&quot;isLoading&quot; &#x2F;&gt;
					&lt;block v-else&gt;
						&lt;hot-list-item
							:class&#x3D;&quot;&#39;hot-list-item-&#39; + tabIndex&quot;
							v-for&#x3D;&quot;(item, index) in listData[tabIndex]&quot;
							:key&#x3D;&quot;index&quot;
							:data&#x3D;&quot;item&quot;
							:ranking&#x3D;&quot;index + 1&quot;
						&gt;
						&lt;&#x2F;hot-list-item&gt;
					&lt;&#x2F;block&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;swiper-item&gt;
		&lt;&#x2F;swiper&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; getHotTabs, getHotListFromTabType &#125; from &quot;api&#x2F;hot&quot;;
&#x2F;&#x2F; script：定义当前页面的逻辑 -&gt; js
export default &#123;
	data() &#123;
		return &#123;
			&#x2F;&#x2F; tab 数据源
			tabData: [],
			&#x2F;&#x2F; 激活项
			currentIndex: 0,
			&#x2F;&#x2F; list列表数据加载 loading
			isLoading: true,
			&#x2F;&#x2F; 以 index 为 key，以 对应的 list 为 value
			listData: &#123;&#125;,
			&#x2F;&#x2F; 当前 swiper 的高度
			currentSwiperHeight: 0,
			&#x2F;&#x2F; 缓存高度的计算结果。 以 index 为 key，以 对应的 高度 为 value
			swiperHeightData: &#123;&#125;,
		&#125;;
	&#125;,
	&#x2F;**
	 * created：组件实例配置完成，但 DOM 未渲染，我们可以在此处进行网络请求，配置响应式数据
	 *&#x2F;
	created() &#123;
		this.loadHotTabs();
	&#125;,
	&#x2F;**
	 * uniapp中所有的方法必须被定义到 methods 中
	 *&#x2F;
	methods: &#123;
		&#x2F;**
		 * 获取 热搜文章类型
		 *&#x2F;
		async loadHotTabs() &#123;
			const &#123; data: res &#125; &#x3D; await getHotTabs();
			this.tabData &#x3D; res.list;
			&#x2F;&#x2F; 因为，我们获取 list 数据时，需要 tab 中对应的 id
			this.loadHotListFromTab();
		&#125;,
		&#x2F;**
		 * 获取 List 列表数据
		 *&#x2F;
		async loadHotListFromTab() &#123;
			if (!this.listData[this.currentIndex]) &#123;
				this.isLoading &#x3D; true;
				const id &#x3D; this.tabData[this.currentIndex].id;
				const &#123; data: res &#125; &#x3D; await getHotListFromTabType(id);
				this.listData[this.currentIndex] &#x3D; res.list;
				this.isLoading &#x3D; false;
				setTimeout(async () &#x3D;&gt; &#123;
					&#x2F;&#x2F; 获取到当前 swiper 的高
					this.currentSwiperHeight &#x3D; await this.getCurrentSwiperHeight();
					this.swiperHeightData[this.currentIndex] &#x3D; this.currentSwiperHeight;
				&#125;, 0);
			&#125;
		&#125;,
		onTabClick(index) &#123;
			this.currentIndex &#x3D; index;
			this.loadHotListFromTab();
		&#125;,
		&#x2F;**
			计算当前 swiper 高度
		 *&#x2F;
		getCurrentSwiperHeight() &#123;
			return new Promise((resolve, reject) &#x3D;&gt; &#123;	&#x2F;&#x2F; 此处因为要靠getCurrentSwiperHeight的返回值进行下一步操作，所以得为其添加Promise
				&#x2F;&#x2F; 累加和
				let sum &#x3D; 0;
				&#x2F;&#x2F; 1. 拿到所有的 item -&gt; 异步
				const query &#x3D; uni.createSelectorQuery().in(this);
				query
					.selectAll(&#96;.hot-list-item-$&#123;this.currentIndex&#125;&#96;)
					.boundingClientRect((res) &#x3D;&gt; &#123;
						res.forEach((item) &#x3D;&gt; &#123;
							&#x2F;&#x2F; 2. 拿到所有 item 的高度
							&#x2F;&#x2F; 3. 把所有的高度累加
							sum +&#x3D; item.height;
						&#125;);
						resolve(sum);
					&#125;)
					.exec();
			&#125;);
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;
</code></pre>

<h3 id="List-组件-解决-切换-tab-时的-list-的卡顿问题"><a href="#List-组件-解决-切换-tab-时的-list-的卡顿问题" class="headerlink" title="List 组件 - 解决 切换 tab 时的 list 的卡顿问题"></a>List 组件 - 解决 切换 <code>tab</code> 时的 <code>list</code> 的卡顿问题</h3><p><strong>原因：</strong></p>
<p>动画未执行完成，<code>DOM</code> 未渲染完成，即获取数据，执行了新的渲染逻辑。</p>
<p><strong>解决方案：</strong></p>
<p>等待 动画执行完成， <code>DOM</code> 渲染完成。之后再获取数据，渲染列表。</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;swiper
        class&#x3D;&quot;swiper&quot;
        :current&#x3D;&quot;currentIndex&quot;
        :style&#x3D;&quot;&#123; height: currentSwiperHeight + &#39;px&#39; &#125;&quot;
        @animationfinish&#x3D;&quot;onSwiperEnd&quot;
        &gt;
    &lt;swiper-item
                 class&#x3D;&quot;swiper-item&quot;
                 v-for&#x3D;&quot;(tabItem, tabIndex) in tabData&quot;
                 :key&#x3D;&quot;tabIndex&quot;
                 &gt;
        &lt;view&gt;
            &lt;uni-load-more status&#x3D;&quot;loading&quot; v-if&#x3D;&quot;isLoading&quot; &#x2F;&gt;
            &lt;block v-else&gt;
                &lt;hot-list-item
                               :class&#x3D;&quot;&#39;hot-list-item-&#39; + tabIndex&quot;
                               v-for&#x3D;&quot;(item, index) in listData[tabIndex]&quot;
                               :key&#x3D;&quot;index&quot;
                               :data&#x3D;&quot;item&quot;
                               :ranking&#x3D;&quot;index + 1&quot;
                               &gt;
                &lt;&#x2F;hot-list-item&gt;
            &lt;&#x2F;block&gt;
        &lt;&#x2F;view&gt;
    &lt;&#x2F;swiper-item&gt;
&lt;&#x2F;swiper&gt;</code></pre>

<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
		 * 获取 List 列表数据
		 */</span>
            <span class="token keyword">async</span> <span class="token function">loadHotListFromTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// 1 没有获取到数据</span>
                <span class="token comment">// 1.1 展示loading</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token comment">// 1.2 调用接口获取数据</span>
                <span class="token keyword">const</span> id <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tabData<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>
                <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getHotListFromTabType</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 1.3 把数据保存到本地</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>listData<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
                <span class="token comment">// 1.4 隐藏 Loading</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>isLoading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
                <span class="token comment">// 渲染完成之后，计算高度</span>
                <span class="token comment">// this.$nextTick() 存在一定的兼容性问题，此处使用setTimeout()</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">// 获取到当前 swiper 的高</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>currentSwiperHeight <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCurrentSwiperHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>swiperHeightData<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentSwiperHeight<span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token comment">/**
		 * swiper 动画完成
		 */</span>
            <span class="token function">onSwiperEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">// 判断缓存是否存在，不存在再去获取数据</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>listData<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadHotListFromTab</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">return</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token comment">// 未 return，则证明存在数据缓存，存在数据缓存，则同时存在 height 的缓存数据</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>currentSwiperHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>swiperHeightData<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentIndex<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span></code></pre>

<h3 id="List-组件-swiper-和-tabs-联动"><a href="#List-组件-swiper-和-tabs-联动" class="headerlink" title="List 组件 - swiper 和 tabs 联动"></a>List 组件 - <code>swiper</code> 和 <code>tabs</code> 联动</h3><p><strong>目前状态：</strong></p>
<p><code>tabs</code> 切换时，<code>swiper</code> 可以联动。</p>
<p><code>swiper</code> 切换时，<code>tabs</code> 无法联动。</p>
<p><strong>解决：</strong></p>
<p>让<code>swiper</code> 切换时，<code>tabs</code> 进行联动。</p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;swiper
      class&#x3D;&quot;swiper&quot;
      :current&#x3D;&quot;currentIndex&quot;
      :style&#x3D;&quot;&#123; height: currentSwiperHeight + &#39;px&#39; &#125;&quot;
      @animationfinish&#x3D;&quot;onSwiperEnd&quot;
      @change&#x3D;&quot;onSwiperChange&quot;
    &gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
    export default &#123;
    	methods: &#123;
            &#x2F;&#x2F; 监听 swiper 的切换事件
            onSwiperChange(e) &#123;
              this.currentIndex &#x3D; e.detail.current;
            &#125;,
        &#125;
    &#125;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="List-组件-tabs-中滑块跟随滚动"><a href="#List-组件-tabs-中滑块跟随滚动" class="headerlink" title="List 组件 - tabs 中滑块跟随滚动"></a>List 组件 - tabs 中滑块跟随滚动</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
watch:&#123;
&#x2F;&#x2F; 监听激活项目的变化
    defaultIndex: &#123;
        &#x2F;&#x2F; 当 defaultIndex 发生变化时，回调的方法
        handler(val) &#123;
            this.activeIndex &#x3D; val;
            if (this.tabList.length &#x3D;&#x3D;&#x3D; 0) return;
            &#x2F;&#x2F; 重新计算 滑块位置
            this.tabToIndex();
        &#125;,
            &#x2F;&#x2F; immediate: 当前的handler 回调将会在侦听开始之后立即被调用
            immediate: true,
    &#125;,
&#125;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="完成-tabs-的吸顶效果"><a href="#完成-tabs-的吸顶效果" class="headerlink" title="完成 tabs 的吸顶效果"></a>完成 <code>tabs</code> 的吸顶效果</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
&lt;view class&#x3D;&quot;tab-sticky&quot;&gt;
    &lt;my-tabs
             :tabData&#x3D;&quot;tabData&quot;
             :config&#x3D;&quot;&#123;
                      textColor: &#39;skyblue&#39;,
                      activeTextColor: &#39;green&#39;,
                      &#125;&quot;
             :defaultIndex&#x3D;&quot;currentIndex&quot;
             @tabClick&#x3D;&quot;onTabClick&quot;
             &gt;&lt;&#x2F;my-tabs&gt;
    &lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
	.tab-sticky &#123;
		position: sticky;
		z-index: 99;
		top: 0;
	&#125;
&lt;&#x2F;style&gt;</code></pre>

<h3 id="控制列表滚动位置"><a href="#控制列表滚动位置" class="headerlink" title="控制列表滚动位置"></a>控制列表滚动位置</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
export default &#123;
	data() &#123;
        function()&#123;
            return&#123;
			&#x2F;&#x2F; 当前的滚动距离
			currentPageScrollTop: 0,
            &#125;
		&#125;;
	&#125;,
    onPageScroll(&#123; scrollTop &#125;) &#123;
        &#x2F;&#x2F; console.log(scrollTop);
        this.currentPageScrollTop &#x3D; scrollTop;
    &#125;,
	methods: &#123;
        onSwiperChange(e) &#123;
            &#x2F;&#x2F; console.log(e);
            if (this.currentPageScrollTop &gt; 130) &#123;
                &#x2F;&#x2F; 控制列表的滚动位置
                uni.pageScrollTo(&#123; scrollTop: 130 &#125;);
            &#125;
            this.currentIndex &#x3D; e.detail.current;
        &#125;,
&#125;,
&lt;&#x2F;script&gt;</code></pre>



<h3 id="List-组件-处理热度的显示"><a href="#List-组件-处理热度的显示" class="headerlink" title="List 组件 - 处理热度的显示"></a>List 组件 - 处理热度的显示</h3><p>通过 <code>filters 过滤器</code> 进行处理：创建 <code>filters</code> 文件夹，创建 <code>index.js</code> 文件： </p>
<p><strong>filters/index.js</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">/**
 * 将字符转化为以千为单位的字符
 * @param &#123;*&#125; val 待转换字符
 * @returns
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hotNumber</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">return</span> val<span class="token punctuation">;</span>

  <span class="token comment">// 将 val 转为字符串</span>
  val <span class="token operator">=</span> val <span class="token operator">+</span> <span class="token string">''</span><span class="token punctuation">;</span>
  <span class="token comment">// 获取以 千 为单位的值</span>
  <span class="token keyword">return</span> val<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> val<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'k'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</code></pre>

<p><strong>main.js</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> filters <span class="token keyword">from</span> <span class="token string">'./filters'</span><span class="token punctuation">;</span>

<span class="token comment">// 注册过滤器</span>
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>filters<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  Vue<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> filters<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<p><strong>hot-list-item.vue</strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.views | hotNumber &#125;&#125; 热度<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_26679989/article/details/112319782?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163547570416780271560774%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=163547570416780271560774&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-1-112319782.pc_search_result_hbase_insert&utm_term=slice%E4%B8%8EsubString&spm=1018.2226.3001.4187">slice与subString的区别</a></p>
<h3 id="文章搜索-分析文章搜索页面"><a href="#文章搜索-分析文章搜索页面" class="headerlink" title="文章搜索 - 分析文章搜索页面"></a>文章搜索 - 分析文章搜索页面</h3><ol>
<li>【慕课热搜】<ol>
<li>展示 8 个热搜内容</li>
</ol>
</li>
<li>【搜索历史】<ol>
<li>按照【从后向前】的顺序，展示搜索历史</li>
<li>点击【小垃圾筒】可删除历史记录</li>
</ol>
</li>
<li>【搜索结果】<ol>
<li>不输入内容直接回车，按照当前的 <code>placeholder</code> 索引</li>
<li>输入内容，按照当前内容索引</li>
<li><code>item</code> 的展示分为三类<ol>
<li>无图片展示</li>
<li>单个图片展示 </li>
<li>三个图片展示</li>
</ol>
</li>
<li>item 中关键字高亮</li>
<li>点击 【叉号】返回【搜索历史】</li>
<li>点击【取消】返回【慕课热搜】</li>
</ol>
</li>
</ol>
<h3 id="文章搜索-使用分包，创建-search-blog-页面"><a href="#文章搜索-使用分包，创建-search-blog-页面" class="headerlink" title="文章搜索 - 使用分包，创建 search-blog 页面"></a>文章搜索 - 使用分包，创建 <code>search-blog</code> 页面</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><ol>
<li><p>什么是<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html">分包</a></p>
<p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/subpackages.html">分包</a>指：将小程序划分成不同的子包，在构建时打包成不同的分包，用户在使用时按需进行加载</p>
</li>
<li><p>分包的好处</p>
<ul>
<li>可以优化小程序首次启动的下载时间</li>
<li>在多团队共同开发时可以更好的解耦协作</li>
</ul>
</li>
</ol>
<p><strong>微信小程序</strong> 提供了分包的能力，而 <code>uniapp</code> 也对其进行了支持。</p>
<h4 id="实现分包"><a href="#实现分包" class="headerlink" title="实现分包"></a>实现分包</h4><ol>
<li>打开 pages.json ，新建 subPackages 节点</li>
</ol>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"subPackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></code></pre>

<ol start="2">
<li>根目录下新建 <strong><code>subpkg</code></strong> 文件夹，内部新建 pages文件夹，在pages文件夹中新建uniapp页面 search-blog 。</li>
<li>节点中每个对象为一个分包，其中<ol>
<li> <code>root</code>：分包包名</li>
<li> <code>name</code>：分包别名</li>
<li><code>pages</code>：分包下的页面<ol>
<li><code>path</code>：分包下的页面路径</li>
<li><code>style</code>：页面的样式</li>
</ol>
</li>
</ol>
</li>
</ol>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"subPackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"subpkg"</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"sub-1"</span><span class="token punctuation">,</span>
            <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">&#123;</span>
                    <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/search-blog/search-blog"</span><span class="token punctuation">,</span>
                    <span class="token property">"style"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                        <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"文章搜索"</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span></code></pre>

<h3 id="文章搜索-完成跳转，渲染搜索框"><a href="#文章搜索-完成跳转，渲染搜索框" class="headerlink" title="文章搜索 - 完成跳转，渲染搜索框"></a>文章搜索 - 完成跳转，渲染搜索框</h3><p><strong><code>hot.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-box&quot; @click&#x3D;&quot;onToSearch&quot;&gt;
		&lt;my-search placeholderText&#x3D;&quot;uni-app 自定义组件&quot;&gt;&lt;&#x2F;my-search&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
methods: &#123;
	onToSearch() &#123;
		uni.navigateTo(&#123; url: &quot;&#x2F;subpkg&#x2F;pages&#x2F;search-blog&#x2F;search-blog&quot; &#125;);
	&#125;,
&#125;,
&lt;&#x2F;script&gt;</code></pre>

<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;search-blog-container&quot;&gt;
		&lt;!-- search 模块 --&gt;
		&lt;view class&#x3D;&quot;search-bar-box&quot;&gt;
			&lt;my-search&gt;&lt;&#x2F;my-search&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-blog-container &#123;
	.search-bar-box &#123;
		background-color: $uni-bg-color;
		padding: $uni-spacing-row-sm;
		position: sticky;
		top: 0px;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<h3 id="文章搜索-为-my-search-组件赋予搜索的能力"><a href="#文章搜索-为-my-search-组件赋予搜索的能力" class="headerlink" title="文章搜索 - 为  my-search 组件赋予搜索的能力"></a>文章搜索 - 为  <code>my-search</code> 组件赋予搜索的能力</h3><p><strong><code>my-search.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;my-search-container&quot;&gt;
		&lt;!-- 搜索输入框 --&gt;
		&lt;uni-search-bar
			v-if&#x3D;&quot;isShowInput&quot;
			class&#x3D;&quot;my-search-bar&quot;
			:radius&#x3D;&quot;100&quot;
			:bgColor&#x3D;&quot;config.backgroundColor&quot;
			:placeholder&#x3D;&quot;placeholderText&quot;
			:value&#x3D;&quot;value&quot;
			@confirm&#x3D;&quot;onSearch&quot;
			@focus&#x3D;&quot;onFocus&quot;
			@blur&#x3D;&quot;onBlur&quot;
			@clear&#x3D;&quot;onClear&quot;
			@cancel&#x3D;&quot;onCancel&quot;
			@input&#x3D;&quot;onInput&quot;
		&gt;
			&lt;uni-icons slot&#x3D;&quot;clearIcon&quot; type&#x3D;&quot;clear&quot; color&#x3D;&quot;#999&quot; &#x2F;&gt;
		&lt;&#x2F;uni-search-bar&gt;

		&lt;!-- 搜索按钮 --&gt;
		&lt;view class&#x3D;&quot;my-search-box&quot; v-else&gt;
			&lt;!-- 搜索图标 --&gt;
			&lt;image src&#x3D;&quot;@&#x2F;static&#x2F;images&#x2F;search.png&quot; class&#x3D;&quot;icon&quot; &#x2F;&gt;
			&lt;!-- placeholder --&gt;
			&lt;text class&#x3D;&quot;placeholder&quot;&gt;&#123;&#123; placeholderText &#125;&#125;&lt;&#x2F;text&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;my-search&quot;,
	&#x2F;&#x2F; properties
	props: &#123;
		&#x2F;&#x2F; 输入的内容
		&#x2F;&#x2F; search-bar 不可以使用 v-model，因为直接使用 v-model会修改父组件传递过来的数据
		value: &#123;
			type: String,
		&#125;,
		&#x2F;&#x2F; 是否显示输入框
		isShowInput: &#123;
			type: Boolean,
			default: false,
		&#125;,
		&#x2F;&#x2F; 配置对象
		config: &#123;
			type: Object,
			default: () &#x3D;&gt; (&#123;
				height: 36,
				backgroundColor: &quot;#fff&quot;,
				icon: &quot;&#x2F;static&#x2F;images&#x2F;search.png&quot;,
				textColor: &quot;#454545&quot;,
				border: &quot;1px solid #c9c9c9&quot;,
			&#125;),
		&#125;,
		placeholderText: &#123;
			type: String,
			default: &quot;搜索&quot;,
		&#125;,
	&#125;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
	methods: &#123;
		&#x2F;**
		 * 点击搜索按钮触发
		 *&#x2F;
		onSearch() &#123;
			&#x2F;&#x2F; console.log(&quot;onSearch&quot;);
			this.$emit(&quot;search&quot;, this.value);
		&#125;,
		&#x2F;**
		 * 输入框获取焦点触发
		 *&#x2F;
		onFocus() &#123;
			&#x2F;&#x2F; console.log(&quot;onFocus&quot;);
			this.$emit(&quot;focus&quot;, this.value);
		&#125;,
		&#x2F;**
		 * 输入框失去焦点触发
		 *&#x2F;
		onBlur() &#123;
			&#x2F;&#x2F; console.log(&quot;onBlur&quot;);
			this.$emit(&quot;blur&quot;, this.value);
		&#125;,
		&#x2F;**
		 * 点击输入框中清空按钮
		 *&#x2F;
		onClear() &#123;
			&#x2F;&#x2F; console.log(&quot;onClear&quot;);
			this.$emit(&quot;clear&quot;, this.value);
		&#125;,
		&#x2F;**
		 * 点击取消按钮
		 *&#x2F;
		onCancel() &#123;
			&#x2F;&#x2F; console.log(&quot;onCancel&quot;);
			this.$emit(&quot;focus&quot;, this.value);
		&#125;,
		&#x2F;**
		 * value 改变时触发
		 *&#x2F;
		onInput(val) &#123;
			console.log(&quot;onInput&quot; + val);
			&#x2F;&#x2F; 通知父组件
			this.$emit(&quot;input&quot;, val);
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;search-blog-container&quot;&gt;
		&lt;!-- search 模块 --&gt;
		&lt;view class&#x3D;&quot;search-bar-box&quot;&gt;
			&lt;!-- v-model是 vue 中完成双向数据绑定的子类，如果说想要应用到组件的绑定中，那么需要遵守以下规则：
              1.子组件中接收到的值 必须以 value 命名
              2.子组件中想要修改 value 时，必须要 发送一个叫做 input 的事件
              满足以上两点，父组件可以通过 v-model 指令把值直接传递给 value 这个 props
             --&gt;
			&lt;my-search
				:isShowInput&#x3D;&quot;true&quot;
				:placeholderText&#x3D;&quot;defaultText&quot;
				v-model&#x3D;&quot;searchVal&quot;
				:config&#x3D;&quot;&#123;
					backgroundColor: &#39;#f1f0f3&#39;,
				&#125;&quot;
				@search&#x3D;&quot;onSearchConfirm&quot;
				@focus&#x3D;&quot;onSearchFocus&quot;
				@blur&#x3D;&quot;onSearchBlur&quot;
				@clear&#x3D;&quot;onSearchClear&quot;
				@cancel&#x3D;&quot;onSearchCancel&quot;
			&gt;&lt;&#x2F;my-search&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	components: &#123;&#125;,
	data: () &#x3D;&gt; (&#123;
		&#x2F;&#x2F; 输入框中的内容
		searchVal: &quot;&quot;,
		&#x2F;&#x2F; 输入框的 placeholder
		defaultText: &quot;默认的 placeHolder&quot;,
	&#125;),
	methods: &#123;
		&#x2F;**
		 * 搜索内容
		 *&#x2F;
		onSearchConfirm(val) &#123;
			console.log(&quot;搜索内容&quot; + this.searchVal);
		&#125;,
		&#x2F;**
		 * 获取焦点
		 *&#x2F;
		onSearchFocus(val) &#123;
			console.log(&quot;获取焦点&quot;);
		&#125;,
		&#x2F;**
		 * 失去焦点
		 *&#x2F;
		onSearchBlur() &#123;
			console.log(&quot;失去焦点&quot;);
		&#125;,
		&#x2F;**
		 *清空内容
		 *&#x2F;
		onSearchClear() &#123;
			console.log(&quot;清空内容&quot;);
		&#125;,
		&#x2F;**
		 * 取消按钮
		 *&#x2F;
		onSearchCancel() &#123;
			console.log(&quot;取消按钮&quot;);
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-blog-container &#123;
	.search-bar-box &#123;
		background-color: $uni-bg-color;
		padding: $uni-spacing-row-sm;
		position: sticky;
		top: 0px;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<p>因为 uni-search-bar 组件没有提供 文本居左的属性，所以想要让文本居左显示，需要修改 <code>uni-search-bar</code> 的源代码：</p>
<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token selector">.uni-searchbar__box </span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 处理初始 searchbar 位置</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> start<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wjw1014/p/13931241.html">Vue 自定义组件v-model父子组件传值双向绑定</a></p>
<h3 id="文章搜索-显示推荐搜索"><a href="#文章搜索-显示推荐搜索" class="headerlink" title="文章搜索 - 显示推荐搜索"></a>文章搜索 - 显示推荐搜索</h3><p><strong><code>api/search.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../utils/request'</span>

<span class="token comment">/**
 * 获取默认搜索内容
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getDefaultText</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/search/default-text'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
import &#123; getDefaultText &#125; from &quot;api&#x2F;search&quot;;
export default &#123;
created() &#123;
		this.loadDefaultText();
	&#125;,
methods: &#123;
	async loadDefaultText() &#123;
			const &#123; data: res &#125; &#x3D; await getDefaultText();
			this.defaultText &#x3D; res.defaultText;
		&#125;,
	&#125;,
	&#125;;
&#125;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="文章搜索-创建三个业务组件"><a href="#文章搜索-创建三个业务组件" class="headerlink" title="文章搜索 - 创建三个业务组件"></a>文章搜索 - 创建三个业务组件</h3><ol>
<li><p>使用HBuilderX 创建三个组件：search-history search-hot-list search-result</p>
</li>
<li><p>在 <strong><code>search-blog.vue中使用</code></strong></p>
</li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;search-blog-container&quot;&gt;
			&lt;!-- 热搜列表 --&gt;
			&lt;view class&#x3D;&quot;search-hot-list-box&quot;&gt;
				&lt;search-hot-list&gt;&lt;&#x2F;search-hot-list&gt;
			&lt;&#x2F;view&gt;
			&lt;!-- 搜索历史 --&gt;
			&lt;view class&#x3D;&quot;search-history-box&quot;&gt;
				&lt;search-history&gt;&lt;&#x2F;search-history&gt;
			&lt;&#x2F;view&gt;
			&lt;!-- 搜索结果 --&gt;
			&lt;view class&#x3D;&quot;search-result-list&quot;&gt;
				&lt;search-result-list&gt;&lt;&#x2F;search-result-list&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;</code></pre>

<h3 id="文章搜索-控制业务组件的展示效果"><a href="#文章搜索-控制业务组件的展示效果" class="headerlink" title="文章搜索 - 控制业务组件的展示效果"></a>文章搜索 - 控制业务组件的展示效果</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;search-blog-container&quot;&gt;
		&lt;view class&#x3D;&quot;search-bar-box&quot;&gt;
			&lt;my-search
				:isShowInput&#x3D;&quot;true&quot;
				:placeholderText&#x3D;&quot;defaultText&quot;
				v-model&#x3D;&quot;searchVal&quot;
				:config&#x3D;&quot;&#123;
					backgroundColor: &#39;#f1f0f3&#39;,
				&#125;&quot;
				@search&#x3D;&quot;onSearchConfirm&quot;
				@focus&#x3D;&quot;onSearchFocus&quot;
				@blur&#x3D;&quot;onSearchBlur&quot;
				@clear&#x3D;&quot;onSearchClear&quot;
				@cancel&#x3D;&quot;onSearchCancel&quot;
			&gt;&lt;&#x2F;my-search&gt;
			&lt;!-- 热搜列表 --&gt;
			&lt;!-- HTML中，只可以访问 data 中定义的数据（不能访问常量，故下方在 data中又定义了同名常量） --&gt;
			&lt;view class&#x3D;&quot;search-hot-list-box&quot; v-if&#x3D;&quot;showType &#x3D;&#x3D;&#x3D; HOT_LIST&quot;&gt;
				&lt;search-hot-list&gt;&lt;&#x2F;search-hot-list&gt;
			&lt;&#x2F;view&gt;
			&lt;!-- 搜索历史 --&gt;
			&lt;view class&#x3D;&quot;search-history-box&quot; v-else-if&#x3D;&quot;showType &#x3D;&#x3D;&#x3D; SEARCH_HISTORY&quot;&gt;
				&lt;search-history&gt;&lt;&#x2F;search-history&gt;
			&lt;&#x2F;view&gt;
			&lt;!-- 搜索结果 --&gt;
			&lt;view class&#x3D;&quot;search-result-list&quot; v-else&gt;
				&lt;search-result-list&gt;&lt;&#x2F;search-result-list&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
&#x2F;&#x2F; 热搜列表
const HOT_LIST &#x3D; &quot;0&quot;;
&#x2F;&#x2F; 搜索历史
const SEARCH_HISTORY &#x3D; &quot;1&quot;;
&#x2F;&#x2F; 搜索结果
const SEARCH_RESULT &#x3D; &quot;2&quot;;
export default &#123;
	data: () &#x3D;&gt; (&#123;
		&#x2F;&#x2F; 输入框中的内容
		searchVal: &quot;&quot;,
		&#x2F;&#x2F; 输入框的 placeholder
		defaultText: &quot;默认的 placeHolder&quot;,
		HOT_LIST,
		SEARCH_HISTORY,
		SEARCH_RESULT,
		&#x2F;&#x2F; 默认情况下 || 点击了输入框的取消按钮时，会显示【热搜列表】
		&#x2F;&#x2F; 当 searchBar 获取焦点时 || 点击输入框清空按钮时，显示【搜索历史】
		&#x2F;&#x2F; 用户点击热搜列表的 item || 用户点击搜索历史 item || 用户按下搜索键，显示【搜索结果】
		showType: HOT_LIST,
	&#125;),
methods: &#123;
    ...
		&#x2F;**
		 * 搜索内容
		 *&#x2F;
		onSearchConfirm(val) &#123;
			&#x2F;&#x2F; 假如 val 不存在，那么使用【推荐的搜索文本】
			this.searchVal &#x3D; val ? val : this.defaultText;
			&#x2F;&#x2F; 当用户进行输入时，如果包含输入的内容
			if (this.searchVal) &#123;
				this.showType &#x3D; SEARCH_RESULT;
			&#125;
		&#125;,
		&#x2F;**
		 * 获取焦点
		 *&#x2F;
		onSearchFocus(val) &#123;
			this.showType &#x3D; SEARCH_HISTORY;
		&#125;,
		&#x2F;**
		 * 失去焦点
		 *&#x2F;
		onSearchBlur() &#123;&#125;,
		&#x2F;**
		 *清空内容
		 *&#x2F;
		onSearchClear() &#123;
			this.showType &#x3D; SEARCH_HISTORY;
		&#125;,
		&#x2F;**
		 * 取消按钮
		 *&#x2F;
		onSearchCancel() &#123;
			this.showType &#x3D; HOT_LIST;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="热搜列表-数据获取"><a href="#热搜列表-数据获取" class="headerlink" title="热搜列表 - 数据获取"></a>热搜列表 - 数据获取</h3><p><strong><code>api/search.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 热搜搜索列表
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getSearchHotList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/search/hot-list'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>search-hot-list.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
import &#123; getSearchHotList &#125; from &quot;api&#x2F;search&quot;;
export default &#123;
	name: &quot;search-hot-list&quot;,
	data: () &#x3D;&gt; (&#123;
		hotList: [],
	&#125;),
	created() &#123;
		this.loadSearchHotList();
	&#125;,
	methods: &#123;
		&#x2F;**
		 * 获取热搜列表数据
		 *&#x2F;
		async loadSearchHotList() &#123;
			const &#123; data: res &#125; &#x3D; await getSearchHotList();
			this.hotList &#x3D; res.list;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="热搜列表-数据展示"><a href="#热搜列表-数据展示" class="headerlink" title="热搜列表 - 数据展示"></a>热搜列表 - 数据展示</h3><p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;!-- 热搜列表 --&gt;
&lt;!-- HTML中，只可以访问 data 中定义的数据（不能访问常量，故下方在 data中又定义了同名常量） --&gt;
&lt;view class&#x3D;&quot;search-hot-list-box card&quot; v-if&#x3D;&quot;showType &#x3D;&#x3D;&#x3D; HOT_LIST&quot;&gt;
    &lt;search-hot-list&gt;&lt;&#x2F;search-hot-list&gt;
&lt;&#x2F;view&gt;</code></pre>

<p><strong><code>global.scss</code></strong></p>
<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// 卡片视图</span>
<span class="token selector">.card</span><span class="token punctuation">&#123;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #f9f9f9<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
    <span class="token property">box-shadow</span><span class="token punctuation">:</span> 2px 2px 5px 1px <span class="token function">rgba</span><span class="token punctuation">(</span>143<span class="token punctuation">,</span> 143<span class="token punctuation">,</span> 143<span class="token punctuation">,</span> 0.1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>search-hot-list.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-hot-list-container&quot;&gt;
		&lt;!-- 标题 --&gt;
		&lt;view class&#x3D;&quot;search-hot-title&quot;&gt;慕课热搜 - 全网技术一网打尽&lt;&#x2F;view&gt;
		&lt;!-- 列表 --&gt;
		&lt;block v-for&#x3D;&quot;(item, index) in hotList&quot; :key&#x3D;&quot;index&quot;&gt;
			&lt;view class&#x3D;&quot;search-hot-item&quot;&gt;
				&lt;!-- 序号 --&gt;
				&lt;hot-ranking :ranking&#x3D;&quot;index + 1&quot;&gt;&lt;&#x2F;hot-ranking&gt;
				&lt;!-- 文本 --&gt;
				&lt;text class&#x3D;&quot;title line-clamp&quot;&gt;&#123;&#123; item.label &#125;&#125;&lt;&#x2F;text&gt;
				&lt;!-- 图标 --&gt;
				&lt;image
					class&#x3D;&quot;search-hot-icon&quot;
					src&#x3D;&quot;&#x2F;static&#x2F;images&#x2F;hot-icon.png&quot;
					v-if&#x3D;&quot;index &lt;&#x3D; 2&quot;
				&#x2F;&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;block&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; getSearchHotList &#125; from &quot;api&#x2F;search&quot;;
export default &#123;
	name: &quot;search-hot-list&quot;,
	data: () &#x3D;&gt; (&#123;
		hotList: [],
	&#125;),
	created() &#123;
		this.loadSearchHotList();
	&#125;,
	methods: &#123;
		&#x2F;**
		 * 获取热搜列表数据
		 *&#x2F;
		async loadSearchHotList() &#123;
			const &#123; data: res &#125; &#x3D; await getSearchHotList();
			this.hotList &#x3D; res.list;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-hot-list-container &#123;
	.search-hot-title &#123;
		font-weight: bold;
		font-size: $uni-font-size-base;
		color: $uni-text-color-hot;
		padding: 0 $uni-spacing-row-lg $uni-spacing-row-lg $uni-spacing-row-lg;
		margin: 0 -12px $uni-spacing-row-lg -12px; &#x2F;* 此处给左右margin设为负值，使其将父元素的padding值抵消，达到宽度占满父元素的效果 *&#x2F;
		box-shadow: 2px 2px 5px 1px rgba(143, 143, 143, 0.1);
	&#125;
	.search-hot-item &#123;
		display: flex;
		align-items: center;
		padding: $uni-spacing-col-lg 0;
		.title &#123;
			color: $uni-text-color;
			font-size: $uni-font-size-base;
			margin: 0 $uni-spacing-row-base;
		&#125;
		.search-hot-icon &#123;
			width: 14px;
			height: 14px;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<h3 id="热搜列表-热搜点击处理"><a href="#热搜列表-热搜点击处理" class="headerlink" title="热搜列表 - 热搜点击处理"></a>热搜列表 - 热搜点击处理</h3><p><strong><code>search-hot-list.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;block v-for&#x3D;&quot;(item, index) in hotList&quot; :key&#x3D;&quot;index&quot;&gt;
			&lt;view class&#x3D;&quot;search-hot-item&quot; @click&#x3D;&quot;onItemClick(item)&quot;&gt;
				&lt;!-- 序号 --&gt;
				&lt;hot-ranking :ranking&#x3D;&quot;index + 1&quot;&gt;&lt;&#x2F;hot-ranking&gt;
				&lt;!-- 文本 --&gt;
				&lt;text class&#x3D;&quot;title line-clamp&quot;&gt;&#123;&#123; item.label &#125;&#125;&lt;&#x2F;text&gt;
				&lt;!-- 图标 --&gt;
				&lt;image
					class&#x3D;&quot;search-hot-icon&quot;
					src&#x3D;&quot;&#x2F;static&#x2F;images&#x2F;hot-icon.png&quot;
					v-if&#x3D;&quot;index &lt;&#x3D; 2&quot;
				&#x2F;&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;block&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
	methods: &#123;
		&#x2F;**
		 * item 的点击事件
		 *&#x2F;
		onItemClick(item) &#123;
			this.$emit(&quot;onSearch&quot;, item.label);
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-hot-list-box card&quot; v-if&#x3D;&quot;showType &#x3D;&#x3D;&#x3D; HOT_LIST&quot;&gt;
		&lt;search-hot-list @onSearch&#x3D;&quot;onSearchConfirm&quot;&gt;&lt;&#x2F;search-hot-list&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
	methods: &#123;
		&#x2F;**
		 * 搜索内容
		 *&#x2F;
		onSearchConfirm(val) &#123;
			&#x2F;&#x2F; 假如 val 不存在，那么使用【推荐的搜索文本】
			this.searchVal &#x3D; val ? val : this.defaultText;
			&#x2F;&#x2F; 当用户进行输入时，如果包含输入的内容
			if (this.searchVal) &#123;
				this.showType &#x3D; SEARCH_RESULT;
			&#125;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="搜索历史-渲染基本结构"><a href="#搜索历史-渲染基本结构" class="headerlink" title="搜索历史 - 渲染基本结构"></a>搜索历史 - 渲染基本结构</h3><p><strong><code>search-history.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-history-container&quot;&gt;
		&lt;!-- title --&gt;
		&lt;view class&#x3D;&quot;search-history-title-box&quot;&gt;
			&lt;view class&#x3D;&quot;search-history-title&quot;&gt;搜索历史&lt;&#x2F;view&gt;
			&lt;view v-if&#x3D;&quot;!isShowClear&quot;&gt;
				&lt;uni-icons type&#x3D;&quot;trash&quot; @click&#x3D;&quot;isShowClear &#x3D; true&quot; &#x2F;&gt;
			&lt;&#x2F;view&gt;
			&lt;view v-else&gt;
				&lt;text class&#x3D;&quot;txt&quot;&gt;全部删除&lt;&#x2F;text&gt;
				&lt;text class&#x3D;&quot;txt&quot; @click&#x3D;&quot;isShowClear &#x3D; false&quot;&gt;完成&lt;&#x2F;text&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
		&lt;!-- 内容 --&gt;
		&lt;view class&#x3D;&quot;search-history-box&quot;&gt;
			&lt;block v-for&#x3D;&quot;(item, index) in searchData&quot; :key&#x3D;&quot;index&quot;&gt;
				&lt;view class&#x3D;&quot;search-history-item&quot;&gt;
					&lt;text class&#x3D;&quot;history-txt line-clamp&quot;&gt;&#123;&#123; item &#125;&#125;&lt;&#x2F;text&gt;
					&lt;uni-icons type&#x3D;&quot;clear&quot; v-show&#x3D;&quot;isShowClear &#x3D;&#x3D;&#x3D; true&quot; &#x2F;&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;block&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;search-history&quot;,
	data() &#123;
		return &#123;
			isShowClear: true,
			&#x2F;&#x2F; mock数据
			searchData: [&quot;xxc&quot;, &quot;uniapp&quot;, &quot;vue&quot;, &quot;前端&quot;],
		&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot;&gt;
&lt;&#x2F;style&gt;</code></pre>

<p><strong><code>global.scss</code></strong></p>
<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// 单行文本 -- 避免因文本过长而溢出</span>
<span class="token selector">.line-clamp</span><span class="token punctuation">&#123;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="搜索历史-美化基本样式"><a href="#搜索历史-美化基本样式" class="headerlink" title="搜索历史 - 美化基本样式"></a>搜索历史 - 美化基本样式</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-history-container&quot;&gt;
		&lt;!-- title --&gt;
		&lt;view class&#x3D;&quot;search-history-title-box&quot;&gt;
			&lt;view class&#x3D;&quot;search-history-title&quot;&gt;搜索历史&lt;&#x2F;view&gt;
			&lt;view v-if&#x3D;&quot;!isShowClear&quot;&gt;
				&lt;uni-icons type&#x3D;&quot;trash&quot; @click&#x3D;&quot;isShowClear &#x3D; true&quot; &#x2F;&gt;
			&lt;&#x2F;view&gt;
			&lt;view v-else&gt;
				&lt;text class&#x3D;&quot;txt&quot;&gt;全部删除&lt;&#x2F;text&gt;
				&lt;text class&#x3D;&quot;txt&quot; @click&#x3D;&quot;isShowClear &#x3D; false&quot;&gt;完成&lt;&#x2F;text&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
		&lt;!-- 内容 --&gt;
		&lt;view class&#x3D;&quot;search-history-box&quot;&gt;
			&lt;block v-for&#x3D;&quot;(item, index) in searchData&quot; :key&#x3D;&quot;index&quot;&gt;
				&lt;view class&#x3D;&quot;search-history-item&quot;&gt;
					&lt;text class&#x3D;&quot;history-txt line-clamp&quot;&gt;&#123;&#123; item &#125;&#125;&lt;&#x2F;text&gt;
					&lt;uni-icons type&#x3D;&quot;clear&quot; v-show&#x3D;&quot;isShowClear &#x3D;&#x3D;&#x3D; true&quot; &#x2F;&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;block&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-history-container &#123;
	padding: $uni-spacing-row-lg $uni-spacing-col-lg;
	.search-history-title-box &#123;
		display: flex;
		justify-content: space-between;
		.search-history-title &#123;
			font-size: $uni-font-size-sm;
			color: $uni-text-color;
			padding: $uni-spacing-col-sm $uni-spacing-row-sm;
		&#125;
		.txt &#123;
			color: $uni-text-color-grey;
			font-size: $uni-font-size-sm;
			padding: $uni-spacing-col-sm $uni-spacing-row-sm;
		&#125;
	&#125;
	.search-history-box &#123;
		margin-top: $uni-spacing-row-lg;
		.search-history-item &#123;
			width: 50%;
			box-sizing: border-box;
			display: inline-block;
			padding: $uni-spacing-col-base $uni-spacing-col-base;
			position: relative;
			.history-txt &#123;
				width: 85%;
				display: inline-block;
				color: $uni-text-color;
				font-size: $uni-font-size-base;
			&#125;
		&#125;
		.search-history-item:nth-child(odd):before &#123;
			content: &quot;&quot;;
			&#x2F;&#x2F; width: 1px;
			&#x2F;&#x2F; height: 10px;
			height: 10px;
			border-right: 1px solid #999;
			&#x2F;&#x2F; background-color: #999;
			position: absolute;
			top: 50%;
			transform: translateY(-50%);
			right: 0;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<h3 id="搜索历史-保存历史数据到-searchData"><a href="#搜索历史-保存历史数据到-searchData" class="headerlink" title="搜索历史 - 保存历史数据到 searchData"></a>搜索历史 - 保存历史数据到 <code>searchData</code></h3><p><strong>search-history.vue</strong></p>
<p>当 <code>onSearchConfirm</code> 被回调时，将赋值之后的 <code>this.searchVal</code> 保存到 <code>searchData</code> 中。</p>
<p>所以我们需要对代码进行一些修改，把 <code>searchData</code> 从 <code>search-history</code> 中转移到 <code>search-blog</code> 中</p>
<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;my-search
           :isShowInput&#x3D;&quot;true&quot;
           :placeholderText&#x3D;&quot;defaultText&quot;
           v-model&#x3D;&quot;searchVal&quot;
           :config&#x3D;&quot;&#123;
                    backgroundColor: &#39;#f1f0f3&#39;,
                    &#125;&quot;
           @search&#x3D;&quot;onSearchConfirm&quot;
           @focus&#x3D;&quot;onSearchFocus&quot;
           @blur&#x3D;&quot;onSearchBlur&quot;
           @clear&#x3D;&quot;onSearchClear&quot;
           @cancel&#x3D;&quot;onSearchCancel&quot;
     &gt;&lt;&#x2F;my-search&gt;
	&lt;!-- 搜索历史 --&gt;
	&lt;view class&#x3D;&quot;search-history-box&quot; v-else-if&#x3D;&quot;showType &#x3D;&#x3D;&#x3D; SEARCH_HISTORY&quot;&gt;
    	&lt;search-history :searchData&#x3D;&quot;searchData&quot;&gt;&lt;&#x2F;search-history&gt;
    &lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
    methods: &#123;
        &#x2F;**
		 * 搜索内容
		 *&#x2F;
		onSearchConfirm(val) &#123;
			&#x2F;&#x2F; 假如 val 不存在，那么使用【推荐的搜索文本】
			this.searchVal &#x3D; val ? val : this.defaultText;
			&#x2F;&#x2F; 当用户进行输入时，如果包含输入的内容
			if (this.searchVal) &#123;
				this.showType &#x3D; SEARCH_RESULT;
				this.saveSearchData();
			&#125;
		&#125;,
    	saveSearchData() &#123;
                &#x2F;&#x2F; 搜索历史数据的基本业务逻辑：
                &#x2F;&#x2F; 1.如果当前的搜索内容已存在，则原有的搜索内容需要被展示到搜索历史的头部，而不是新增一条搜索内容
                &#x2F;&#x2F; 1.1 把已存在的搜索内容，删除
                &#x2F;&#x2F; 1.2 把新的搜索内容，添加到头部
                &#x2F;&#x2F; 2.如果当前的搜索内容不存在，则新的搜索内容会被展示在搜索历史的头部
                &#x2F;&#x2F; 2.1 把新的搜索1内容，添加到头部
                const index &#x3D; this.searchData.findIndex(
                    (item) &#x3D;&gt; item &#x3D;&#x3D;&#x3D; this.searchVal
                );
                if (index !&#x3D;&#x3D; -1) &#123;
                    &#x2F;&#x2F; 当前的 搜索数据存在
                    this.searchData.splice(index, 1);
                &#125;
                &#x2F;&#x2F; 1.2 把新的搜索内容，添加到头部
                this.searchData.unshift(this.searchVal);
            &#125;,
    &#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="搜索历史-处理-searchData-的删除操作"><a href="#搜索历史-处理-searchData-的删除操作" class="headerlink" title="搜索历史 -  处理 searchData 的删除操作"></a>搜索历史 -  处理 <code>searchData</code> 的删除操作</h3><p>删除分为两种：</p>
<ol>
<li>删除指定数据</li>
<li>删除全部数据</li>
</ol>
<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
			&lt;!-- 搜索历史 --&gt;
			&lt;view class&#x3D;&quot;search-history-box&quot; v-else-if&#x3D;&quot;showType &#x3D;&#x3D;&#x3D; SEARCH_HISTORY&quot;&gt;
				&lt;search-history
					:searchData&#x3D;&quot;searchData&quot;
					@removeAllSearchData&#x3D;&quot;onRemoveAllSearchData&quot;
					@removeSearchData&#x3D;&quot;onRemoveSearchData&quot;
					@onSearch&#x3D;&quot;onSearchConfirm&quot;
				&gt;&lt;&#x2F;search-history&gt;
			&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
	methods: &#123;
		&#x2F;**
		 * 删除搜索历史数据
		 *&#x2F;
		onRemoveAllSearchData() &#123;
			this.searchData &#x3D; [];
		&#125;,
		onRemoveSearchData(index) &#123;
			console.log(index);
			this.searchData.splice(index, 1);
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<p><strong><code>search-history.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-history-container&quot;&gt;
		&lt;!-- title --&gt;
		&lt;view class&#x3D;&quot;search-history-title-box&quot;&gt;
			&lt;view class&#x3D;&quot;search-history-title&quot;&gt;搜索历史&lt;&#x2F;view&gt;
			&lt;view v-if&#x3D;&quot;!isShowClear&quot;&gt;
				&lt;uni-icons type&#x3D;&quot;trash&quot; @click&#x3D;&quot;isShowClear &#x3D; true&quot; &#x2F;&gt;
			&lt;&#x2F;view&gt;
			&lt;view v-else&gt;
				&lt;text class&#x3D;&quot;txt&quot; @click&#x3D;&quot;onClearAll&quot;&gt;全部删除&lt;&#x2F;text&gt;
				&lt;text class&#x3D;&quot;txt&quot; @click&#x3D;&quot;isShowClear &#x3D; false&quot;&gt;完成&lt;&#x2F;text&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
		&lt;!-- 内容 --&gt;
		&lt;view class&#x3D;&quot;search-history-box&quot;&gt;
			&lt;block v-for&#x3D;&quot;(item, index) in searchData&quot; :key&#x3D;&quot;index&quot;&gt;
				&lt;view
					class&#x3D;&quot;search-history-item&quot;
					@click&#x3D;&quot;onHistoryItemClick(item, index)&quot;
				&gt;
					&lt;text class&#x3D;&quot;history-txt line-clamp&quot;&gt;&#123;&#123; item &#125;&#125;&lt;&#x2F;text&gt;
					&lt;uni-icons type&#x3D;&quot;clear&quot; v-show&#x3D;&quot;isShowClear &#x3D;&#x3D;&#x3D; true&quot; &#x2F;&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;block&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
	methods: &#123;
		&#x2F;**
		 * 全部删除
		 *&#x2F;
		onClearAll() &#123;
			uni.showModal(&#123;
				title: &quot;提示&quot;,
				content: &quot;删除搜索历史数据?&quot;,
				showCancel: true,
				&#x2F;&#x2F; 成功的回调
				success: (&#123; confirm, cancel &#125;) &#x3D;&gt; &#123;
					&#x2F;&#x2F; 用户点击了确定
					if (confirm) &#123;
						&#x2F;&#x2F; 删除 searchData
						this.$emit(&quot;removeAllSearchData&quot;);
						&#x2F;&#x2F; 返回状态
						this.isShowClear &#x3D; false;
					&#125;
				&#125;,
			&#125;);
		&#125;,
		&#x2F;**
		 * item 的点击事件
		 *&#x2F;
		onHistoryItemClick(item, index) &#123;
			&#x2F;&#x2F; 1.当前处于删除状态下，点击删除 item
			if (this.isShowClear) &#123;
				&#x2F;&#x2F; 传递删除事件，index 表示删除数据的下标
				this.$emit(&quot;removeSearchData&quot;, index);
			&#125; else &#123;
				&#x2F;&#x2F; 2. 当前不处于 删除状态下，进行搜索处理
				this.$emit(&quot;onSearch&quot;, item);
			&#125;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="状态管理-全局状态管理工具"><a href="#状态管理-全局状态管理工具" class="headerlink" title="状态管理 - 全局状态管理工具"></a>状态管理 - 全局状态管理工具</h3><p>在上一节中，我们遇到了一个问题：**<code>search-blog</code> 和 <code>search-history</code>、<code>searchData</code> 和 组件** 之间 <strong>强耦合</strong> 。</p>
<p>如果想要解决这个问题，那么我们需要使用到一个叫做：<strong>全局状态管理工具</strong> 的东西。</p>
<p><strong>“单向数据流” 理念示意图</strong></p>
<p><img src="/blogs/f4ee7e8d/31.jpg" loading="lazy"></p>
<ul>
<li><strong>state</strong>，驱动应用的数据源；</li>
<li><strong>view</strong>，以声明方式将 <strong>state</strong> 映射到视图；</li>
<li><strong>actions</strong>，响应在 <strong>view</strong> 上的用户输入导致的状态变化。</li>
</ul>
<p>但是，当我们的应用遇到<strong>多个组件共享状态（数据）</strong>时，单向数据流的简洁性很容易被破坏（回忆 <code>search-blog</code> 和 <code>search-history</code> 的代码）：</p>
<ul>
<li>多个视图依赖于同一状态（数据）。</li>
<li>来自不同视图的行为需要变更同一状态（数据）。</li>
</ul>
<p>所以我们不得不通过 <strong>父子组件传递数据</strong> 的方式，来频繁的修改状态（数据）。但是这种方式是 <strong>非常脆弱，通常会导致无法维护的代码。</strong></p>
<hr>
<p><strong>什么是全局状态管理模式</strong></p>
<p>所以我们就需要就想到了一种方案，我们把：</p>
<p> <strong>把多个组件之间共用的数据抽离出来，通过一个 单例模式 进行管理</strong>，而这种管理的方式就叫做【全局状态管理模式】。</p>
<p>具备 【全局状态管理模式】 的库，就是 【全局状态管理工具】</p>
<p>而在 <code>vue</code> 中存在一个专门的 【全局状态管理工具】，叫做 <code>vuex</code>。</p>
<p>因为 <code>uniapp</code> 追随 <code>vue</code> 和 <code>微信小程序</code> 的语法，所以我们可以在 <code>uniapp</code> 中使用 <code>vuex</code> 来进行 【全局状态管理】，并且这是一个 <strong>非常被推荐</strong> 的选择。</p>
<h3 id="状态管理-在项目中导入-vuex"><a href="#状态管理-在项目中导入-vuex" class="headerlink" title="状态管理 - 在项目中导入 vuex"></a>状态管理 - 在项目中导入 vuex</h3><p>**创建 <code>store</code> **</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 1. 导入 Vue 和 Vuex</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token comment">// uniapp 已默认安装，不需要重新下载</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 安装 Vuex 插件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 创建 store 实例</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre>

<p><strong>在 main.js 中注册 vuex 插件</strong></p>
<pre class="language-js" data-language="js"><code class="language-js">
<span class="token comment">// 导入 vuex 实例</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  <span class="token operator">...</span>App<span class="token punctuation">,</span>
  store <span class="token comment">// 挂载实例对象</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>

<h3 id="状态管理-测试-vuex-是否导入成功"><a href="#状态管理-测试-vuex-是否导入成功" class="headerlink" title="状态管理 - 测试 vuex 是否导入成功"></a>状态管理 - 测试 vuex 是否导入成功</h3><p>**创建 <code>store/modules/search.js</code> **</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">// 独立命名空间</span>
  namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// 通过 state 声明数据</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      msg<span class="token operator">:</span> <span class="token string">'hello vuex'</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</code></pre>

<p><strong>在 <code>index.js</code>  中注入模块</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token operator">...</span>
<span class="token comment">// 导入 search.js 暴露的对象</span>
<span class="token keyword">import</span> search <span class="token keyword">from</span> <span class="token string">'./modules/search'</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 安装 Vuex 插件</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 创建 store 实例</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  modules<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    search
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre>

<p><strong>search-history 中使用 模块中的数据</strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;view class&#x3D;&quot;search-history-container&quot;&gt;
    &lt;!-- 3. 使用导入的 vuex 模块中的数据 --&gt;
    &lt;div&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;div&gt;
    ...
  &lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
&#x2F;&#x2F; 1. 导入 mapState 函数
import &#123; mapState &#125; from &#39;vuex&#39;;
...
export default &#123;
 ...
  computed: &#123;
    &#x2F;&#x2F; 2. 在 computed 中，通过 mapState 函数，注册 state 中的数据，导入之后的数据可直接使用（就像使用 data 中的数据一样）
    &#x2F;&#x2F; mapState(模块名, [&#39;字段名&#39;,&#39;字段名&#39;,&#39;字段名&#39;])
    ...mapState(&#39;search&#39;, [&#39;msg&#39;])
  &#125;
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="状态管理-构建-search-模块"><a href="#状态管理-构建-search-模块" class="headerlink" title="状态管理 - 构建 search 模块"></a>状态管理 - 构建 search 模块</h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 独立命名空间</span>
    namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 通过 state 声明数据</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 搜索历史的数据</span>
            searchData<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// 更改 state 中数据的唯一方式是：提交一个 mutations</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">/**
         * 添加数据
         * state: mutation 中必然存在的参数，表示当前模块的 state
         */</span>
        <span class="token function">addSearchData</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> index <span class="token operator">=</span> state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> item <span class="token operator">===</span> val
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 删除指定数据
         */</span>
        <span class="token function">removeSearchData</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">/**
         * 删除搜索数据
         */</span>
        <span class="token function">removeAllSearchData</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>searchData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="状态管理-使用-search-模块完成搜索历史管理"><a href="#状态管理-使用-search-模块完成搜索历史管理" class="headerlink" title="状态管理 - 使用 search 模块完成搜索历史管理"></a>状态管理 - 使用 search 模块完成搜索历史管理</h3><p><strong><code>search-history.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-history-container&quot;&gt;
		&lt;!-- 内容 --&gt;
		&lt;view class&#x3D;&quot;search-history-box&quot;&gt;
			&lt;block v-for&#x3D;&quot;(item, index) in searchData&quot; :key&#x3D;&quot;index&quot;&gt;
				&lt;view
					class&#x3D;&quot;search-history-item&quot;
					@click&#x3D;&quot;onHistoryItemClick(item, index)&quot;
				&gt;
					&lt;text class&#x3D;&quot;history-txt line-clamp&quot;&gt;&#123;&#123; item &#125;&#125;&lt;&#x2F;text&gt;
					&lt;uni-icons type&#x3D;&quot;clear&quot; v-show&#x3D;&quot;isShowClear &#x3D;&#x3D;&#x3D; true&quot; &#x2F;&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;block&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
&#x2F;&#x2F; 1. 导入 mapState 函数
&#x2F;&#x2F; 2. 导入 mapMutations 函数，处理 mutation 的问题
import &#123; mapState, mapMutations &#125; from &quot;vuex&quot;;
export default &#123;
    ...
	methods: &#123;
		&#x2F;&#x2F; 利用mapMutations 函数，可以直接把 vuex 中的 mutation 合并到当前组件的 methods 中，合并进来之后，使用 mutation 就像使用 methods 中的方法一样。
		...mapMutations(&quot;search&quot;, [&quot;removeSearchData&quot;, &quot;removeAllSearchData&quot;]),
		&#x2F;**
		 * 全部删除
		 *&#x2F;
		onClearAll() &#123;
			uni.showModal(&#123;
				title: &quot;提示&quot;,
				content: &quot;删除搜索历史数据?&quot;,
				showCancel: true,
				&#x2F;&#x2F; 成功的回调
				success: (&#123; confirm, cancel &#125;) &#x3D;&gt; &#123;
					&#x2F;&#x2F; 用户点击了确定
					if (confirm) &#123;
						&#x2F;&#x2F; 删除 searchData
						this.removeAllSearchData();
						&#x2F;&#x2F; 返回状态
						this.isShowClear &#x3D; false;
					&#125;
				&#125;,
			&#125;);
		&#125;,
		&#x2F;**
		 * item 的点击事件
		 *&#x2F;
		onHistoryItemClick(item, index) &#123;
			&#x2F;&#x2F; 1.当前处于删除状态下，点击删除 item
			if (this.isShowClear) &#123;
				&#x2F;&#x2F; 传递删除事件，index 表示删除数据的下标
				this.removeSearchData(index);
			&#125; else &#123;
				&#x2F;&#x2F; 2. 当前不处于 删除状态下，进行搜索处理
				this.$emit(&quot;onSearch&quot;, item);
			&#125;
		&#125;,
	&#125;,
	computed: &#123;
		&#x2F;&#x2F; 2. 在computed中，通过 mapState 函数，注册 state 中的数据，导入之后的数据可以直接使用（就像使用 data 中的数据一样）
		&#x2F;&#x2F; mapState(模块名称，[&#39;字段名&#39;])
		...mapState(&quot;search&quot;, [&quot;searchData&quot;]),
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;search-blog-container&quot;&gt;
		&lt;!-- search 模块 --&gt;
		&lt;view class&#x3D;&quot;search-bar-box&quot;&gt;
            ...
			&lt;!-- 搜索历史 --&gt;
			&lt;view class&#x3D;&quot;search-history-box&quot; v-else-if&#x3D;&quot;showType &#x3D;&#x3D;&#x3D; SEARCH_HISTORY&quot;&gt;
				&lt;search-history @onSearch&#x3D;&quot;onSearchConfirm&quot;&gt;&lt;&#x2F;search-history&gt;
			&lt;&#x2F;view&gt;
            ...
		&lt;&#x2F;view&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
import &#123; mapMutations &#125; from &quot;vuex&quot;;
export default &#123;
    ...
	methods: &#123;
		...mapMutations(&quot;search&quot;, [&quot;addSearchData&quot;]),
		&#125;,
		&#x2F;**
		 * 搜索内容
		 *&#x2F;
		onSearchConfirm(val) &#123;
			&#x2F;&#x2F; 假如 val 不存在，那么使用【推荐的搜索文本】
			this.searchVal &#x3D; val ? val : this.defaultText;
			&#x2F;&#x2F; 当用户进行输入时，如果包含输入的内容
			if (this.searchVal) &#123;
				this.showType &#x3D; SEARCH_RESULT;
				this.addSearchData(this.searchVal);
			&#125;
		&#125;,
	&#125;,
    ...
&#125;;</code></pre>

<h3 id="状态管理-数据持久化"><a href="#状态管理-数据持久化" class="headerlink" title="状态管理 - 数据持久化"></a>状态管理 - 数据持久化</h3><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">STORAGE_KEY</span> <span class="token operator">=</span> <span class="token string">"search-list"</span>
<span class="token comment">// 数据持久化</span>
<span class="token comment">// 1. 数据的保存</span>
<span class="token comment">// 2. 数据的读取</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 独立命名空间</span>
    namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 通过 state 声明数据</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 搜索历史的数据</span>
            searchData<span class="token operator">:</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token constant">STORAGE_KEY</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// 更改 state 中数据的唯一方式是：提交一个 mutations</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">/**
         * 保存数据到 storage
         */</span>
        <span class="token function">saveToStorage</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 把数据保存到本地存储</span>
            uni<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                key<span class="token operator">:</span> <span class="token constant">STORAGE_KEY</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> state<span class="token punctuation">.</span>searchData
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 添加数据
         * state: mutation 中必然存在的参数，表示当前模块的 state
         */</span>
        <span class="token function">addSearchData</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> index <span class="token operator">=</span> state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> item <span class="token operator">===</span> val
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 在 vuex 的模块中，通过 this.commit 函数调用 mutation</span>
            <span class="token comment">// this.commit 函数接收一个字符串为当前 mutation 的路径 this.commit('模块名/mutation名')</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'search/saveToStorage'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 删除指定数据
         */</span>
        <span class="token function">removeSearchData</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'search/saveToStorage'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 删除搜索数据
         */</span>
        <span class="token function">removeAllSearchData</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>searchData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'search/saveToStorage'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h3 id="搜索结果-获取搜索结果数据"><a href="#搜索结果-获取搜索结果数据" class="headerlink" title="搜索结果 - 获取搜索结果数据"></a>搜索结果 - 获取搜索结果数据</h3><p><strong><code>api/search.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 搜索结果
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getSearchResult</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/search'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>search-result-list.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view&gt; 搜索结果 &lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
import &#123; getSearchResult &#125; from &quot;api&#x2F;search&quot;;
export default &#123;
	name: &quot;search-result-list&quot;,
	props: &#123;
		queryStr: &#123;
			type: String,
			required: true,
		&#125;,
	&#125;,
	data() &#123;
		return &#123;
			&#x2F;&#x2F; 页数
			page: 1,
			resultList: [],
		&#125;;
	&#125;,
	created() &#123;
		this.loadSearchResult();
	&#125;,
	methods: &#123;
		&#x2F;**
		 * 获取搜索数据
		 *&#x2F;
		async loadSearchResult() &#123;
			const &#123; data: res &#125; &#x3D; await getSearchResult(&#123;
				q: this.queryStr,
				p: this.page,
			&#125;);
			this.resultList &#x3D; res.list;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot;&gt;
&lt;&#x2F;style&gt;</code></pre>

<p><strong><code>search-blog.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;!-- 搜索结果 --&gt;
&lt;view class&#x3D;&quot;search-result-list&quot; v-else&gt;
    &lt;search-result-list :queryStr&#x3D;&quot;searchVal&quot;&gt;&lt;&#x2F;search-result-list&gt;
&lt;&#x2F;view&gt;</code></pre>

<h3 id="搜索结果-渲染搜索结果数据"><a href="#搜索结果-渲染搜索结果数据" class="headerlink" title="搜索结果 - 渲染搜索结果数据"></a>搜索结果 - 渲染搜索结果数据</h3><p>创建三个组件，应该应对三种展示情况：</p>
<ol>
<li><code>search-result-item-theme-1</code>：无图片样式</li>
<li><code>search-result-item-theme-2</code>：一张图片样式</li>
<li><code>search-result-item-theme-3</code>：三张图片样式</li>
</ol>
<p><code>search-result-item-theme-1.vue</code></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-result-item-box&quot;&gt;
		&lt;!-- 标题 --&gt;
		&lt;rich-text :nodes&#x3D;&quot;data.title&quot; class&#x3D;&quot;item-title line-clamp-2&quot;&gt;&lt;&#x2F;rich-text&gt;
		&lt;!-- 内容 --&gt;
		&lt;rich-text
			:nodes&#x3D;&quot;data.description&quot;
			class&#x3D;&quot;item-desc line-clamp-2&quot;
		&gt;&lt;&#x2F;rich-text&gt;
		&lt;!-- 底部 --&gt;
		&lt;view class&#x3D;&quot;item-desc-bottom&quot;&gt;
			&lt;!-- 作者 --&gt;
			&lt;view class&#x3D;&quot;item-author&quot;&gt;&#123;&#123; data.author &#125;&#125;&lt;&#x2F;view&gt;
			&lt;!-- 发布时间 --&gt;
			&lt;view class&#x3D;&quot;item-update-time&quot;&gt;
				&lt;uni-icons class&#x3D;&quot;read-num-icon&quot; type&#x3D;&quot;compose&quot; color&#x3D;&quot;#999&quot; &#x2F;&gt;
				&lt;text&gt;&#123;&#123; data.updateTime &#125;&#125;&lt;&#x2F;text&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;search-result-item-theme-1&quot;,
	props: &#123;
		data: &#123;
			type: Object,
			required: true,
		&#125;,
	&#125;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-result-item-box &#123;
	margin-bottom: $uni-spacing-col-big;
	&#x2F;&#x2F; 标题
	.item-title &#123;
		font-size: $uni-font-size-base;
		font-weight: bold;
		color: $uni-text-color-title;
	&#125;
	&#x2F;&#x2F; 描述文本
	.item-desc &#123;
		margin-top: $uni-spacing-col-base;
		font-size: $uni-font-size-base;
		color: $uni-color-subtitle;
	&#125;
	.item-desc-bottom &#123;
		margin-top: $uni-spacing-col-base;
		display: flex;
		color: $uni-text-color-grey;
		font-size: $uni-font-size-sm;
		.item-author &#123;
			margin-right: $uni-spacing-row-lg;
		&#125;
		.item-update-time &#123;
			.item-update-time-icon &#123;
				color: $uni-text-color-grey;
				margin-right: $uni-spacing-row-sm;
			&#125;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<p><code>search-result-item-theme-2.vue</code></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-result-item-box&quot;&gt;
		&lt;!-- 标题 --&gt;
		&lt;rich-text :nodes&#x3D;&quot;data.title&quot; class&#x3D;&quot;item-title line-clamp-2&quot;&gt;&lt;&#x2F;rich-text&gt;
		&lt;view class&#x3D;&quot;item-info-box&quot;&gt;
			&lt;view class&#x3D;&quot;item-desc-box&quot;&gt;
				&lt;rich-text
					:nodes&#x3D;&quot;data.description&quot;
					class&#x3D;&quot;item-desc line-clamp-2&quot;
				&gt;&lt;&#x2F;rich-text&gt;
				&lt;view class&#x3D;&quot;item-desc-bottom&quot;&gt;
					&lt;view class&#x3D;&quot;item-author&quot;&gt;&#123;&#123; data.nickname &#125;&#125;&lt;&#x2F;view&gt;
					&lt;view class&#x3D;&quot;item-read-num&quot;&gt;
						&lt;uni-icons class&#x3D;&quot;read-num-icon&quot; color&#x3D;&quot;#999999&quot; type&#x3D;&quot;compose&quot; &#x2F;&gt;
						&lt;text&gt;&#123;&#123; data.updateTime &#125;&#125;&lt;&#x2F;text&gt;
					&lt;&#x2F;view&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;view&gt;
			&lt;image class&#x3D;&quot;item-img&quot; :src&#x3D;&quot;data.pic_list[0]&quot; &#x2F;&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	props: &#123;
		data: &#123;
			type: Object,
			required: true,
		&#125;,
	&#125;,
	data: () &#x3D;&gt; (&#123;&#125;),
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-result-item-box &#123;
	margin-bottom: $uni-spacing-col-big;
	&#x2F;&#x2F; 标题
	.item-title &#123;
		font-size: $uni-font-size-base;
		font-weight: bold;
		color: $uni-text-color-title;
	&#125;

	.item-info-box &#123;
		display: flex;
		margin-top: $uni-spacing-col-base;
		.item-desc-box &#123;
			width: 65%;
			font-size: $uni-font-size-base;
			color: $uni-color-subtitle;
			&#x2F;&#x2F; 底部作者 + 阅读量
			.item-desc-bottom &#123;
				margin-top: $uni-spacing-col-base;
				display: flex;
				color: $uni-text-color-grey;
				font-size: $uni-font-size-sm;
				.item-author &#123;
					margin-right: $uni-spacing-row-lg;
				&#125;
				.item-read-num &#123;
					.read-num-icon &#123;
						color: $uni-text-color-grey;
						margin-right: $uni-spacing-row-sm;
					&#125;
				&#125;
			&#125;
		&#125;

		.item-img &#123;
			width: 33%;
			height: 70px;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<p><code>search-result-item-theme-3.vue</code></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-result-item-box&quot;&gt;
		&lt;!-- 标题 --&gt;
		&lt;rich-text :nodes&#x3D;&quot;data.title&quot; class&#x3D;&quot;item-title line-clamp-2&quot;&gt;&lt;&#x2F;rich-text&gt;
		&lt;!-- 内容区 - 样式 3 --&gt;
		&lt;view class&#x3D;&quot;item-info-img-box&quot;&gt;
			&lt;image
				v-for&#x3D;&quot;item in data.pic_list&quot;
				:key&#x3D;&quot;item&quot;
				class&#x3D;&quot;item-img&quot;
				:src&#x3D;&quot;item&quot;
			&#x2F;&gt;
		&lt;&#x2F;view&gt;
		&lt;!-- 底部 --&gt;
		&lt;view class&#x3D;&quot;item-desc-bottom&quot;&gt;
			&lt;view class&#x3D;&quot;item-author&quot;&gt;&#123;&#123; data.nickname &#125;&#125;&lt;&#x2F;view&gt;
			&lt;view class&#x3D;&quot;item-read-num&quot;&gt;
				&lt;uni-icons class&#x3D;&quot;read-num-icon&quot; color&#x3D;&quot;#999999&quot; type&#x3D;&quot;compose&quot; &#x2F;&gt;
				&lt;text&gt;&#123;&#123; data.updateTime &#125;&#125;&lt;&#x2F;text&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	props: &#123;
		data: &#123;
			type: Object,
			required: true,
		&#125;,
	&#125;,
	data: () &#x3D;&gt; (&#123;&#125;),
	created() &#123;
		if (this.data.pic_list.length &gt; 3) &#123;
			this.data.pic_list &#x3D; this.data.pic_list.splice(0, 2);
		&#125;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-result-item-box &#123;
	margin-bottom: $uni-spacing-col-big;
	&#x2F;&#x2F; 标题
	.item-title &#123;
		font-size: $uni-font-size-base;
		font-weight: bold;
		color: $uni-text-color-title;
	&#125;

	.item-info-img-box &#123;
		display: flex;
		&#x2F;&#x2F; 图片
		.item-img &#123;
			width: 33%;
			height: 70px;
			box-sizing: border-box;
		&#125;
		.item-img:nth-child(1n + 1) &#123;
			margin-right: $uni-spacing-row-sm;
		&#125;
	&#125;

	&#x2F;&#x2F; 底部作者 + 阅读量
	.item-desc-bottom &#123;
		margin-top: $uni-spacing-col-base;
		display: flex;
		color: $uni-text-color-grey;
		font-size: $uni-font-size-sm;
		.item-author &#123;
			margin-right: $uni-spacing-row-lg;
		&#125;
		.item-read-num &#123;
			.read-num-icon &#123;
				color: $uni-text-color-grey;
				margin-right: $uni-spacing-row-sm;
			&#125;
		&#125;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<p><strong><code>search-result=list.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-result-list-container&quot;&gt;
		&lt;!-- 循环渲染 --&gt;
		&lt;block v-for&#x3D;&quot;(item, index) in resultList&quot; :key&#x3D;&quot;index&quot;&gt;
			&lt;view class&#x3D;&quot;search-result-item-box&quot;&gt;
				&lt;search-result-item-theme-1
					v-if&#x3D;&quot;!item.pic_list || item.pic_list.length &#x3D;&#x3D;&#x3D; 0&quot;
					:data&#x3D;&quot;item&quot;
				&#x2F;&gt;
				&lt;search-result-item-theme-2
					v-else-if&#x3D;&quot;item.pic_list.length &#x3D;&#x3D;&#x3D; 1&quot;
					:data&#x3D;&quot;item&quot;
				&#x2F;&gt;
				&lt;search-result-item-theme-3 v-else :data&#x3D;&quot;item&quot; &#x2F;&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;block&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;
.search-result-list-container &#123;
	padding: $uni-spacing-col-lg $uni-spacing-row-lg;
	.search-result-item-box &#123;
		margin-bottom: 15px;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<h3 id="搜索结果-处理相对时间"><a href="#搜索结果-处理相对时间" class="headerlink" title="搜索结果 - 处理相对时间"></a>搜索结果 - 处理相对时间</h3><p>相对时间可以借助 <a target="_blank" rel="noopener" href="https://day.js.org/zh-CN/">dayjs</a> 进行处理。想要在 <code>uniapp</code> 中使用  <a target="_blank" rel="noopener" href="https://day.js.org/zh-CN/">dayjs</a> ，那么需要导入 <code>npm</code> 工具（以下内指令需要在项目路径的终端下进行）：</p>
<ol>
<li><p>需要在电脑中安装 <code>node</code> 环境，<a target="_blank" rel="noopener" href="https://nodejs.org/en/">node 安装地址</a>，推荐下载 <code>LTS</code> 版本</p>
</li>
<li><p>通过 <code>npm init -y</code> 初始化 <code>npm</code> 包管理工具</p>
</li>
<li><p>通过 <code>npm install dayjs@1.10.4 --save-dev</code> 安装，安装完成，项目中会多出 <code>node_modules</code> 文件夹</p>
</li>
<li><p>打开 <code>filters/index.js</code>，添加如下代码(之前已经将该文件定义的所有filters注册到了vue中)：</p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">// 1. 导入 dayjs</span>
<span class="token keyword">import</span> dayjs <span class="token keyword">from</span> <span class="token string">'dayjs'</span>
<span class="token comment">// 2. dayjs 默认语言是英文，我们需要把语言配置成中文，导入 中文语言包</span>
<span class="token keyword">import</span> <span class="token string">'dayjs/locale/zh-cn'</span>
<span class="token comment">// 3. 导入 relativeTime 模块</span>
<span class="token keyword">import</span> rTime <span class="token keyword">from</span> <span class="token string">'dayjs/plugin/relativeTime'</span>

<span class="token comment">// 4. 加载中文语言包到 dayjs 中</span>
dayjs<span class="token punctuation">.</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token string">'zh-cn'</span><span class="token punctuation">)</span>
<span class="token comment">// 5. 加载相对时间模块</span>
dayjs<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>rTime<span class="token punctuation">)</span>

<span class="token comment">// 6. 定义过滤器，把当前时间处理为相应时间</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">relativeTime</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 返回 dayjs 处理之后的相对时间</span>
    <span class="token comment">// to() 表示相对时间</span>
    <span class="token comment">// to() 接受一个参数，这个参数为 当前时间</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">dayjs(val):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token function">dayjs</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">dayjs().to(dayjs(val)):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span><span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token function">dayjs</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token function">dayjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token function">dayjs</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre></li>
<li><p>分别在 <code>search-result-item-theme-1</code>、<code>search-result-item-theme-2</code>、search-result-item-theme-3 中使用过滤器 </p>
</li>
</ol>
  <pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">></span></span>&#123;&#123; data.updateTime | relativeTime &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span></code></pre>
<h3 id="搜索结果-高亮搜索结果关键字"><a href="#搜索结果-高亮搜索结果关键字" class="headerlink" title="搜索结果 - 高亮搜索结果关键字"></a>搜索结果 - 高亮搜索结果关键字</h3><p>在 <code>title</code> 字段下，搜索关键字都通过 <code>em</code> 标签进行了标记，所以所谓的 <strong>搜索关键字高亮</strong> 就是 <strong>对 <code>em</code> 标签添加高亮样式</strong></p>
<p><strong><code>search-result-list.vue</code></strong></p>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
import &#123; getSearchResult &#125; from &quot;api&#x2F;search&quot;;
export default &#123;
    ...
methods: &#123;
		&#x2F;**
		 * 获取搜索数据
		 *&#x2F;
		async loadSearchResult() &#123;
			const &#123; data: res &#125; &#x3D; await getSearchResult(&#123;
				q: this.queryStr,
				p: this.page,
			&#125;);

			res.list.forEach((item) &#x3D;&gt; &#123;
				item.title &#x3D; item.title.replace(
					&#x2F;&lt;em&gt;&#x2F;g,
					&quot;&lt;em style&#x3D;&#39;color:#f94d2a;margin:0 2px&#39;&gt;&quot;
				);
				item.description &#x3D; item.description.replace(
					&#x2F;&lt;em&gt;&#x2F;g,
					&quot;&lt;em style&#x3D;&#39;color:#f94d2a;margin:0 2px&#39;&gt;&quot;
				);
			&#125;);

			this.resultList &#x3D; res.list;
		&#125;,
	&#125;,
&#125;;
&lt;&#x2F;script&gt;</code></pre>



<div class="danger">

<blockquote>
<p>注意：richtext 通过nodes属性解析 em 标签时，并不会将 em标签变为真正的 em 标签渲染到 dom 树中。所以无法使用标签名选择器指定 em 标签的样式。</p>
</blockquote>
</div>

<h3 id="搜索结果-介绍并使用-mescroll-uni-组件"><a href="#搜索结果-介绍并使用-mescroll-uni-组件" class="headerlink" title="搜索结果 - 介绍并使用 mescroll-uni 组件"></a>搜索结果 - 介绍并使用 mescroll-uni 组件</h3><p><a target="_blank" rel="noopener" href="http://www.mescroll.com/uni.html">mescroll-uni </a> 是一个专门为 <code>uni app</code> 准备的 <code>pullToRefresh</code> 组件。可以帮助 <code>uniapp</code> 实现 <strong>下拉刷新、上拉加载的功能</strong>。</p>
<ol>
<li><p>在 <a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=343">插件市场</a> 点击 <strong>使用 HBuilderX 导入插件</strong></p>
</li>
<li><p>导入成功，<code>uni-modules</code> 文件夹下会多出 <code>mescroll-ui</code> 文件夹</p>
</li>
<li><p><code>mescroll-uni</code> 的实现借助了 <strong>微信小程序</strong> 中的 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onPullDownRefresh">onPullDownRefresh</a> 和 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html#onReachBottom">onReachBottom</a> 这两个 <strong>页面</strong> 事件。因为 <strong>微信小程序组件中没有这两个事件</strong>，所以 <code>mescroll-uni</code> 在 <strong>页面</strong> 和 <strong>组件</strong> 中的使用方式 <strong>不同</strong></p>
</li>
<li><p>我们现在先来看 <code>mescroll-uni</code> 在 <strong>组件</strong> 中的使用</p>
</li>
<li><p><code>mescroll-uni</code> 在 <strong>组件</strong> 中使用分为两大块：</p>
<ol>
<li>组件中</li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-result-list-container&quot;&gt;
		&lt;!-- 1. 通过 mescroll-body 包裹列表，指定 ref 为 mescrollRef，监听 @init、@down、@up 事件 --&gt;
		&lt;!-- 循环渲染 --&gt;
		&lt;mescroll-body
			ref&#x3D;&quot;mescrollRef&quot;
			@init&#x3D;&quot;mescrollInit&quot;
			@down&#x3D;&quot;downCallback&quot;
			@up&#x3D;&quot;upCallback&quot;
		&gt;
			&lt;block v-for&#x3D;&quot;(item, index) in resultList&quot; :key&#x3D;&quot;index&quot;&gt;
				&lt;view class&#x3D;&quot;search-result-item-box&quot;&gt;
					&lt;search-result-item-theme-1
						v-if&#x3D;&quot;!item.pic_list || item.pic_list.length &#x3D;&#x3D;&#x3D; 0&quot;
						:data&#x3D;&quot;item&quot;
					&#x2F;&gt;
					&lt;search-result-item-theme-2
						v-else-if&#x3D;&quot;item.pic_list.length &#x3D;&#x3D;&#x3D; 1&quot;
						:data&#x3D;&quot;item&quot;
					&#x2F;&gt;
					&lt;search-result-item-theme-3 v-else :data&#x3D;&quot;item&quot; &#x2F;&gt;
				&lt;&#x2F;view&gt;
			&lt;&#x2F;block&gt;
		&lt;&#x2F;mescroll-body&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
&#x2F;&#x2F; 2. 导入对应的 mixins
import MescrollMixin from &quot;@&#x2F;uni_modules&#x2F;mescroll-uni&#x2F;components&#x2F;mescroll-uni&#x2F;mescroll-mixins.js&quot;;
export default &#123;
    ...
	name: &quot;search-result-list&quot;,
	&#x2F;&#x2F; 3. 注册 mixins
	mixins: [MescrollMixin],
	methods: &#123;
		&#x2F;**
		 * 获取搜索数据
		 *&#x2F;
		async loadSearchResult() &#123;
			const &#123; data: res &#125; &#x3D; await getSearchResult(&#123;
				q: this.queryStr,
				p: this.page,
			&#125;);

			res.list.forEach((item) &#x3D;&gt; &#123;
				item.title &#x3D; item.title.replace(
					&#x2F;&lt;em&gt;&#x2F;g,
					&quot;&lt;em style&#x3D;&#39;color:#f94d2a;margin:0 2px&#39;&gt;&quot;
				);
				item.description &#x3D; item.description.replace(
					&#x2F;&lt;em&gt;&#x2F;g,
					&quot;&lt;em style&#x3D;&#39;color:#f94d2a;margin:0 2px&#39;&gt;&quot;
				);
			&#125;);

			this.resultList &#x3D; res.list;
		&#125;,
		&#x2F;&#x2F; 4.实现三个回调的方法
		&#x2F;**
		 *	首次加载
		 *&#x2F;
		mescrollInit() &#123;
			console.log(&quot;首次加载&quot;);
		&#125;,
		&#x2F;**
		 * 下拉刷新的回调
		 *&#x2F;
		downCallback() &#123;
			console.log(&quot;下拉刷新的回调&quot;);
		&#125;,
		&#x2F;**
		 * 上拉加载的回调
		 *&#x2F;
		upCallback() &#123;
			console.log(&quot;上拉加载的回调&quot;);
		&#125;,
	&#125;,
    ...
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<ol start="2">
<li>组件所在的页面</li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;search-blog-container&quot;&gt;
		&lt;!-- search 模块 --&gt;
		&lt;view class&#x3D;&quot;search-bar-box&quot;&gt;
            ...
			&lt;!-- 搜索结果 --&gt;
			&lt;view class&#x3D;&quot;search-result-list&quot; v-else&gt;
				&lt;!-- 1. 给 mescroll-body 的组件添加专门的ref :ref&#x3D;&quot;mescrollItem&quot; (mescrollItem) 是固定的不可以变化--&gt;
				&lt;search-result-list
					ref&#x3D;&quot;mescrollItem&quot;
					:queryStr&#x3D;&quot;searchVal&quot;
				&gt;&lt;&#x2F;search-result-list&gt;
			&lt;&#x2F;view&gt;
		&lt;&#x2F;view&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
&#x2F;&#x2F; 2. 引入 mescroll-comp.js
import MescrollCompMixin from &quot;@&#x2F;uni_modules&#x2F;mescroll-uni&#x2F;components&#x2F;mescroll-uni&#x2F;mixins&#x2F;mescroll-comp.js&quot;;
export default &#123;
    ...
	&#x2F;&#x2F; 3. 注册 mixins
	mixins: [ MescrollCompMixin ],
&lt;&#x2F;script&gt;</code></pre></li>
</ol>
<h3 id="搜索结果-实现下拉刷新上拉加载功能"><a href="#搜索结果-实现下拉刷新上拉加载功能" class="headerlink" title="搜索结果 - 实现下拉刷新上拉加载功能"></a>搜索结果 - 实现下拉刷新上拉加载功能</h3><pre class="language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;
export default &#123;
	data() &#123;
              &#x2F;&#x2F; 数据源
              resultList: [],
              &#x2F;&#x2F; 页数
              page: 1,
              &#x2F;&#x2F; 实例
              mescroll: null,
              &#x2F;&#x2F; 处理渲染，会回调 down和up 方法，为了避免该问题，定义 init 变量，表示当前是否为首次请求
              isInit: true
		&#125;;
	&#125;,
    &#x2F;&#x2F; created() &#123;
  	&#x2F;&#x2F;   不需要主动调用
  	&#x2F;&#x2F;  this.loadSearchResult();
  	&#x2F;&#x2F; &#125;,
	&#x2F;&#x2F; 页面渲染完成之后回调，想要获取组件实例，需要在该回调中进行
	mounted() &#123;
		this.mescroll &#x3D; this.$refs.mescrollRef.mescroll;
	&#125;,
	methods: &#123;
        ...
		&#x2F;&#x2F; 4.实现三个回调的方法
		&#x2F;**
		 *	首次加载
		 *&#x2F;
		async mescrollInit() &#123;
			&#x2F;&#x2F; 此处使用 await 来保证数据加载完后 再 修改 isInit
			await this.loadSearchResult();
			&#x2F;&#x2F; isInit 变为 false
			this.isInit &#x3D; false;
			&#x2F;&#x2F; 首次加载完成，关闭 上拉加载更多的动画(其会自动开启)
			&#x2F;&#x2F; endSuccess 表示当前数据加载完成，动画关闭
			this.mescroll.endSuccess();
		&#125;,
		&#x2F;**
		 * 下拉刷新的回调
		 *&#x2F;
		async downCallback() &#123;
			&#x2F;&#x2F; debugger;
			if (this.isInit) return;
			this.page &#x3D; 1;
			await this.loadSearchResult();
			this.mescroll.endSuccess();
		&#125;,
		&#x2F;**
		 * 上拉加载的回调
		 *&#x2F;
		async upCallback() &#123;
			console.log(111);
			&#x2F;&#x2F; debugger;
			if (this.isInit) return;
			this.page +&#x3D; 1;
			await this.loadSearchResult();
			this.mescroll.endSuccess();
		&#125;,
	&#125;,
&#125;;</code></pre>

<h3 id="搜索结果-处理空数据场景"><a href="#搜索结果-处理空数据场景" class="headerlink" title="搜索结果 - 处理空数据场景"></a>搜索结果 - 处理空数据场景</h3><ol>
<li><strong>创建空数据组件</strong><code>empty-data</code></li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;empty-data-container&quot;&gt;
		&lt;image src&#x3D;&quot;&#x2F;static&#x2F;images&#x2F;empty-data.png&quot; class&#x3D;&quot;img&quot; &#x2F;&gt;
		&lt;view class&#x3D;&quot;txt&quot;&gt;暂无数据&lt;&#x2F;view&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;

&lt;script&gt;
export default &#123;
	name: &quot;empty-data&quot;,
	data() &#123;
		return &#123;&#125;;
	&#125;,
&#125;;
&lt;&#x2F;script&gt;

&lt;style lang&#x3D;&quot;scss&quot;&gt;
.empty-data-container &#123;
	display: flex;
	flex-direction: column;
	align-items: center;
	padding-top: 35%;

	.img &#123;
		width: 64px;
		height: 64px;
	&#125;
	.txt &#123;
		margin-top: $uni-spacing-col-sm;
		color: $uni-text-color-grey;
		font-size: $uni-font-size-base;
	&#125;
&#125;
&lt;&#x2F;style&gt;</code></pre>

<ol start="2">
<li>在搜索结果为空时，进行渲染</li>
</ol>
<pre class="language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;view class&#x3D;&quot;search-result-list-container&quot;&gt;
		&lt;empty-data v-if&#x3D;&quot;isEmpty&quot;&gt;&lt;&#x2F;empty-data&gt;
		&lt;mescroll-body
			v-else
			ref&#x3D;&quot;mescrollRef&quot;
			@init&#x3D;&quot;mescrollInit&quot;
			@down&#x3D;&quot;downCallback&quot;
			@up&#x3D;&quot;upCallback&quot;
		&gt;
            ...
		&lt;&#x2F;mescroll-body&gt;
	&lt;&#x2F;view&gt;
&lt;&#x2F;template&gt;
&lt;script&gt;
export default &#123;
	data() &#123;
		return &#123;
            ...
			isEmpty: false,
		&#125;;
	&#125;,
	methods: &#123;
        ...
		async loadSearchResult() &#123;
        	...
			if (this.resultList.length &#x3D;&#x3D;&#x3D; 0) &#123;
				this.isEmpty &#x3D; true;
			&#125;
		&#125;,
	&#125;,
        ...
&#125;;
&lt;&#x2F;script&gt;</code></pre>

<h3 id="文章搜索-数据量限制"><a href="#文章搜索-数据量限制" class="headerlink" title="文章搜索 - 数据量限制"></a>文章搜索 - 数据量限制</h3><p><strong><code>store/modules/search.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 最大的缓存数量</span>
<span class="token keyword">const</span> <span class="token constant">HISTORY_MAX</span> <span class="token operator">=</span> <span class="token number">8</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        <span class="token function">addSearchData</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> index <span class="token operator">=</span> state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> item <span class="token operator">===</span> val
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>

            state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 处理缓存数量，如果 searchData 中的数据量超过了 HISTORY_MAX , 那么就把最后面的数据进行删除</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token constant">HISTORY_MAX</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token constant">HISTORY_MAX</span><span class="token punctuation">,</span> state<span class="token punctuation">.</span>searchData<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token constant">HISTORY_MAX</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>

            <span class="token comment">// 在 vuex 的模块中，通过 this.commit 函数调用 mutation</span>
            <span class="token comment">// this.commit 函数接收一个字符串为当前 mutation 的路径 this.commit('模块名/mutation名')</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'search/saveToStorage'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre></div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>语轻星子</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://xxcijmz.top/blogs/f4ee7e8d/" title="imooc-blog项目开发-上(uniapp)">https://xxcijmz.top/blogs/f4ee7e8d/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/blogs/320d3645/" rel="prev" title="imooc-blog项目开发-下(uniapp)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">imooc-blog项目开发-下(uniapp)</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/blogs/41844f31/" rel="next" title="Vue.js 源码剖析-模板编译"><span class="post-nav-text">Vue.js 源码剖析-模板编译</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"MnqOxUn1tp2XfaBiRJqcPNC3-MdYXbMMI","appKey":"BUJAYYUt5IhdIDVVvHH8aHMx","placeholder":"来与我一起讨论吧","avatar":null,"pageSize":10,"visitor":false,"highlight":true,"recordIP":false,"enableQQ":true,"meta":["nick"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/blogs/f4ee7e8d/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">闽ICP备2021017107号-1</a></div><div class="copyright"><span>&copy; 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 语轻星子</span></div><div class="live_time"><span>本博客已运行：</span><span id="display_live_time"></span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2021-09-23T00:03:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#5698c3" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.9},"dialog":{"enable":true},"log":false});</script></body></html>