<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#5698c3"><meta name="author" content="语轻星子"><meta name="copyright" content="语轻星子"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>imooc-blog项目开发-下(uniapp) | 轻语馆</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#5698c3"><link rel="alternate icon" href="/yun.ico"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"xxcijmz.top","root":"/","title":"轻语馆","version":"1.6.2","mode":"time","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"/data/sentences.json"},"algolia":{"appID":"I6Q6TFSWKC","apiKey":"8299a265813c86a465cc32755761abc9","indexName":"blogs","hits":{"per_page":10}}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><link rel="stylesheet" href="/css/content.css"><meta name="description" content="文章详情 - 点击进入文章详情页面 在 subpkg&#x2F;pages 下创建 文章详情页面 blog-detail（注意会有bug，导致blog-detail被创建到 pages同级目录）  修改根目录下的 pages.json   &amp;#123;     ...     &quot;subPackages&quot;: [         &amp;#123;             &quot;root&quot;: &quot;subpkg&quot;,">
<meta property="og:type" content="article">
<meta property="og:title" content="imooc-blog项目开发-下(uniapp)">
<meta property="og:url" content="https://xxcijmz.top/blogs/320d3645/index.html">
<meta property="og:site_name" content="轻语馆">
<meta property="og:description" content="文章详情 - 点击进入文章详情页面 在 subpkg&#x2F;pages 下创建 文章详情页面 blog-detail（注意会有bug，导致blog-detail被创建到 pages同级目录）  修改根目录下的 pages.json   &amp;#123;     ...     &quot;subPackages&quot;: [         &amp;#123;             &quot;root&quot;: &quot;subpkg&quot;,">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/2.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/1.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/4.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/3.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/55.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/6.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/7.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/8.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/9.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/10.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/11.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/12.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/13.jpg">
<meta property="og:image" content="https://xxcijmz.top/blogs/320d3645/14.jpg">
<meta property="article:published_time" content="2021-10-30T13:05:05.000Z">
<meta property="article:modified_time" content="2021-11-18T10:47:18.153Z">
<meta property="article:author" content="语轻星子">
<meta property="article:tag" content="Vue">
<meta property="article:tag" content="uniapp">
<meta property="article:tag" content="小程序">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xxcijmz.top/blogs/320d3645/2.jpg"><script src="/js/ui/mode.js"></script></head><body><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="语轻星子"><img width="96" loading="lazy" src="https://cdn.jsdelivr.net/gh/xxc-yqxz/xxc-yqxz.github.io/images/avatar.jpg" alt="语轻星子"></a><div class="site-author-name"><a href="/about/">语轻星子</a></div><span class="site-name">轻语馆</span><sub class="site-subtitle">我也会加油，所以你也要加油，这是约定</sub><div class="site-desciption"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">41</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">9</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">14</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://github.com/xxc-yqxz/xxc-yqxz.github.io" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-github-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=894043590&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=1379764422" title="网易云音乐" target="_blank" style="color:#C10D0C"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-netease-cloud-music-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://space.bilibili.com/269921139" title="哔哩哔哩" target="_blank" style="color:#FF8EB3"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-bilibili-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85-%E7%82%B9%E5%87%BB%E8%BF%9B%E5%85%A5%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">文章详情 - 点击进入文章详情页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85-%E8%8E%B7%E5%8F%96%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85%E6%95%B0%E6%8D%AE"><span class="toc-number">2.</span> <span class="toc-text">文章详情 - 获取文章详情数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85-%E5%88%86%E6%9E%90%E5%B9%B6%E6%B8%B2%E6%9F%93%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84"><span class="toc-number">3.</span> <span class="toc-text">文章详情 - 分析并渲染文章详情的基本结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9-%E7%BE%8E%E5%8C%96%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9%E5%8C%BA%E5%9F%9F"><span class="toc-number">4.</span> <span class="toc-text">文章内容 - 美化文章内容区域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9-%E5%88%86%E6%9E%90%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9%E7%9A%84%E6%A0%B7%E5%BC%8F%E5%AE%9E%E7%8E%B0"><span class="toc-number">5.</span> <span class="toc-text">文章内容 - 分析文章内容的样式实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9-%E5%AE%9E%E7%8E%B0%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9%E7%9A%84%E6%A0%B7%E5%BC%8F%E6%B8%B2%E6%9F%93"><span class="toc-number">6.</span> <span class="toc-text">文章内容 - 实现文章内容的样式渲染</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9-%E8%A7%A3%E5%86%B3%E5%AD%97%E4%BD%93%E8%BF%87%E5%B0%8F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">7.</span> <span class="toc-text">文章内容 - 解决字体过小的问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8-%E8%8E%B7%E5%8F%96%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">8.</span> <span class="toc-text">评论列表 - 获取评论列表数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8-%E6%B8%B2%E6%9F%93%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8%EF%BC%88%E7%B2%BE%E7%AE%80%E8%AF%84%E8%AE%BA%EF%BC%89"><span class="toc-number">9.</span> <span class="toc-text">评论列表 - 渲染评论列表（精简评论）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8-%E7%BE%8E%E5%8C%96%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8"><span class="toc-number">10.</span> <span class="toc-text">评论列表 - 美化评论列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8-%E6%B8%B2%E6%9F%93%E5%85%A8%E9%83%A8%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8"><span class="toc-number">11.</span> <span class="toc-text">评论列表 - 渲染全部评论列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%84%E8%AE%BA%E5%88%97%E8%A1%A8-%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD%E5%AE%8C%E6%88%90%E7%9A%84%E6%8F%90%E7%A4%BA"><span class="toc-number">12.</span> <span class="toc-text">评论列表 - 处理数据加载完成的提示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%8C%BA%E5%9F%9F-%E5%B0%81%E8%A3%85%E5%8A%9F%E8%83%BD%E7%BB%84%E4%BB%B6"><span class="toc-number">13.</span> <span class="toc-text">功能区域 - 封装功能组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%8C%BA%E5%9F%9F-%E6%A0%B7%E5%BC%8F%E7%BE%8E%E5%8C%96"><span class="toc-number">14.</span> <span class="toc-text">功能区域 - 样式美化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E5%8C%BA%E5%9F%9F-%E5%A2%9E%E5%8A%A0-my-search-%E7%9A%84%E6%A0%B7%E5%BC%8F%E9%80%82%E9%85%8D"><span class="toc-number">15.</span> <span class="toc-text">功能区域 - 增加 my-search 的样式适配</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%E5%9F%BA%E6%9C%AC%E6%A0%B7%E5%BC%8F"><span class="toc-number">16.</span> <span class="toc-text">用户登录 - 登录页面基本样式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E5%B0%81%E8%A3%85%E7%99%BB%E5%BD%95%E7%BB%84%E4%BB%B6"><span class="toc-number">17.</span> <span class="toc-text">用户登录 - 封装登录组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E6%98%8E%E7%A1%AE%E7%99%BB%E5%BD%95%E7%9A%84%E6%80%9D%E8%B7%AF"><span class="toc-number">18.</span> <span class="toc-text">用户登录 - 明确登录的思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E5%B0%81%E8%A3%85-action-%E8%B0%83%E7%94%A8%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">19.</span> <span class="toc-text">用户登录 - 封装 action 调用登录接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E4%BF%9D%E5%AD%98%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81"><span class="toc-number">20.</span> <span class="toc-text">用户登录 - 保存用户登录状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E5%AE%8C%E6%88%90%E5%B7%B2%E7%99%BB%E5%BD%95%E7%9A%84%E7%94%A8%E6%88%B7%E8%A7%86%E5%9B%BE"><span class="toc-number">21.</span> <span class="toc-text">用户登录 - 完成已登录的用户视图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E5%AE%9E%E7%8E%B0%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">22.</span> <span class="toc-text">用户登录 - 实现退出登录功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E5%88%A4%E6%96%AD%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81"><span class="toc-number">23.</span> <span class="toc-text">用户登录 - 判断用户登录状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E6%96%B0%E5%BB%BA%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2%EF%BC%8C%E5%A4%84%E7%90%86%E5%BD%93%E5%89%8D%E5%9C%BA%E6%99%AF"><span class="toc-number">24.</span> <span class="toc-text">用户登录 - 新建登录页面，处理当前场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E7%9B%91%E5%90%AC%E7%99%BB%E5%BD%95%E6%88%90%E5%8A%9F%E7%9A%84%E7%8A%B6%E6%80%81%EF%BC%8C%E8%BF%94%E5%9B%9E%E4%B9%8B%E5%89%8D%E9%A1%B5%E9%9D%A2"><span class="toc-number">25.</span> <span class="toc-text">用户登录 - 监听登录成功的状态，返回之前页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-%E5%A4%84%E7%90%86%E7%99%BB%E5%BD%95%E6%97%B6%E6%97%A0-loading-%E7%9A%84-bug"><span class="toc-number">26.</span> <span class="toc-text">用户登录 - 处理登录时无 loading 的 bug</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%93%8D%E4%BD%9C-%E5%85%B3%E6%B3%A8%E7%94%A8%E6%88%B7"><span class="toc-number">27.</span> <span class="toc-text">文章操作 - 关注用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%93%8D%E4%BD%9C-%E5%A4%84%E7%90%86%E5%8F%91%E8%A1%A8%E8%AF%84%E8%AE%BA%E7%9A%84-UI"><span class="toc-number">28.</span> <span class="toc-text">文章操作 - 处理发表评论的 UI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%93%8D%E4%BD%9C-%E5%A4%84%E7%90%86%E8%AF%84%E8%AE%BA%E6%A1%86%E7%9A%84%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98"><span class="toc-number">29.</span> <span class="toc-text">文章操作 - 处理评论框的显示问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%93%8D%E4%BD%9C-%E5%8F%91%E8%A1%A8%E8%AF%84%E8%AE%BA"><span class="toc-number">30.</span> <span class="toc-text">文章操作 - 发表评论</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%93%8D%E4%BD%9C-%E5%9B%9E%E6%98%BE%E8%AF%84%E8%AE%BA%E6%95%B0%E6%8D%AE"><span class="toc-number">31.</span> <span class="toc-text">文章操作 - 回显评论数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%93%8D%E4%BD%9C-%E7%82%B9%E8%B5%9E%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">32.</span> <span class="toc-text">文章操作 - 点赞功能实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E6%93%8D%E4%BD%9C-%E6%94%B6%E8%97%8F%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">33.</span> <span class="toc-text">文章操作 - 收藏功能实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E5%88%97%E8%A1%A8-%E8%8E%B7%E5%8F%96%E7%83%AD%E6%92%AD%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">34.</span> <span class="toc-text">热播列表 - 获取热播列表数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E5%88%97%E8%A1%A8-%E6%B8%B2%E6%9F%93UI%E7%BB%93%E6%9E%84"><span class="toc-number">35.</span> <span class="toc-text">热播列表 - 渲染UI结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E5%88%97%E8%A1%A8-%E5%88%97%E8%A1%A8%E7%9A%84%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E4%B8%8E%E4%B8%8A%E6%8B%89%E5%8A%A0%E8%BD%BD"><span class="toc-number">36.</span> <span class="toc-text">热播列表 - 列表的下拉刷新与上拉加载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E5%88%97%E8%A1%A8-%E7%83%AD%E6%92%AD%E5%88%97%E8%A1%A8-%E7%82%B9%E5%87%BB%E8%BF%9B%E5%85%A5%E8%AF%A6%E6%83%85%E9%A1%B5"><span class="toc-number">37.</span> <span class="toc-text">热播列表 - 热播列表 - 点击进入详情页</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E8%AF%A6%E6%83%85-%E6%B8%B2%E6%9F%93%E8%AF%A6%E6%83%85%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%A7%86%E9%A2%91%E7%BB%84%E4%BB%B6"><span class="toc-number">38.</span> <span class="toc-text">热播详情 - 渲染详情页面的视频组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E8%AF%A6%E6%83%85-%E5%B1%95%E7%A4%BA%E8%A7%86%E9%A2%91%E5%BC%B9%E5%B9%95"><span class="toc-number">39.</span> <span class="toc-text">热播详情 - 展示视频弹幕</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E8%AF%A6%E6%83%85-%E6%B8%B2%E6%9F%93%E5%85%A8%E9%83%A8%E5%BC%B9%E5%B9%95%E6%A8%A1%E5%9D%97"><span class="toc-number">40.</span> <span class="toc-text">热播详情 - 渲染全部弹幕模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E8%AF%A6%E6%83%85-%E6%B8%B2%E6%9F%93%E5%BA%95%E9%83%A8%E5%8A%9F%E8%83%BD%E5%8C%BA"><span class="toc-number">41.</span> <span class="toc-text">热播详情 - 渲染底部功能区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E8%AF%A6%E6%83%85-%E5%8F%91%E5%B8%83%E5%BC%B9%E5%B9%95"><span class="toc-number">42.</span> <span class="toc-text">热播详情 - 发布弹幕</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E8%AF%A6%E6%83%85-%E5%AE%9A%E4%B9%89%E5%BC%B9%E5%B9%95%E7%9A%84%E9%9A%8F%E6%9C%BA%E9%A2%9C%E8%89%B2%E5%80%BC"><span class="toc-number">43.</span> <span class="toc-text">热播详情 - 定义弹幕的随机颜色值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E6%92%AD%E8%AF%A6%E6%83%85-%E5%A4%84%E7%90%86%E5%BC%B9%E5%B9%95%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB"><span class="toc-number">44.</span> <span class="toc-text">热播详情 - 处理弹幕列表数据加载动画</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#uniapp-%E4%B8%AD%E7%9A%84%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91"><span class="toc-number">45.</span> <span class="toc-text">uniapp 中的条件编译</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%80%82%E9%85%8D-tabs-%E7%BD%AE%E9%A1%B6%E6%95%88%E6%9E%9C%E6%B6%88%E5%A4%B1"><span class="toc-number">46.</span> <span class="toc-text">多平台适配 - tabs 置顶效果消失</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0"><span class="toc-number">46.1.</span> <span class="toc-text">分析原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">46.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81"><span class="toc-number">46.3.</span> <span class="toc-text">处理代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%80%82%E9%85%8D-%E7%81%AB%E7%8B%90%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%84%E7%90%86%E7%B2%97%E6%BB%9A%E5%8A%A8%E6%9D%A1"><span class="toc-number">47.</span> <span class="toc-text">多平台适配 - 火狐浏览器处理粗滚动条</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0-1"><span class="toc-number">47.1.</span> <span class="toc-text">分析原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-1"><span class="toc-number">47.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81-1"><span class="toc-number">47.3.</span> <span class="toc-text">处理代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%80%82%E9%85%8D-ui-%E9%94%99%E4%B9%B1-%E4%B8%8E-%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85%E6%97%A0%E6%B3%95%E5%B1%95%E7%A4%BA"><span class="toc-number">48.</span> <span class="toc-text">多平台适配 -  ui 错乱 与 文章详情无法展示</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0-2"><span class="toc-number">48.1.</span> <span class="toc-text">分析原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-2"><span class="toc-number">48.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81-2"><span class="toc-number">48.3.</span> <span class="toc-text">处理代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%80%82%E9%85%8D-%E6%96%87%E7%AB%A0%E8%AF%A6%E6%83%85%E6%A0%B7%E5%BC%8F%E5%A4%84%E7%90%86"><span class="toc-number">49.</span> <span class="toc-text">多平台适配 -  文章详情样式处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0-3"><span class="toc-number">49.1.</span> <span class="toc-text">分析原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-3"><span class="toc-number">49.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81-3"><span class="toc-number">49.3.</span> <span class="toc-text">处理代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%80%82%E9%85%8D-%E7%83%AD%E6%92%AD%E8%A7%86%E9%A2%91%E5%85%A8%E9%83%A8%E6%97%A0%E6%B3%95%E6%92%AD%E6%94%BE"><span class="toc-number">50.</span> <span class="toc-text">多平台适配 -  热播视频全部无法播放</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0-4"><span class="toc-number">50.1.</span> <span class="toc-text">分析原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-4"><span class="toc-number">50.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81-4"><span class="toc-number">50.3.</span> <span class="toc-text">处理代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%B9%B3%E5%8F%B0%E9%80%82%E9%85%8D-%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-number">51.</span> <span class="toc-text">多平台适配 -  一键登录功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0-5"><span class="toc-number">51.1.</span> <span class="toc-text">分析原因</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-5"><span class="toc-number">51.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%BB%A3%E7%A0%81-5"><span class="toc-number">51.3.</span> <span class="toc-text">处理代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">52.</span> <span class="toc-text">打包微信小程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8C%85H5"><span class="toc-number">53.</span> <span class="toc-text">打包H5</span></a></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/JS/" style="font-size: 26.4px; color: #8cbbd1">JS</a> <a href="/tags/React/" style="font-size: 19.2px; color: #8fb8d0">React</a> <a href="/tags/Vue/" style="font-size: 30px; color: #8abcd1">Vue</a> <a href="/tags/eggjs/" style="font-size: 19.2px; color: #8fb8d0">eggjs</a> <a href="/tags/serverless/" style="font-size: 19.2px; color: #8fb8d0">serverless</a> <a href="/tags/uniapp/" style="font-size: 22.8px; color: #8eb9d0">uniapp</a> <a href="/tags/webpack/" style="font-size: 12px; color: #93b5cf">webpack</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 15.6px; color: #91b6cf">小程序</a> <a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 15.6px; color: #91b6cf">工程化</a> <a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 12px; color: #93b5cf">日记</a> <a href="/tags/%E6%97%A5%E8%AF%AD/" style="font-size: 12px; color: #93b5cf">日语</a> <a href="/tags/%E6%A6%82%E5%BF%B5/" style="font-size: 22.8px; color: #8eb9d0">概念</a> <a href="/tags/%E9%83%A8%E7%BD%B2/" style="font-size: 12px; color: #93b5cf">部署</a> <a href="/tags/%E9%9D%A2%E8%AF%95/" style="font-size: 15.6px; color: #91b6cf">面试</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://xxcijmz.top/blogs/320d3645/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="语轻星子"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="轻语馆"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">imooc-blog项目开发-下(uniapp)</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="创建时间：2021-10-30 21:05:05" itemprop="dateCreated datePublished" datetime="2021-10-30T21:05:05+08:00">2021-10-30</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="修改时间：2021-11-18 18:47:18" itemprop="dateModified" datetime="2021-11-18T18:47:18+08:00">2021-11-18</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-file-word-line"></use></svg></span> <span title="本文字数">18.5k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-timer-line"></use></svg></span> <span title="阅读时长">92m</span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">项目开发</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Vue/" style="--text-color:#4fc08d"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Vue</span></a><a class="tag-item" href="/tags/uniapp/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">uniapp</span></a><a class="tag-item" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">小程序</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#5698c3;"><h2 id="文章详情-点击进入文章详情页面"><a href="#文章详情-点击进入文章详情页面" class="headerlink" title="文章详情 - 点击进入文章详情页面"></a>文章详情 - 点击进入文章详情页面</h2><ol>
<li><p>在 <code>subpkg/pages</code> 下创建 <strong>文章详情页面</strong> <code>blog-detail</code>（注意会有bug，导致blog-detail被创建到 pages同级目录）</p>
</li>
<li><p>修改根目录下的 pages.json</p>
</li>
</ol>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    ...
    <span class="token property">"subPackages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"root"</span><span class="token operator">:</span> <span class="token string">"subpkg"</span><span class="token punctuation">,</span>
            <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"sub-1"</span><span class="token punctuation">,</span>
            <span class="token property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                ...
                <span class="token punctuation">&#123;</span>
                    <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/blog-detail/blog-detail"</span><span class="token punctuation">,</span>
                    <span class="token property">"style"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                        <span class="token property">"navigationBarTitleText"</span><span class="token operator">:</span> <span class="token string">"文章详情"</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span></code></pre>

<ol start="3">
<li>为首页的数据添加跳转</li>
</ol>
<p><strong><code>hot-list-item.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item-container<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$emit(<span class="token punctuation">'</span>click<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>hot.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span>
			<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swiper<span class="token punctuation">"</span></span>
			<span class="token attr-name">:current</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>currentIndex<span class="token punctuation">"</span></span>
			<span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; height: currentSwiperHeight + <span class="token punctuation">'</span>px<span class="token punctuation">'</span> &#125;<span class="token punctuation">"</span></span>
			<span class="token attr-name">@animationfinish</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSwiperEnd<span class="token punctuation">"</span></span>
			<span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSwiperChange<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- swiperItem 的数量，需要由 tabData 进行决定 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper-item</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>swiper-item<span class="token punctuation">"</span></span>
				<span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(tabItem, tabIndex) in tabData<span class="token punctuation">"</span></span>
				<span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tabIndex<span class="token punctuation">"</span></span>
			<span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
					<span class="token comment">&lt;!-- 加载动画 --></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-load-more</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isLoading<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
					<span class="token comment">&lt;!-- 列表 --></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
						<span class="token comment">&lt;!-- 列表循环数据的索引值由currentIndex 改为 tabIndex --></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-list-item</span>
							<span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>hot-list-item-<span class="token punctuation">'</span> + tabIndex<span class="token punctuation">"</span></span>
							<span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in listData[tabIndex]<span class="token punctuation">"</span></span>
							<span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span>
							<span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
							<span class="token attr-name">:ranking</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index + 1<span class="token punctuation">"</span></span>
							<span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onItemClick(item)<span class="token punctuation">"</span></span>
						<span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-list-item</span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper-item</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>swiper</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>
export default &#123;
    ...
	methods: &#123;
        ...
		/**
		 * 热搜列表 item 点击事件
		 */
		onItemClick(item) &#123;
			uni.navigateTo(&#123; url: "/subpkg/pages/blog-detail/blog-detail" &#125;);
		&#125;,
	&#125;,
&#125;;</code></pre>

<div class="success">

<blockquote>
<p>此处同时也可以将hot中的@click改为@click.native。这样就不需要再在子组件中定义事件。</p>
</blockquote>
</div>

<ol start="4">
<li>为搜索结果添加跳转</li>
</ol>
<p><strong><code>search-result-list.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search-result-list-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mescroll-body</span>
			<span class="token attr-name">v-else</span>
			<span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollRef<span class="token punctuation">"</span></span>
			<span class="token attr-name">@init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollInit<span class="token punctuation">"</span></span>
			<span class="token attr-name">@down</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>downCallback<span class="token punctuation">"</span></span>
			<span class="token attr-name">@up</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upCallback<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in resultList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>search-result-item-box<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onItemClick(item)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>search-result-item-theme-1</span>
						<span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!item.pic_list || item.pic_list.length === 0<span class="token punctuation">"</span></span>
						<span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
					<span class="token punctuation">/></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>search-result-item-theme-2</span>
						<span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.pic_list.length === 1<span class="token punctuation">"</span></span>
						<span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span>
					<span class="token punctuation">/></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>search-result-item-theme-3</span> <span class="token attr-name">v-else</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mescroll-body</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span>
export default &#123;
    ...
	methods: &#123;
        ...
		/**
		 * item 点击事件
		 */
		onItemClick(item) &#123;
			uni.navigateTo(&#123; url: "/subpkg/pages/blog-detail/blog-detail" &#125;);
		&#125;,
	&#125;,
&#125;;</code></pre>

<h2 id="文章详情-获取文章详情数据"><a href="#文章详情-获取文章详情数据" class="headerlink" title="文章详情 - 获取文章详情数据"></a>文章详情 - 获取文章详情数据</h2><p>查看<strong>接口文档</strong> 我们知道，想要获取文章详情需要传递两个参数：</p>
<ol>
<li><code>author</code>：作者名</li>
<li><code>articleId</code>：文章 id</li>
</ol>
<p>这两个参数需要在 <strong>跳转到文章详情页面时进行传递</strong> ，所以我们需要修改下 <code>navigateTo</code> 的方法：</p>
<p><strong><code>search-result-list.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * item 点击事件
		 */</span>
		<span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/subpkg/pages/blog-detail/blog-detail?author=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>author<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;articleId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>hot.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 热搜列表 item 点击事件
		 */</span>
		<span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/subpkg/pages/blog-detail/blog-detail?author=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>user_name<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token string">&amp;articleId=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$&#123;</span>item<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">&#125;</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>修改完后，进行接口请求：</p>
<p><strong><code>api/article.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../utils/request'</span>

<span class="token comment">/**
 * 获取文章详情
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getArticleDetail</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/article/details'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>blog-detail.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getArticleDetail <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/article"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 作者名</span>
			author<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
			<span class="token comment">// 文章 id</span>
			articleId<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
			<span class="token comment">// 文章详情</span>
			articleData<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>author <span class="token operator">=</span> options<span class="token punctuation">.</span>author<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>articleId <span class="token operator">=</span> options<span class="token punctuation">.</span>articleId<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadArticleDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// console.log(this.author);</span>
		<span class="token comment">// console.log(this.articleId);</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 获取文章详情数据
		 */</span>
		<span class="token keyword">async</span> <span class="token function">loadArticleDetail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 展示一个加载框</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleDetail</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				author<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>author<span class="token punctuation">,</span>
				articleId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleId<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>articleData <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>utils/request.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token operator">...</span>
            <span class="token comment">// 请求结束之后的回调</span>
            <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
                uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> request</code></pre>

<h2 id="文章详情-分析并渲染文章详情的基本结构"><a href="#文章详情-分析并渲染文章详情的基本结构" class="headerlink" title="文章详情 - 分析并渲染文章详情的基本结构"></a>文章详情 - 分析并渲染文章详情的基本结构</h2><p>整个文章详情可以被分为三个部分实现：</p>
<ol>
<li>文章内容区</li>
<li>评论列表区</li>
<li>底部功能区</li>
</ol>
<p>我们先来实现  <strong>文章内容区</strong>：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 文章内容区 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 标题 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; aticleData.articleTitles &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 作者信息 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
						<span class="token comment">&lt;!-- 头像 --></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData.avatar<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
						<span class="token comment">&lt;!-- 作者 --></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; articleData.nickName &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
						<span class="token comment">&lt;!-- 发布时间 --></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>release-time<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; articleData.date &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
					<span class="token comment">&lt;!-- 关注按钮 --></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>关注<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 文章内容 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rich-text</span> <span class="token attr-name">:nodes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData.content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rich-text</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<h2 id="文章内容-美化文章内容区域"><a href="#文章内容-美化文章内容区域" class="headerlink" title="文章内容 - 美化文章内容区域"></a>文章内容 - 美化文章内容区域</h2><p><strong><code>blog-detail.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.detail-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> $uni-spacing-col-base $uni-spacing-row-base<span class="token punctuation">;</span>
	<span class="token selector">.title</span> <span class="token punctuation">&#123;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-title<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-title<span class="token punctuation">;</span>
		<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.detail-info</span> <span class="token punctuation">&#123;</span>
		<span class="token property">padding</span><span class="token punctuation">:</span> $uni-spacing-col-base 0<span class="token punctuation">;</span>
		<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
		<span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
		<span class="token selector">.detail-left</span> <span class="token punctuation">&#123;</span>
			<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
			<span class="token selector">.author-box</span> <span class="token punctuation">&#123;</span>
				<span class="token property">margin-left</span><span class="token punctuation">:</span> $uni-spacing-row-base<span class="token punctuation">;</span>
				<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
				<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
				<span class="token selector">.author</span> <span class="token punctuation">&#123;</span>
					<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-base<span class="token punctuation">;</span>
					<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
					<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-title<span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
				<span class="token selector">.release-time</span> <span class="token punctuation">&#123;</span>
					<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-spacing-row-sm<span class="token punctuation">;</span>
					<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-grey<span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token selector">.detail-right</span> <span class="token punctuation">&#123;</span>
			<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
			<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>global.scss</code></strong></p>
<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token comment">// 头像</span>
<span class="token selector">.avatar</span><span class="token punctuation">&#123;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 2px solid #e5e5e5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="文章内容-分析文章内容的样式实现"><a href="#文章内容-分析文章内容的样式实现" class="headerlink" title="文章内容 - 分析文章内容的样式实现"></a>文章内容 - 分析文章内容的样式实现</h2><p>目前我们虽然已经完成了基本的 <code>html</code> 和 <code>css</code> ，但是我们可以发现，现在的 <strong>文章内容</strong> 部分与完成之后的项目差距其实挺大的。那么怎么解决这个问题呢？</p>
<p>想要解决这个问题，我们需要先明确一点：<strong>所有和样式相关的问题，都需要通过 <code>css</code> 进行解决！</strong></p>
<p>明确了这点之后，我们就知道，想要解决这个问题，那么还是必须要从 <code>css</code> 进行着手。</p>
<p>回忆一下我们之前解决 <strong>搜索结果高亮关键字的功能</strong>，我们知道 对于 <code>rich-text</code> 来说，它并不会把 <strong>富文本</strong> 渲染为真实 <code>DOM</code> ，放入到 <code>DOM</code> 中，所以我们如果直接通过 <code>css</code> 指定样式，那么是没有效果的。</p>
<p>所以我们当时通过了 <strong>行内样式</strong> 的形式进行了 <strong>高亮文本的展示</strong>。</p>
<p>但是这样的一种方案，放入到我们当前的场景中是否合适呢？</p>
<p>答案是：<strong>不合适的</strong>。</p>
<p>因为对于 <strong>文章内容</strong> 来说，它涉及到了非常多的 <code>html标签</code>，每个 <code>html 标签</code> 设计到的样式也非常复杂，如果我们还期望通过 <strong>行内样式</strong> 来去解决的话，那么未免 <strong>太不现实</strong> 了。</p>
<p>可行方案：</p>
<ol>
<li>把包含 <code>html</code> 的富文本，转化为 <strong>小程序可识别的 元素 进行展示</strong></li>
<li>获取网络中现有的，用来处理文章详情的 <code>css</code>，对该 <code>css</code> 进行改造</li>
<li>为每个元素添加对应的类名，使其可拥有更完美的样式</li>
</ol>
<p>通过以上三步即可实现。</p>
<h2 id="文章内容-实现文章内容的样式渲染"><a href="#文章内容-实现文章内容的样式渲染" class="headerlink" title="文章内容 - 实现文章内容的样式渲染"></a>文章内容 - 实现文章内容的样式渲染</h2><p>在上一章中我们明确了 <strong>文章内容样式渲染的实现方案</strong>，一共分为三步：</p>
<ol>
<li>把包含 <code>html</code> 的富文本，转化为 <strong>小程序可识别的 元素 进行展示</strong></li>
<li>获取网络中现有的，用来处理文章详情的 <code>css</code>，对该 <code>css</code> 进行改造</li>
<li>为每个元素添加对应的类名，使其可拥有更完美的样式</li>
</ol>
<p>那么这一章节，我们就一步一步来进行实现。</p>
<p><strong>1：把包含 <code>html</code> 的富文本，转化为 小程序可识别的 元素 进行展示</strong></p>
<p>想要实现这个功能，我们需要借助一个现有的第三方库 <a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=805">mp-html</a> </p>
<p> <a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=805">mp-html</a> 是一个专门用来解决 <strong>富文本渲染的一个库</strong> ，它的解决方案就是 <strong>把包含 <code>html</code> 的富文本，转化为 小程序可识别的 元素 进行展示</strong>，正好符合我们的需求。</p>
<p>导入并使用 <a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=805">mp-html</a> ：</p>
<ol>
<li>点击进入 <a target="_blank" rel="noopener" href="https://ext.dcloud.net.cn/plugin?id=805">mp-html</a>，点击 <strong>使用 <code>HBuilderX 导入插件</code></strong></li>
<li>在 <code>blog-detail</code> 中导入组件，并使用</li>
</ol>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 文章内容区 --></span>
		<span class="token comment">&lt;!-- 由于获取文章内容是异步的，此处确保文章有内容在渲染，否则会报错 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>	
			<span class="token comment">&lt;!-- 文章内容 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mp-html</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>markdown_views<span class="token punctuation">"</span></span>
				<span class="token attr-name">:content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addClassFromHtml(articleData.content)<span class="token punctuation">"</span></span>
				<span class="token attr-name">scroll-table</span>
			<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mp-html</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p>通过 <strong>微信小程序</strong> 查看渲染之后的 <code>DOM</code> 树，可以发现所有的 <strong>富文本</strong> 已经被真实渲染了。</p>
<p><strong>2：获取网络中现有的，用来处理文章详情的 <code>css</code>，对该 <code>css</code> 进行改造</strong></p>
<p>那么现在，我们就只需要增加对应的 <code>css</code> 样式就可以了。那么 <code>css</code> 样式从哪里来呢？</p>
<p>获取 <code>css</code> 的样式大家可以直接从：<a target="_blank" rel="noopener" href="https://theme.typora.io/">theme</a> 网站去进行下载，然后进行导入：</p>
<ol>
<li><p>下载对应的 css 压缩包</p>
</li>
<li><p>在 <code>styles</code> 中新建 <code>article-detail.scss</code> 文件</p>
</li>
<li><p>复制下载的 <code>css</code> 到 样式文件</p>
</li>
<li><p>在 <code>blog-detail.vue</code> 中导入 <code>css</code></p>
</li>
</ol>
<pre class="language-scss" data-language="scss"><code class="language-scss">&lt;style lang=<span class="token string">"scss"</span>>
<span class="token keyword">@import</span> <span class="token string">"~@/styles/article-detail.scss"</span><span class="token punctuation">;</span>
&lt;/style></code></pre>

<p><strong>3：为每个元素添加对应的类名，使其可拥有更完美的样式</strong></p>
<p>现在虽然 <code>DOM</code> 虽然已经被渲染出来了，但是其实现在距离我们最终的样式还是又一些差距的。</p>
<p>因为在导入的 <code>css</code> 中，很多的样式都是根据 <code>p</code> 标签，<code>span</code> 标签 这样的，标签选择器进行的样式指定，而我们被渲染出来的 <code>dom</code> 是不包含这些选择器的，所以我们需要给不同的标签增加不同的类名，然后修改对应的 <code>css</code> 使其可以通过 <strong>类名选择器</strong> 覆盖样式。</p>
<p><strong>为 <code>dom</code> 增加类名</strong></p>
<p>想要添加类名比较简单，我们可以直接通过 <strong>正则进行选取替换：</strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- 文章内容区域 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      ...
      <span class="token comment">&lt;!-- 文章内容 --></span>
      &lt;mp-html
        // 必须为 mp-html 增加 markdown_views 的类名
        class="markdown_views"
        :content="addClassFromHTML(articleData.content)"
        scroll-table
      />
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
 <span class="token operator">...</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 为所有的 DOM 增加类名
     */</span>
    <span class="token function">addClassFromHTML</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// 先替换 blockquote</span>
      <span class="token keyword">return</span> info<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;blockquote></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;blockquote class="blockquote-cls">'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token operator">...</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>

<p>现在查看 <code>DOM</code> 结构，我们就可以发现，在部分被渲染为 <code>view</code> 组件的元素上，已经多了一个 <code>class</code> 为 <code>blockquote-cls</code> 了。</p>
<p><strong>为 <code>css</code> 修改类名选择器</strong></p>
<p>在 <code>css</code> 文件中，全局搜索 <code>blockquote</code> ，将其修改为 <code>.blockquote-cls</code>。</p>
<p>即可发现样式已经被渲染成功了：</p>
<p><img src="/blogs/320d3645/2.jpg" loading="lazy"></p>
<p>接下来我们就可以为 <strong>所有的标签增加类名</strong> ，同时为 <strong><code>css</code> 修改对应的样式</strong></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token function">addClassFromHTML</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> info
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;p></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;p class="p-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;a></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;a class="a-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;h1></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;h1 class="h1-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;h2></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;h2 class="h2-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;h3></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;h3 class="h3-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;h4></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;h4 class="h4-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;h5></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;h5 class="h5-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;h6></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;h6 class="h6-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;ul></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;ul class="ul-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;li></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;li class="li-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;ol></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;ol class="ol-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;td></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;td class="td-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;th></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;th class="th-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;tr></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;tr class="tr-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;dl></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;dl class="dl-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;dd></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;dd class="dd-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;hr></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;hr class="hr-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;pre></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;pre class="pre-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;strong></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;strong class="strong-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;input></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;input class="input-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;table></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;table class="table-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;details></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;details class="details-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;code></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;code class="code-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;kbd></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;kbd class="kbd-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;summary></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;summary class="summary-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;blockquote></span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;blockquote class="blockquote-cls">'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;img</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">,</span> <span class="token string">'&lt;img class="img-cls"'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span></code></pre>

<pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 52px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">body</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> -apple-system<span class="token punctuation">,</span> SF UI Text<span class="token punctuation">,</span> Arial<span class="token punctuation">,</span> PingFang SC<span class="token punctuation">,</span> Hiragino Sans GB<span class="token punctuation">,</span> Microsoft YaHei<span class="token punctuation">,</span>
    WenQuanYi Micro Hei<span class="token punctuation">,</span> sans-serif<span class="token punctuation">,</span> SimHei<span class="token punctuation">,</span> SimSun<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 710rpx<span class="token punctuation">;</span>
  <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .p-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.32rem<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #4f4f4f<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.52rem<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.32rem 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .strong-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views i,
cite,
em,
var,
address,
dfn</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-style</span><span class="token punctuation">:</span> italic<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views *</span> <span class="token punctuation">&#123;</span>
  <span class="token property">-webkit-box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">#content_views.night .h1-cls,
#content_views.night .h2-cls,
#content_views.night .h3-cls,
#content_views.night .h4-cls,
#content_views.night .h5-cls,
#content_views.night .h6-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #4f4f4f<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .ul-cls,
.markdown_views .ol-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.48rem 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .ul-cls .ol-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.48rem 0.64rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .ul-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">list-style-type</span><span class="token punctuation">:</span> disc<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0.16rem 0 0 0.64rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .ol-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">list-style-type</span><span class="token punctuation">:</span> decimal<span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> 0.8rem<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 0.16rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .img-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> baseline<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html .htmledit_views .h1-cls,
html .markdown_views .h1-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.6rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html .htmledit_views .h2-cls,
html .markdown_views .h2-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.38rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.6rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html .htmledit_views .h3-cls,
html .markdown_views .h3-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.36rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.6rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html .htmledit_views .h4-cls,
html .markdown_views .h4-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.34rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.54rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html .htmledit_views .h5-cls,
html .markdown_views .h5-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.32rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.54rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html .htmledit_views .h6-cls,
html .markdown_views .h6-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.3rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.54rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .h1-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.56rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .h2-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.48rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .h3-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.44rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .h4-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.4rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .h5-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.36rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .h6-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.32rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .blockquote-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.32rem<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.48rem 0<span class="token punctuation">;</span>
  <span class="token property">border-left</span><span class="token punctuation">:</span> 0.16rem solid #dddfe4<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #eef0f4<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">overflow-scrolling</span><span class="token punctuation">:</span> touch<span class="token punctuation">;</span>
  <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .blockquote-cls .ul-cls,
.markdown_views .blockquote-cls .ol-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.28rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.44rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .blockquote-cls .ul-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .blockquote-cls .ol-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .blockquote-cls p</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.28rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.44rem<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .hr-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0.48rem 0<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> solid #ddd 0.02rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views tbody</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .table-cls .tr-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">border-top</span><span class="token punctuation">:</span> 0.02rem solid #ddd<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.table-box</span> <span class="token punctuation">&#123;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">overflow-x</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .table-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border-collapse</span><span class="token punctuation">:</span> collapse<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.48rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views tbody</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .table-cls .tr-cls:nth-child(2n)</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f7f7f7<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .table-cls .tr-cls .th-cls,
.markdown_views .table-cls .tr-cls .td-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.24rem <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #4f4f4f<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.44rem<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 0.02rem solid #ddd<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.16rem 0.16rem<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
  <span class="token property">word-break</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .table-cls .tr-cls .th-cls .code-cls,
.markdown_views .table-cls .tr-cls .td-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">word-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .table-cls .tr-cls .th-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #eff3f5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .dl-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0.48rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .dl-cls .dt-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0.16rem<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .dl-cls .dt-cls .dd-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0.16rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views abbr[title],
.markdown_views abbr[data-original-title]</span> <span class="token punctuation">&#123;</span>
  <span class="token property">cursor</span><span class="token punctuation">:</span> help<span class="token punctuation">;</span>
  <span class="token property">border-bottom</span><span class="token punctuation">:</span> 0.02rem dotted #999<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .initialism</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span>
  <span class="token property">text-transform</span><span class="token punctuation">:</span> uppercase<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .pre-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.48rem<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #282c34<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">overflow-x</span><span class="token punctuation">:</span> scroll<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 4px 8px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .a-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #4ea1db<span class="token punctuation">;</span>
  <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .a-cls:hover,
.markdown_views .a-cls:focus</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ca0c16<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .a-cls:visited</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #6795b5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .footnote</span> <span class="token punctuation">&#123;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> top<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> -0.08rem<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.24rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .footnotes .ol-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.28rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.44rem<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.16rem 0.48rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .sequence-diagram,
.markdown_views .flow-chart</span> <span class="token punctuation">&#123;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.48rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .sequence-diagram,
.markdown_views .flow-chart</span> <span class="token punctuation">&#123;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 0.48rem<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.28rem <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .sequence-diagram [fill='#000'],
.markdown_views .flow-chart [fill='#000'],
.markdown_views .sequence-diagram [fill='#000000'],
.markdown_views .flow-chart [fill='#000000'],
.markdown_views .sequence-diagram [fill='black'],
.markdown_views .flow-chart [fill='black']</span> <span class="token punctuation">&#123;</span>
  <span class="token property">fill</span><span class="token punctuation">:</span> #4f4f4f<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .sequence-diagram [stroke='#000000'],
.markdown_views .flow-chart [stroke='#000000']</span> <span class="token punctuation">&#123;</span>
  <span class="token property">stroke</span><span class="token punctuation">:</span> #4f4f4f<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .MathJax_SVG_Display</span> <span class="token punctuation">&#123;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0.48rem 0<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.36rem<span class="token punctuation">;</span>
  <span class="token property">font-weight</span><span class="token punctuation">:</span> 400<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #4f4f4f<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">text-indent</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">max-width</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">max-height</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">min-width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">min-height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .toc</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 0.32rem<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 0.48rem<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.48rem 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .toc .ul-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.16rem 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .toc .ul-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">list-style-type</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0.16rem 0 0 0.48rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 0.16rem<span class="token punctuation">;</span>
  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .dl-cls .dd-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 0.16rem 0.8rem<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .kbd-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0.04rem 0.16rem<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 0.02rem solid <span class="token function">rgba</span><span class="token punctuation">(</span>63<span class="token punctuation">,</span> 63<span class="token punctuation">,</span> 63<span class="token punctuation">,</span> 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> 0 0.02rem 0 <span class="token function">rgba</span><span class="token punctuation">(</span>63<span class="token punctuation">,</span> 63<span class="token punctuation">,</span> 63<span class="token punctuation">,</span> 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0.02rem 0 <span class="token function">rgba</span><span class="token punctuation">(</span>63<span class="token punctuation">,</span> 63<span class="token punctuation">,</span> 63<span class="token punctuation">,</span> 0.25<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.08rem<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0.04rem<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views mark</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #555963<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .katex-display,
.markdown_views .MathJax_Display</span> <span class="token punctuation">&#123;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">overflow-x</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 14px<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 22px<span class="token punctuation">;</span>
  <span class="token property">overflow-x</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> pre<span class="token punctuation">;</span>
  <span class="token property">word-wrap</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">word-break</span><span class="token punctuation">:</span> normal <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f8fa<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token atrule"><span class="token rule">@media</span> screen <span class="token keyword">and</span> <span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span></span> <span class="token punctuation">&#123;</span>
  <span class="token selector">.markdown_views .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
    <span class="token property">min-width</span><span class="token punctuation">:</span> 94%<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .pre-cls.prettyprint,
.markdown_views .prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 0 24px 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 8px 16px 6px 56px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f6f8fa<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">overflow-y</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">overflow-x</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 48px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #eef0f4<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px 0 8px<span class="token punctuation">;</span>
  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 8px<span class="token punctuation">;</span>
  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-dark .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #282c34<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #abb2bf<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-dark .pre-cls .code-cls.hljs *</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #abb2bf<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-dark .prettyprint,
.markdown_views.prism-atom-one-dark .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #282c34<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-dark .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #282c34<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-dark .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #abb2bf <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-light .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-light .prettyprint,
.markdown_views.prism-atom-one-light .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-light .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atom-one-light .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #383a42 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #1d1f21<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #c5c8c6<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night .pre-cls .code-cls.hljs *</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #c5c8c6<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night .prettyprint,
.markdown_views.prism-tomorrow-night .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #1d1f21<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #1d1f21<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #c5c8c6 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-dracula .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #282a36<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f8f8f2<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-dracula .pre-cls .code-cls.hljs *</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f8f8f2<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-dracula .prettyprint,
.markdown_views.prism-dracula .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #282a36<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-dracula .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #282a36<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-dracula .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #f8f8f2 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-github-gist .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f3f4f5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-github-gist .prettyprint,
.markdown_views.prism-github-gist .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f3f4f5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-github-gist .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f3f4f5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-github-gist .prettyprint .prism</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f3f4f5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-github-gist .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #5e6687 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-kimbie-light .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fbebd4<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-kimbie-light .prettyprint,
.markdown_views.prism-kimbie-light .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fbebd4<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-kimbie-light .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fbebd4<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-kimbie-light .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #84613d <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night-eighties .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #2d2d2d<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night-eighties .pre-cls .code-cls.hljs *</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night-eighties .prettyprint,
.markdown_views.prism-tomorrow-night-eighties .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #2d2d2d<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night-eighties .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #2d2d2d<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-tomorrow-night-eighties .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ccc <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atelier-sulphurpool-light .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f5f7ff<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atelier-sulphurpool-light .prettyprint,
.markdown_views.prism-atelier-sulphurpool-light .pre-cls.prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f5f7ff<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atelier-sulphurpool-light .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #f5f7ff<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.markdown_views.prism-atelier-sulphurpool-light .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #5e6687 <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">border-right</span><span class="token punctuation">:</span> 1px solid #c5c5c5<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html body.night-body,
.night</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #2a2d33<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">html body.night-body .img-cls.mathcode</span> <span class="token punctuation">&#123;</span>
  <span class="token property">-webkit-filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token function">invert</span><span class="token punctuation">(</span>1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .h1-cls,
.night .h2-cls,
.night .h3-cls,
.night .h4-cls,
.night .h5-cls,
.night .h6-cls,
.night p,
.night p span,
.night .li-cls,
.night .dl-cls,
.night .dt-cls,
.night .dd-cls,
.night .strong-cls,
.night .table-cls,
.night .table-cls .tr-cls,
.night .table-cls .tr-cls .th-cls,
.night .table-cls .tr-cls .td-cls,
.night .table-cls .tr-cls:nth-child(2n)</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #dadfe8 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .p-cls,
.night .strong-cls,
.night .h1-cls,
.night .h2-cls,
.night .h3-cls,
.night .h4-cls,
.night .h5-cls,
.night .h6-cls,
.night .ol-cls .li-cls,
.night .ul-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #2a2d33 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .code-cls .ol-cls,
.night .code-cls .ul-cls,
.night .prettyprint .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #888e99 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .blockquote-cls .p-cls,
.night .blockquote-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #25272b <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .blockquote-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border-left</span><span class="token punctuation">:</span> 4px solid #34373d<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .blockquote-cls .p-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #888e99<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .code-cls .ol-cls .li-cls div.hljs-ln-numbers</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border-right-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .prettyprint .pre-numbering,
.night .prettyprint .pre-numbering .li-cls,
.night .code-cls .ol-cls .li-cls div.hljs-ln-numbers .hljs-ln-line</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #34373d <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .prettyprint .pre-numbering,
.night .prettyprint .pre-numbering .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border-right-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .code-cls .ol-cls,
.night .code-cls .ul-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding-left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #25272b<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .table-cls .tr-cls,
.night .table-cls .tr-cls .th-cls,
.night .table-cls .tr-cls:nth-child(2n)</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #2a2d33<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .table-cls .tr-cls,
.night .table-cls .tr-cls .th-cls,
.night .table-cls .tr-cls .td-cls,
.night .table-cls .tr-cls:nth-child(2n)</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #555963 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .hljs</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.article_content.night</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #2a2d33<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .pre-cls .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #25272b <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .hljs,
.night .pre-cls.prettyprint,
.night .pre-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #25272b<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night svg</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .prettyprint .prism,
.night .prettyprint div[style]</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #25272b <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">padding-left</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">padding-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .prettyprint .prism .token.comment</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #999aaa<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .pre-cls .code-cls .ol-cls .li-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #25272b <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .markdown_views .code-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .markdown_views .hr-cls</span> <span class="token punctuation">&#123;</span>
  <span class="token property">border-bottom-color</span><span class="token punctuation">:</span> #555963 <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .markdown_views .prettyprint .pre-numbering</span> <span class="token punctuation">&#123;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .markdown_views .pre-cls.prettyprint,
.night .markdown_views .prettyprint</span> <span class="token punctuation">&#123;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 0 16px 6px 50px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.night .markdown_views mark</span> <span class="token punctuation">&#123;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #2a2d33<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.mermaid</span> <span class="token punctuation">&#123;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> initial<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.mermaid span.edgeLabel</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> inherit <span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</code></pre>

<p>替换之后得到如下页面：</p>
<p><img src="/blogs/320d3645/1.jpg" loading="lazy"></p>
<h2 id="文章内容-解决字体过小的问题"><a href="#文章内容-解决字体过小的问题" class="headerlink" title="文章内容 - 解决字体过小的问题"></a>文章内容 - 解决字体过小的问题</h2><p>查看我们的 <code>css</code> 可以发现，<strong>文章内容</strong> 中所有的 <strong>文字大小</strong> 都是由  <code>rem</code> 进行指定的。</p>
<p>同时我们知道 <code>rem</code> 的大小取决于 <code>html</code> 根目录的 <code>font-size</code> 大小，那么明白了这个之后，问题应该就好解决了对不对。只需要给 <strong><code>html</code> 根标签添加一个对应的 <code>font-size</code> 就可以了</strong>。</p>
<p>所以我们可以到 <code>article-detail.scss</code> 顶部，但是我们发现它这里已经有了对应的 <code>css</code> 了！！</p>
<p><img src="/blogs/320d3645/4.jpg" loading="lazy"></p>
<p>既然已经有了这个 <code>css</code> 那为什么还不能生效呢？？</p>
<hr>
<p>原因其实非常简单，因为现在是在 <strong>微信小程序</strong> 中，<strong>微信小程序</strong> 中没有 <code>html</code> 标签吗</p>
<p>所以通过指定 <code>html</code> 样式的形式是无法解决 <strong>微信小程序</strong> 中的字体大小问题的。</p>
<p><strong>微信小程序字体大小解决方案：</strong></p>
<p>在 <code>uniapp</code> 中，为我们提供了一个单独的组件  <a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/component/page-meta?id=page-meta">page-meta</a> 。</p>
<p><a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/component/page-meta?id=page-meta">page-meta</a> 是一个特殊的标签，有点类似 <code>html</code> 里的<code>header</code>标签。页面的背景色、原生导航栏的参数，都可以写在这里。我们可以通过 <code>root-font-size</code> 属性指定页面的 <strong><code>根font-size</code>（类似于 <code>html</code> 根元素的 <code>font-size</code>）</strong></p>
<p>所以，我们可以直接使用 <page-meta> 包裹元素：</page-meta></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>52px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p>此时，在返回模拟器，即可发现 <strong>文字大小问题已经解决</strong></p>
<p><strong>注意：目前文章详情还无法在 浏览器 中进行展示，具体原因我们会在后面 【适配方案】 中进行讲解！！</strong></p>
<h2 id="评论列表-获取评论列表数据"><a href="#评论列表-获取评论列表数据" class="headerlink" title="评论列表 - 获取评论列表数据"></a>评论列表 - 获取评论列表数据</h2><p>定义接口 <code>article.js</code></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 获取文章评论列表
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getArticleCommentList</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/article/comment/list'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>创建新的组件 <code>article-comment-list</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getArticleCommentList <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/article"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"article-comment-list"</span><span class="token punctuation">,</span>
	props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// 文章 ID</span>
		articleId<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> String<span class="token punctuation">,</span>
			required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 当前页数</span>
			page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			<span class="token comment">// 每页的评论数</span>
			pageSize<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 获取评论列表数据
		 */</span>
		<span class="token keyword">async</span> <span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// if (!this.articleId) return;</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleCommentList</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				articleId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleId<span class="token punctuation">,</span>
				page<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">,</span>
				size<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	watch<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// 由于articleId 是在父元素中通过网络请求获取的，所以有可能为空，所以可以采取如下写法</span>
		<span class="token comment">// 但由于此处在父元素中通过了 v-if 对请求的数据是否有值进行判断。所以可以省略</span>
		articleId<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			<span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p><code>blog-detail</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 文章内容区 --></span>
			<span class="token comment">&lt;!-- 由于获取文章内容是异步的，此处确保文章有内容在渲染，否则会报错 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                ...
				<span class="token comment">&lt;!-- 评论列表 --></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-list</span> <span class="token attr-name">:articleId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleId<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-list</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/taohuaya/p/11413178.html">vue中子组件的created、mounted钩子中获取不到props中的值问题</a></p>
<h2 id="评论列表-渲染评论列表（精简评论）"><a href="#评论列表-渲染评论列表（精简评论）" class="headerlink" title="评论列表 - 渲染评论列表（精简评论）"></a>评论列表 - 渲染评论列表（精简评论）</h2><p>对于评论列表，包含两部分的内容：</p>
<ol>
<li>精简评论</li>
<li>全部评论（包含分页）</li>
</ol>
<p><code>article-comment-list.vue</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!-- 精简评论 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-limit-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>精简评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in commentList.slice(0, 2)<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- item 项的组件 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-item</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 查看更多评论 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show-more<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>查看更多评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p><code>article-comment-item.vue</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-item-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 头像 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data.avatar<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 评论人 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.nickName || data.userName &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 评论内容 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.content &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 评论时间 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-time<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.postTime | relativeTime &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		data<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
			required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="评论列表-美化评论列表"><a href="#评论列表-美化评论列表" class="headerlink" title="评论列表 - 美化评论列表"></a>评论列表 - 美化评论列表</h2><p><code>article-comment-list.vue</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!-- 精简评论 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-limit-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>精简评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in commentList.slice(0, 2)<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- item 项的组件 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-item</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 查看更多评论 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show-more<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>查看更多评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.comment-title</span> <span class="token punctuation">&#123;</span>
	<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
	<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-title<span class="token punctuation">;</span>
	<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-lg<span class="token punctuation">;</span>
	<span class="token property">margin</span><span class="token punctuation">:</span> $uni-spacing-col-lg 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.comment-limit-container</span> <span class="token punctuation">&#123;</span>
	<span class="token selector">.show-more</span> <span class="token punctuation">&#123;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-more<span class="token punctuation">;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-base<span class="token punctuation">;</span>
		<span class="token property">margin</span><span class="token punctuation">:</span> $uni-spacing-col-lg<span class="token punctuation">;</span>
		<span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p><code>article-comment-item.vue</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-item-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 头像 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data.avatar<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>info-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 评论人 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-user<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.nickName || data.userName &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 评论内容 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.content &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 评论时间 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-time<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.postTime | relativeTime &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.comment-item-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> $uni-spacing-col-lg 0<span class="token punctuation">;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token selector">.info-box</span> <span class="token punctuation">&#123;</span>
		<span class="token property">margin-left</span><span class="token punctuation">:</span> $uni-spacing-row-sm<span class="token punctuation">;</span>
		<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
		<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
		<span class="token selector">.comment-user</span> <span class="token punctuation">&#123;</span>
			<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-sm<span class="token punctuation">;</span>
			<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
			<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token selector">.comment-info</span> <span class="token punctuation">&#123;</span>
			<span class="token property">margin-top</span><span class="token punctuation">:</span> $uni-spacing-col-sm<span class="token punctuation">;</span>
			<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-base<span class="token punctuation">;</span>
			<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token selector">.comment-time</span> <span class="token punctuation">&#123;</span>
			<span class="token property">margin-top</span><span class="token punctuation">:</span> $uni-spacing-col-sm<span class="token punctuation">;</span>
			<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-sm<span class="token punctuation">;</span>
			<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-grey<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<h2 id="评论列表-渲染全部评论列表"><a href="#评论列表-渲染全部评论列表" class="headerlink" title="评论列表 - 渲染全部评论列表"></a>评论列表 - 渲染全部评论列表</h2><p><code>article-comment-list.vue</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!-- 精简评论 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-limit-container<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!isShowAllComment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>精简评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in commentList.slice(0, 2)<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- item 项的组件 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-item</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 查看更多评论 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show-more<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onMoreClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>查看更多评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!-- 全部评论 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-all-container<span class="token punctuation">"</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>全部评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 1. 通过 mescroll-body 包裹列表，指定 ref 为 么scrollRef，监听 @init，@down，@up 事件 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mescroll-body</span>
			<span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollRef<span class="token punctuation">"</span></span>
			<span class="token attr-name">@init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollInit<span class="token punctuation">"</span></span>
			<span class="token attr-name">@up</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upCallback<span class="token punctuation">"</span></span>
			<span class="token attr-name">:down</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
				use: false,
			&#125;<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in commentList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token comment">&lt;!-- item 项的组件 --></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-item</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mescroll-body</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 2. 导入对应的 mixins</span>
<span class="token keyword">import</span> MescrollMixin <span class="token keyword">from</span> <span class="token string">"@/uni_modules/mescroll-uni/components/mescroll-uni/mescroll-mixins.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// 3. 注册 mixins</span>
	mixins<span class="token operator">:</span> <span class="token punctuation">[</span>MescrollMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
             <span class="token operator">...</span>
			<span class="token comment">// 是否展示全部评论</span>
			isShowAllComment<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 首次加载
		 */</span>
		<span class="token function">mescrollInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 上拉加载更多
		 */</span>
		<span class="token function">upCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
			查看全部评论的点击事件
		 */</span>
		<span class="token function">onMoreClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isShowAllComment <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>blog-detail.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!-- 评论列表 --></span>
<span class="token comment">&lt;!-- 1. 给 mescroll-body 的组件添加专门的ref :ref="mescrollItem" (mescrollItem) 是固定的不可以变化--></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-list</span>
              <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollItem<span class="token punctuation">"</span></span>
              <span class="token attr-name">:articleId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleId<span class="token punctuation">"</span></span>
         <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-list</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 2. 引入 mescroll-comp.js</span>
<span class="token keyword">import</span> MescrollCompMixin <span class="token keyword">from</span> <span class="token string">"@/uni_modules/mescroll-uni/components/mescroll-uni/mixins/mescroll-comp.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// 3. 注册 mixins</span>
	mixins<span class="token operator">:</span> <span class="token punctuation">[</span>MescrollCompMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><code>article-comment-list</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!-- 精简评论 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-limit-container<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!isShowAllComment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>精简评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in commentList.slice(0, 2)<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- item 项的组件 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-item</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 查看更多评论 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show-more<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onMoreClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>查看更多评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token comment">&lt;!-- 全部评论 --></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-all-container<span class="token punctuation">"</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>全部评论<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 1. 通过 mescroll-body 包裹列表，指定 ref 为 么scrollRef，监听 @init，@down，@up 事件 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mescroll-body</span>
			<span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollRef<span class="token punctuation">"</span></span>
			<span class="token attr-name">@init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollInit<span class="token punctuation">"</span></span>
			<span class="token attr-name">@up</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upCallback<span class="token punctuation">"</span></span>
			<span class="token attr-name">:down</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
				use: false,
			&#125;<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in commentList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token comment">&lt;!-- item 项的组件 --></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-item</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mescroll-body</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 2. 导入对应的 mixins</span>
<span class="token keyword">import</span> MescrollMixin <span class="token keyword">from</span> <span class="token string">"@/uni_modules/mescroll-uni/components/mescroll-uni/mescroll-mixins.js"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	<span class="token comment">// 3. 注册 mixins</span>
	mixins<span class="token operator">:</span> <span class="token punctuation">[</span>MescrollMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 当前页数</span>
			page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			<span class="token comment">// 每页的评论数</span>
			pageSize<span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
			<span class="token comment">// 数据源</span>
			commentList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token comment">// 是否展示全部评论</span>
			isShowAllComment<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
			<span class="token comment">// 是否为首次 init</span>
			isInit<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token comment">// 组件的实例</span>
			mescroll<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 首次加载
		 */</span>
		<span class="token keyword">async</span> <span class="token function">mescrollInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 此处需要重新加载数据（也可以将this.getMescroll().endSuccess()放在一个延迟0的计时器中），调用this.getMescroll 时才能获取到 mescroll 实例对象，进而才能调用endSuccess()方法。否则由于组件还未渲染完，无法直接使用endSuccess方法。</span>
             <span class="token comment">// 同时，此处不知道为何，upCallback会等到mescrollInit中的代码全部执行完后才执行。导致upCallback中的if 判断失效。此处建议将配置:up属性：&#123;auto:false&#125;来代替if判断，但这样下一章的endBySize调用时会出现问题</span>
			<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isInit <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token comment">// 结束 上拉加载 &amp;&amp; 下拉刷新</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMescroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 上拉加载更多
		 */</span>
		<span class="token keyword">async</span> <span class="token function">upCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isInit<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 结束 上拉加载 &amp;&amp; 下拉刷新</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getMescroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">endSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 获取评论列表数据
		 */</span>
		<span class="token keyword">async</span> <span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// if (!this.articleId) return;</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getArticleCommentList</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				articleId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleId<span class="token punctuation">,</span>
				page<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">,</span>
				size<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pageSize<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 判断是否为第一页数据</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>commentList <span class="token operator">=</span> res<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>commentList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>commentList<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>list<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 返回 mescroll 实例对象
		 */</span>
		<span class="token function">getMescroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>mescroll<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>mescroll <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>mescrollRef<span class="token punctuation">.</span>mescroll<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mescroll<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<div class="danger">

<blockquote>
<p>注意：此处的up回调会在init回调全部执行后在执行，无法遵循await 的消息队列原则。具体原因未知~！</p>
</blockquote>
</div>



<h2 id="评论列表-处理数据加载完成的提示"><a href="#评论列表-处理数据加载完成的提示" class="headerlink" title="评论列表 - 处理数据加载完成的提示"></a>评论列表 - 处理数据加载完成的提示</h2><p>服务端会返回评论的总数量，如果当前评论数量 === 总数量 则表示 <strong>数据已全部加载！</strong></p>
<p>在 <code>mescroll</code> 中提供了对应的对比方法：<code>mescroll.endBySize(当前数据量，总数据量)</code></p>
<p><code>article-comment-list</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// 评论总数</span>
      commentListTotal<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 获取评论列表
     */</span>
    <span class="token keyword">async</span> <span class="token function">loadCommentList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token operator">...</span>
      <span class="token comment">// 获取总数量</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>commentListTotal <span class="token operator">=</span> res<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
      <span class="token comment">// 判断是否为第一页数据</span>
      <span class="token operator">...</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 首次加载
     */</span>
    <span class="token keyword">async</span> <span class="token function">mescrollInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token operator">...</span>
      <span class="token comment">// 判断数据是否加载完成</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>mescroll<span class="token punctuation">.</span><span class="token function">endBySize</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>commentList<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>commentListTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">/**
     * 上拉加载更多
     */</span>
    <span class="token keyword">async</span> <span class="token function">upCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token operator">...</span>
      <span class="token comment">// 判断数据是否加载完成</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>mescroll<span class="token punctuation">.</span><span class="token function">endBySize</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>commentList<span class="token punctuation">.</span>length<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>commentListTotal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>

<p>想要修改结束的提示，可以直接通过配置修改：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mescroll-body</span>
               <span class="token attr-name">:up</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
                    textNoMore: <span class="token punctuation">'</span>-- 我也是有底线的！ --<span class="token punctuation">'</span>
                    &#125;<span class="token punctuation">"</span></span>
               <span class="token punctuation">></span></span></code></pre>

<div class="danger">

<blockquote>
<p>注意：此处使用endBySize 并不能将所有的评论加载完，故无法达到效果。未来开发请谨慎使用。</p>
</blockquote>
</div>

<h2 id="功能区域-封装功能组件"><a href="#功能区域-封装功能组件" class="headerlink" title="功能区域 - 封装功能组件"></a>功能区域 - 封装功能组件</h2><p>底部功能区域包含三个部分：</p>
<ol>
<li>输入框</li>
<li>点赞按钮</li>
<li>收藏按钮</li>
</ol>
<p>创建底部功能组件：<code>article-operate</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operator-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 输入框 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-search</span> <span class="token attr-name">placeholderText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>评论一句，前排打call...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-search</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 点赞 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-praise</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-praise</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 收藏 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options-<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-collect</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-collect</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"article-operate"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p>输入框使用 <code>my-search</code> 组件</p>
<p>创建点赞组件：<code>article-praise</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>praise-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/un-praise.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"article-praise"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p>创建收藏组件：<code>article-collect</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>collect-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/un-collect.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"article-collect"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p>在 <code>blog-detail</code>中使用该组件</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token comment">&lt;!-- 文章内容区 --></span>
...
<span class="token comment">&lt;!-- 底部功能区 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-operate</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-operate</span><span class="token punctuation">></span></span></code></pre>

<h2 id="功能区域-样式美化"><a href="#功能区域-样式美化" class="headerlink" title="功能区域 - 样式美化"></a>功能区域 - 样式美化</h2><p><strong><code>article-operate.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operator-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 输入框 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-search</span> <span class="token attr-name">placeholderText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>评论一句，前排打call...<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-search</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 点赞 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-praise</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-praise</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 收藏 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-collect</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-collect</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.operator-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
	<span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
	<span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
	<span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> $uni-bg-color<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> 4px 6px 32px 6px<span class="token punctuation">;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid $uni-bg-color-grey<span class="token punctuation">;</span>
	<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token selector">.comment-box</span> <span class="token punctuation">&#123;</span>
		<span class="token property">flex-grow</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.options-box</span> <span class="token punctuation">&#123;</span>
		<span class="token property">flex-grow</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>article-praise.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>praise-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/un-praise.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.praise-box</span> <span class="token punctuation">&#123;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
	<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token selector">.img</span> <span class="token punctuation">&#123;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> $uni-img-size-base<span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> $uni-img-size-base<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.txt</span> <span class="token punctuation">&#123;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-sm<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>article-collect.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>collect-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/un-collect.png<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.collect-box</span> <span class="token punctuation">&#123;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
	<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token selector">.img</span> <span class="token punctuation">&#123;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> $uni-img-size-base<span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> $uni-img-size-base<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.txt</span> <span class="token punctuation">&#123;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-sm<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<h2 id="功能区域-增加-my-search-的样式适配"><a href="#功能区域-增加-my-search-的样式适配" class="headerlink" title="功能区域 - 增加 my-search 的样式适配"></a>功能区域 - 增加 <code>my-search</code> 的样式适配</h2><p><strong><code>my-search.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
		...
		<span class="token comment">&lt;!-- 搜索按钮 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
			<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-search-box<span class="token punctuation">"</span></span>
			<span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
				backgroundColor: config.backgroundColor,
				height: config.height + <span class="token punctuation">'</span>px<span class="token punctuation">'</span>,
				border: config.border,
			&#125;<span class="token punctuation">"</span></span>
			<span class="token attr-name">v-else</span>
		<span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 搜索图标 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>config.icon<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
			<span class="token comment">&lt;!-- placeholder --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>placeholder<span class="token punctuation">"</span></span>
				<span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
					color: config.textColor,
				&#125;<span class="token punctuation">"</span></span>
				<span class="token punctuation">></span></span>&#123;&#123; placeholderText &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span>
			<span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>article-operate.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operator-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 输入框 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-search</span>
				<span class="token attr-name">placeholderText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>评论一句，前排打call...<span class="token punctuation">"</span></span>
				<span class="token attr-name">:config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
					height: 28,
					backgroundColor: <span class="token punctuation">'</span>#eeedf4<span class="token punctuation">'</span>,
					icon: <span class="token punctuation">'</span>/static/images/input-icon.png<span class="token punctuation">'</span>,
					textColor: <span class="token punctuation">'</span>#a6a5ab<span class="token punctuation">'</span>,
					border: <span class="token punctuation">'</span>none<span class="token punctuation">'</span>,
				&#125;<span class="token punctuation">"</span></span>
			<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-search</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<h2 id="用户登录-登录页面基本样式"><a href="#用户登录-登录页面基本样式" class="headerlink" title="用户登录 - 登录页面基本样式"></a>用户登录 - 登录页面基本样式</h2><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 用户未登录 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar avatar-img<span class="token punctuation">"</span></span>
				<span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/default-avatar.png<span class="token punctuation">"</span></span>
				<span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scaleToFill<span class="token punctuation">"</span></span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-desc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>登录后可同步数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				微信用户一键登录
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.my-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
	<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">padding-top</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>
	<span class="token selector">.avatar-img</span> <span class="token punctuation">&#123;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 78px<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 78px<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.login-desc</span> <span class="token punctuation">&#123;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-grey<span class="token punctuation">;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-base<span class="token punctuation">;</span>
		<span class="token property">margin-top</span><span class="token punctuation">:</span> $uni-spacing-col-big<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.login-btn</span> <span class="token punctuation">&#123;</span>
		<span class="token property">margin-top</span><span class="token punctuation">:</span> $uni-spacing-col-big<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 85%<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<h2 id="用户登录-封装登录组件"><a href="#用户登录-封装登录组件" class="headerlink" title="用户登录 - 封装登录组件"></a>用户登录 - 封装登录组件</h2><p>由于我们会在多个地方实现登录，所以为了复用登录的 <code>UI</code>，我们可以把 登录的 <code>UI</code> 封装成为一个组件</p>
<p><strong><code>创建登录组件 my-login</code></strong> </p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 用户未登录 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar avatar-img<span class="token punctuation">"</span></span>
				<span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/default-avatar.png<span class="token punctuation">"</span></span>
				<span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scaleToFill<span class="token punctuation">"</span></span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-desc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>登录后可同步数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				微信用户一键登录
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"my-login"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.my-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
	<span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
	<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
	<span class="token property">padding-top</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>
	<span class="token selector">.avatar-img</span> <span class="token punctuation">&#123;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 78px<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 78px<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.login-desc</span> <span class="token punctuation">&#123;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-grey<span class="token punctuation">;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-base<span class="token punctuation">;</span>
		<span class="token property">margin-top</span><span class="token punctuation">:</span> $uni-spacing-col-big<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.login-btn</span> <span class="token punctuation">&#123;</span>
		<span class="token property">margin-top</span><span class="token punctuation">:</span> $uni-spacing-col-big<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 85%<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<h2 id="用户登录-明确登录的思路"><a href="#用户登录-明确登录的思路" class="headerlink" title="用户登录 - 明确登录的思路"></a>用户登录 - 明确登录的思路</h2><p>对于登录来说，我们会分为两个不同的端来进行适配实现：</p>
<ol>
<li>微信小程序</li>
<li>非微信小程序（在讲解适配时实现）</li>
</ol>
<p>我们这里先只讲解 【微信小程序的实现】，【非微信小程序】的实现将在后面的 <strong>适配环节进行</strong>。</p>
<p><strong>微信小程序：</strong></p>
<ol>
<li>想要实现登录功能，那么我们需要调用登录接口来进行实现，而登录接口所需要的参数，我们可以直接通过 <code>getUserProfile</code> 方法进行获取。</li>
<li>调用登录接口成功，服务端会返回用户的 <code>token</code>，这个 <code>token</code> 为当前的用户身份令牌。（拥有 token） 则表示用户已经登录了。</li>
<li>而此处的 <code>token</code>，我们需要在多个组件中进行使用，所以 <code>token</code> 需要被保存到 <code>全局状态管理工具 - vuex</code> 中，同时需要保存的还有通过 <code>getUserProfile</code> 获取到的用户基本信息。</li>
<li>而当前的用户登录状态，我们希望可以一直保存（PS：不需要每次都进行登录）。所以在登录完成后，我们需要把 <strong><code>token</code> &amp;&amp; <code>userinfo</code></strong> 保存到 <strong>本地存储中</strong></li>
<li>最后，为了实现 <strong>数据与组件的分离</strong>，我们需要把与 <strong>与登录相关的逻辑</strong> 都封装在 <code>vuex</code> 中进行。</li>
</ol>
<p>这些业务是 <strong>前端用户登录的标准逻辑</strong>，大家在以后的前端登录业务处理中，也可以按照此逻辑进行。</p>
<h2 id="用户登录-封装-action-调用登录接口"><a href="#用户登录-封装-action-调用登录接口" class="headerlink" title="用户登录 - 封装 action 调用登录接口"></a>用户登录 - 封装 action 调用登录接口</h2><p>首先我们需要先获取到用户的信息，用作登录时的请求参数：</p>
<p><strong><code>my-login.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				微信用户一键登录
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapActions <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"my-login"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"login"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 微信一键登录点击事件
		 */</span>
		<span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 展示加载框</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取用户信息</span>
			uni<span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				desc<span class="token operator">:</span> <span class="token string">"登录后可同步数据"</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token comment">// 调用登录接口</span>
					console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
						title<span class="token operator">:</span> <span class="token string">"授权已取消"</span><span class="token punctuation">,</span>
						icon<span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>
						mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 关闭加载</span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>接着去vuex中定义获取登录的方法：</p>
<p><strong><code>store/modules/user.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> login <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'api/user'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>

    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// actions中完成异步操作</span>
    actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">/**
         * 完成登录
         */</span>
        <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> userProfile</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> userProfile<span class="token punctuation">.</span>userInfo
            <span class="token comment">// 调用登录接口</span>
            <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                signature<span class="token operator">:</span> userProfile<span class="token punctuation">.</span>signature<span class="token punctuation">,</span>
                iv<span class="token operator">:</span> userProfile<span class="token punctuation">.</span>iv<span class="token punctuation">,</span>
                nickName<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>nickName<span class="token punctuation">,</span>
                gender<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>gender<span class="token punctuation">,</span>
                city<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
                province<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>province<span class="token punctuation">,</span>
                avatarUrl<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>avatarUrl
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>store/index.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">...</span>
<span class="token keyword">import</span> user <span class="token keyword">from</span> <span class="token string">'./modules/user'</span>
<span class="token operator">...</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 模块</span>
    modules<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        user
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span></code></pre>

<p>最后定义请求接口的方法：</p>
<p><strong><code>api/user.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../utils/request'</span>

<span class="token comment">/**
 * 用户登录
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/sys/login'</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="用户登录-保存用户登录状态"><a href="#用户登录-保存用户登录状态" class="headerlink" title="用户登录 - 保存用户登录状态"></a>用户登录 - 保存用户登录状态</h2><p>用户的登录状态需要被保存到 <code>vuex</code> 中，同时需要进行 <strong>本地存储</strong>。</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> login <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'api/user'</span>
<span class="token keyword">const</span> <span class="token constant">TOKEN_KEY</span> <span class="token operator">=</span> <span class="token string">'token'</span>
<span class="token keyword">const</span> <span class="token constant">USER_INFO_KEY</span> <span class="token operator">=</span> <span class="token string">'user-info'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        <span class="token comment">// 用户 token</span>
        token<span class="token operator">:</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token constant">TOKEN_KEY</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token comment">// 用户信息</span>
        userInfo<span class="token operator">:</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token constant">USER_INFO_KEY</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">/**
         * 保存 token 到 vuex
         */</span>
        <span class="token function">setToken</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> token</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>token <span class="token operator">=</span> token
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/saveToToken'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 保存 token 到本地存储
         */</span>
        <span class="token function">saveToToken</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            uni<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                key<span class="token operator">:</span> <span class="token constant">TOKEN_KEY</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> state<span class="token punctuation">.</span>token
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 保存 userInfo 到 vuex
         */</span>
        <span class="token function">setUserInfo</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> userInfo</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> userInfo
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/saveToUserInfo'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 保存 userInfo 到本地存储
         */</span>
        <span class="token function">saveToUserInfo</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            uni<span class="token punctuation">.</span><span class="token function">setStorage</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                key<span class="token operator">:</span> <span class="token constant">USER_INFO_KEY</span><span class="token punctuation">,</span>
                data<span class="token operator">:</span> state<span class="token punctuation">.</span>userInfo
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// actions中完成异步操作</span>
    actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">/**
         * 完成登录
         */</span>
        <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> userProfile</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> userProfile<span class="token punctuation">.</span>userInfo
            <span class="token comment">// 调用登录接口</span>
            <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                signature<span class="token operator">:</span> userProfile<span class="token punctuation">.</span>signature<span class="token punctuation">,</span>
                iv<span class="token operator">:</span> userProfile<span class="token punctuation">.</span>iv<span class="token punctuation">,</span>
                nickName<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>nickName<span class="token punctuation">,</span>
                gender<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>gender<span class="token punctuation">,</span>
                city<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>city<span class="token punctuation">,</span>
                province<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>province<span class="token punctuation">,</span>
                avatarUrl<span class="token operator">:</span> userInfo<span class="token punctuation">.</span>avatarUrl
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">// TODO：登录逻辑</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/setToken'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/setUserInfo'</span><span class="token punctuation">,</span> userInfo<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="用户登录-完成已登录的用户视图"><a href="#用户登录-完成已登录的用户视图" class="headerlink" title="用户登录 - 完成已登录的用户视图"></a>用户登录 - 完成已登录的用户视图</h2><p>当 <code>token</code> 存在时，表示用户已经登录了，此时需要 <strong>展示用户登录完成的视图：</strong></p>
<p><strong><code>my-login.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 用户未登录 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!token<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar avatar-img<span class="token punctuation">"</span></span>
				<span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/default-avatar.png<span class="token punctuation">"</span></span>
				<span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scaleToFill<span class="token punctuation">"</span></span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-desc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>登录后可同步数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				微信用户一键登录
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 用户登录 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar avatar-img<span class="token punctuation">"</span></span>
				<span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userInfo.avatarUrl<span class="token punctuation">"</span></span>
				<span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scaleToFill<span class="token punctuation">"</span></span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-desc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; userInfo.nickName &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>退出登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapState<span class="token punctuation">,</span> mapActions <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"my-login"</span><span class="token punctuation">,</span>
	computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"token"</span><span class="token punctuation">,</span> <span class="token string">"userInfo"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"login"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="用户登录-实现退出登录功能"><a href="#用户登录-实现退出登录功能" class="headerlink" title="用户登录 - 实现退出登录功能"></a>用户登录 - 实现退出登录功能</h2><p><strong><code>store/modules/user.js</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        <span class="token comment">/**
         * 删除 token
         */</span>
        <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>token <span class="token operator">=</span> <span class="token string">''</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/saveToToken'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">/**
         * 删除用户信息
         */</span>
        <span class="token function">removeUserInfo</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/saveToUserInfo'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// actions中完成异步操作</span>
    actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        <span class="token comment">/**
         * 退出登录
         */</span>
        <span class="token function">logout</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/removeToken'</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'user/removeUserInfo'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p><strong><code>my-login.vue</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
		<span class="token comment">&lt;!-- 用户登录 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar avatar-img<span class="token punctuation">"</span></span>
				<span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userInfo.avatarUrl<span class="token punctuation">"</span></span>
				<span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scaleToFill<span class="token punctuation">"</span></span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-desc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; userInfo.nickName &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onLogoutClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				退出登录
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapState<span class="token punctuation">,</span> mapActions <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"token"</span><span class="token punctuation">,</span> <span class="token string">"userInfo"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 退出登录的点击事件
		 */</span>
		<span class="token function">onLogoutClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"提示"</span><span class="token punctuation">,</span>
				content<span class="token operator">:</span> <span class="token string">"退出将无法同步数据哦~~"</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> confirm<span class="token punctuation">,</span> cancel <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
						<span class="token comment">// 调用退出登录的 action</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">&#125;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="用户登录-判断用户登录状态"><a href="#用户登录-判断用户登录状态" class="headerlink" title="用户登录 - 判断用户登录状态"></a>用户登录 - 判断用户登录状态</h2><p>截止到目前为止， <strong>用户登录</strong> 的功能其实就已经全部构建完毕了。</p>
<p>接下来我们就需要实现：</p>
<ul>
<li>关注用户</li>
<li>文章点赞</li>
<li>文章收藏</li>
<li>文章评论</li>
</ul>
<p>这四个对应的功能。</p>
<p>之前我们说过，想要实现这四个功能， 那么需要有一个前提条件就是：<strong>当前用户已登录。</strong></p>
<p>所以说，我们就需要在用户使用这四个功能之前，来判断用户的登录状态。</p>
<p>也就是说，在 <strong>用户登录功能完成之后</strong>，我们其实还不可以立刻着手这四个功能的开发，我们还需要进行一步操作，那就是 <strong>判断用户的登录状态！</strong></p>
<p>想要判断用户的登录状态，我们依然需要在 <code>vuex</code> 中进行：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        <span class="token comment">/**
         * 进行登录判定
         */</span>
        <span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>state<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token comment">// TODO：如果用户未登录，需要引导用户进入登录页面</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="用户登录-新建登录页面，处理当前场景"><a href="#用户登录-新建登录页面，处理当前场景" class="headerlink" title="用户登录 - 新建登录页面，处理当前场景"></a>用户登录 - 新建登录页面，处理当前场景</h2><p>开篇的时候，我们说过，对于 <strong>登录</strong> 来说，包含有两个入口：</p>
<ol>
<li>在 《我的页面》中</li>
<li>在调用需要登录权限的功能时</li>
</ol>
<p>那么此时，就是使用到第二个场景的时候了。</p>
<p>我们创建一个分包，叫做 <code>login-page</code>，在这个页面中，导入 <code>my-login</code> 组件：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-login</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-login</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p>进行登录判定，当用户未登录时，进入login-page 页面：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        <span class="token comment">/**
         * 进行登录判定
         */</span>
        <span class="token keyword">async</span> <span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>state<span class="token punctuation">.</span>token<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token comment">// TODO：如果用户未登录，需要引导用户进入登录页面</span>
            <span class="token comment">// 此处要用await，因为uni.showModal 是异步操作，我们要将其变为同步</span>
            <span class="token keyword">const</span> <span class="token punctuation">[</span>error<span class="token punctuation">,</span> res<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> uni<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                title<span class="token operator">:</span> <span class="token string">'登录之后才可以进行后续操作'</span><span class="token punctuation">,</span>
                content<span class="token operator">:</span> <span class="token string">'立即跳转到登录页面？(登录后会自动返回当前页面)'</span><span class="token punctuation">,</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> cancel<span class="token punctuation">,</span> confirm <span class="token punctuation">&#125;</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> url<span class="token operator">:</span> <span class="token string">'/subpkg/pages/login-page/login-page'</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>

            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在用户点击关注时，调用登录判定方法：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- 关注按钮 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onFollowClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        关注
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 关注用户的点击事件
		 */</span>
		<span class="token keyword">async</span> <span class="token function">onFollowClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token comment">// 用户未登录</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="用户登录-监听登录成功的状态，返回之前页面"><a href="#用户登录-监听登录成功的状态，返回之前页面" class="headerlink" title="用户登录 - 监听登录成功的状态，返回之前页面"></a>用户登录 - 监听登录成功的状态，返回之前页面</h2><p>在上一节，我们已经完成了 <strong>在调用需要登录权限的功能时，进入登录页面</strong> ，但是当我们登录完成之后，我们 <strong>还需要返回之前页面</strong>，因为只有这样才能完成我们的功能闭环，所以在这一小节中，我们就去完成这一块的功能：</p>
<p><code>my-login</code>：在登录成功后，发送事件</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 展示加载框</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取用户信息</span>
			uni<span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				desc<span class="token operator">:</span> <span class="token string">"登录后可同步数据"</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token comment">// 调用登录接口</span>
                      <span class="token comment">// 注意此处需要同步操作，确保登录成功</span>
					<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 登录成功，发送事件</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"onLoginSuccess"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
						title<span class="token operator">:</span> <span class="token string">"授权已取消"</span><span class="token punctuation">,</span>
						icon<span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>
						mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 关闭加载</span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token operator">...</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>在 **<code>login-page</code>**中定义事件，用于跳转页面：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-login</span> <span class="token attr-name">@onLoginSuccess</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onLoginSuccess<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-login</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 用户登录成功的事件回调
		 */</span>
		<span class="token function">onLoginSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			uni<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> delta<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="用户登录-处理登录时无-loading-的-bug"><a href="#用户登录-处理登录时无-loading-的-bug" class="headerlink" title="用户登录 - 处理登录时无 loading 的 bug"></a>用户登录 - 处理登录时无 loading 的 bug</h2><p>原本的写法：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 展示加载框</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取用户信息</span>
			uni<span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				desc<span class="token operator">:</span> <span class="token string">"登录后可同步数据"</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token comment">// 调用登录接口</span>
					<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 登录成功，发送事件</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"onLoginSuccess"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
						title<span class="token operator">:</span> <span class="token string">"授权已取消"</span><span class="token punctuation">,</span>
						icon<span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>
						mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 关闭加载</span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<div class="danger">

<blockquote>
<p>由于uni.getUserProfile() 是一个异步的方法，所以uni.showLoading和uni.hideLoading会连续执行，导致我们无法看出效果。</p>
</blockquote>
</div>

<p>修改后的写法：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"login"</span><span class="token punctuation">,</span> <span class="token string">"logout"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 微信一键登录点击事件
		 */</span>
		<span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 展示加载框</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 获取用户信息</span>
			uni<span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				desc<span class="token operator">:</span> <span class="token string">"登录后可同步数据"</span><span class="token punctuation">,</span>
				<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token comment">// 调用登录接口</span>
					<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// 登录成功，发送事件</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"onLoginSuccess"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
						title<span class="token operator">:</span> <span class="token string">"授权已取消"</span><span class="token punctuation">,</span>
						icon<span class="token operator">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span>
						mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
					<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
				<span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token comment">// 关闭加载</span>
					uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<blockquote>
<p>此种写法，可以保证请求完成后再调用 uni.hideLoading() ，就可以看到loading的效果了。</p>
</blockquote>
<h2 id="文章操作-关注用户"><a href="#文章操作-关注用户" class="headerlink" title="文章操作 - 关注用户"></a>文章操作 - 关注用户</h2><p>在彻底完成了 <strong>登录</strong> 相关的内容之后，接下来就可以回过头去实现这四个功能了。</p>
<p>首先我们先去实现 <strong>关注用户</strong> 的功能：</p>
<p>定义 <code>api</code> 接口：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 关注用户
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">userFollow</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/user/follow'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>关注用户接口需要传递 <code>token</code> 请求头，所以我们可以在 <code>utils/request.js</code> 中，传递当前的 <code>token</code>:</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'../store'</span>

<span class="token keyword">function</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> method <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 通过 uni.request 发起网络请求</span>
        uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token operator">...</span>
            header<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
                Authorization<span class="token operator">:</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> request</code></pre>

<p>在 <code>blog-detail</code> 中调用 接口：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 文章内容区 --></span>
			<span class="token comment">&lt;!-- 由于获取文章内容是异步的，此处确保文章有内容在渲染，否则会报错 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                ...
						<span class="token comment">&lt;!-- 关注按钮 --></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
							<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>follow<span class="token punctuation">"</span></span>
							<span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span>
							<span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onFollowClick<span class="token punctuation">"</span></span>
							<span class="token attr-name">:loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isFollowLoading<span class="token punctuation">"</span></span>
							<span class="token attr-name">:type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData.isFollow ? <span class="token punctuation">'</span>primary<span class="token punctuation">'</span> : <span class="token punctuation">'</span>default<span class="token punctuation">'</span><span class="token punctuation">"</span></span>
						<span class="token punctuation">></span></span>
							&#123;&#123; articleData.isFollow ? "已关注" : "关注" &#125;&#125;
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> userFollow <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/user"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
    		<span class="token operator">...</span>
			<span class="token comment">// 关注用户的 loading</span>
			isFollowLoading<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 关注用户的点击事件
		 */</span>
		<span class="token keyword">async</span> <span class="token function">onFollowClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token comment">// 用户未登录</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token comment">// 关注用户接口</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isFollowLoading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token keyword">await</span> <span class="token function">userFollow</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				author<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>author<span class="token punctuation">,</span>
				isFollow<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isFollow<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 修改用户数据</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isFollow <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isFollow<span class="token punctuation">;</span>
			<span class="token comment">// 关闭loading</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isFollowLoading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="文章操作-处理发表评论的-UI"><a href="#文章操作-处理发表评论的-UI" class="headerlink" title="文章操作 - 处理发表评论的 UI"></a>文章操作 - 处理发表评论的 UI</h2><p>监听 <code>article-operate</code> 中的 输入框点击事件：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            ...
			<span class="token comment">&lt;!-- 底部功能区 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-operate</span> <span class="token attr-name">@commitClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-operate</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 点击发表评论
		 */</span>
		<span class="token function">onCommit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>在 article-operate 中触发点击事件：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operator-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 输入框 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-box<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommitClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-search</span>
				<span class="token attr-name">placeholderText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>评论一句，前排打call...<span class="token punctuation">"</span></span>
				<span class="token attr-name">:config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
					height: 28,
					backgroundColor: <span class="token punctuation">'</span>#eeedf4<span class="token punctuation">'</span>,
					icon: <span class="token punctuation">'</span>/static/images/input-icon.png<span class="token punctuation">'</span>,
					textColor: <span class="token punctuation">'</span>#a6a5ab<span class="token punctuation">'</span>,
					border: <span class="token punctuation">'</span>none<span class="token punctuation">'</span>,
				&#125;<span class="token punctuation">"</span></span>
			<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-search</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
        ...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * my-search 点击事件
		 */</span>
		<span class="token keyword">async</span> <span class="token function">onCommitClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 因为发表评论需要在用户登录之后进行</span>
			<span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"commitClick"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>


<p>新建 **<code>article-comment-commit</code>**组件：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-easyinput</span>
			<span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value<span class="token punctuation">"</span></span>
			<span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textarea<span class="token punctuation">"</span></span>
			<span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>说点什么...<span class="token punctuation">"</span></span>
			<span class="token attr-name">:maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span>
			<span class="token attr-name">:inputBorder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
		<span class="token punctuation">/></span></span>
		<span class="token comment">&lt;!-- 此处button会自动置于uni-easyinput 的右下方 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
			<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>commit<span class="token punctuation">"</span></span>
			<span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span>
			<span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!value<span class="token punctuation">"</span></span>
			<span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span>
			<span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onBtnClick<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			发送
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"article-comment-commit"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            value<span class="token operator">:</span><span class="token string">''</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 发送按钮点击事件
		 */</span>
		<span class="token function">onBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.comment-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> $uni-bg-color<span class="token punctuation">;</span>
	<span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
	<span class="token property">padding</span><span class="token punctuation">:</span> $uni-spacing-row-base<span class="token punctuation">;</span>
	<span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>
<p>在blog-detail 中定义弹出层：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            ...
			<span class="token comment">&lt;!-- 输入评论的 popup --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-popup</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popup<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-commit</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-commit</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-popup</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 点击发表评论
		 */</span>
		<span class="token function">onCommit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 通过调用 popup 实例的方法，进行弹出层的弹出</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="文章操作-处理评论框的显示问题"><a href="#文章操作-处理评论框的显示问题" class="headerlink" title="文章操作 - 处理评论框的显示问题"></a>文章操作 - 处理评论框的显示问题</h2><p>现在评论框已经可以显示出来了，但是目前 <strong>评论框的显示存在两个问题：</strong></p>
<ol>
<li>输入内容之后，关闭评论框，再次展示评论框时，之前输入的内容依然存在</li>
<li>在真机中，软键盘会遮挡评论框的展示</li>
</ol>
<p><strong>1. 输入内容之后，关闭评论框，再次展示评论框时，之前输入的内容依然存在：</strong></p>
<p><strong>原因：</strong></p>
<p>当 <code>popup</code> 关闭时，<code>article-comment-commit</code> 组件 并未销毁，依然存在</p>
<p><strong>解决方案：</strong></p>
<p>监听 <code>popup</code> 的关闭事件，通过 <code>v-if</code> 控制 <code>article-comment-commit</code> 组件的销毁</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            ...
			<span class="token comment">&lt;!-- 输入评论的 popup --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-popup</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popup<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommitPopupChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-commit</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShowCommit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-commit</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-popup</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
            <span class="token operator">...</span>
			<span class="token comment">// popup 的显示状态</span>
			isShowCommit<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 发布评论的 propup 切换事件
		 */</span>
		<span class="token function">onCommitPopupChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 修改对应的标记，当 popup 关闭的时候，为了动画的平顺，进行延迟的处理。（否则关闭动画会消失）</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>show<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>isShowCommit <span class="token operator">=</span> e<span class="token punctuation">.</span>show<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>isShowCommit <span class="token operator">=</span> e<span class="token punctuation">.</span>show<span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong>2. 在真机中，软键盘会遮挡评论框的展示</strong></p>
<p><strong>原因：</strong></p>
<p>软键盘弹出，占用了底部空间</p>
<p><strong>解决方案：</strong></p>
<p>检测软键盘的弹出事件，动态修改  <code>article-comment-commit</code> 组件的位置</p>
<p><code>article-comment-commit</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-container<span class="token punctuation">"</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; bottom: bottom + <span class="token punctuation">'</span>px<span class="token punctuation">'</span> &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-easyinput</span>
			<span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>value<span class="token punctuation">"</span></span>
			<span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textarea<span class="token punctuation">"</span></span>
			<span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>说点什么...<span class="token punctuation">"</span></span>
			<span class="token attr-name">:maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span>
			<span class="token attr-name">:inputBorder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span>
		<span class="token punctuation">/></span></span>
        ...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			value<span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
			bottom<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// 检测软键盘的变化</span>
		uni<span class="token punctuation">.</span><span class="token function">onKeyboardHeightChange</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">&#123;</span> height <span class="token punctuation">&#125;</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> <span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>bottom <span class="token operator">=</span> height<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="文章操作-发表评论"><a href="#文章操作-发表评论" class="headerlink" title="文章操作 - 发表评论"></a>文章操作 - 发表评论</h2><p>在一切准备就绪之后，最后就可以实现 发表评论 的功能了。</p>
<p>在 <code>api/user</code> 中，定义发表评论的接口：</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 发表评论
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">userArticleComment</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/user/article/comment'</span><span class="token punctuation">,</span>
        method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在 <code>article-comment-commit</code> 中调用接口，发表评论：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	...
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-container<span class="token punctuation">"</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123; bottom: bottom + <span class="token punctuation">'</span>px<span class="token punctuation">'</span> &#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
			<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>commit<span class="token punctuation">"</span></span>
			<span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span>
			<span class="token attr-name">:disabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!value<span class="token punctuation">"</span></span>
			<span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span>
			<span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onBtnClick<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			发送
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> userArticleComment <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/user"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 发送按钮点击事件
		 */</span>
		<span class="token keyword">async</span> <span class="token function">onBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 展示加载框</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 调用接口</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">userArticleComment</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				articleId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleId<span class="token punctuation">,</span>
				content<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 发表评论完成之后，给用户一个提示</span>
			<span class="token comment">// 此处不用写关闭，在request的complete中已经写了统一关闭</span>
			uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"发表成功"</span><span class="token punctuation">,</span>
				icon<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
				mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 关闭 popup</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>在 <code>blog-detail</code> 中传递 <code>id</code> ，处理评论成功之后的操作：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            ...
			<span class="token comment">&lt;!-- 输入评论的 popup --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-popup</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popup<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommitPopupChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-commit</span>
					<span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShowCommit<span class="token punctuation">"</span></span>
					<span class="token attr-name">:articleId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleId<span class="token punctuation">"</span></span>
					<span class="token attr-name">@success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSendSuccess<span class="token punctuation">"</span></span>
				<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-commit</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-popup</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 评论发表成功
		 */</span>
		<span class="token function">onSendSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 关闭弹出层</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token comment">// 下面这行不写也不影响。因为调用了popup.close()后，会自动清空输入框内容</span>
	        <span class="token keyword">this</span><span class="token punctuation">.</span>isShowCommit <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="文章操作-回显评论数据"><a href="#文章操作-回显评论数据" class="headerlink" title="文章操作 - 回显评论数据"></a>文章操作 - 回显评论数据</h2><p><code>article-comment-commit</code> ：评论发布成功，传递评论数据对象</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> userArticleComment <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/user"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 发送按钮点击事件
		 */</span>
		<span class="token keyword">async</span> <span class="token function">onBtnClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 展示加载框</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 调用接口</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">userArticleComment</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				articleId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleId<span class="token punctuation">,</span>
				content<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 发表评论完成之后，给用户一个提示</span>
			<span class="token comment">// 此处不用写关闭，在request的complete中已经写了统一关闭</span>
			uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"发表成功"</span><span class="token punctuation">,</span>
				icon<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
				mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 关闭 popup，传递回显数据</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>在blog-detail中处理对应的success事件</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	...
			<span class="token comment">&lt;!-- 输入评论的 popup --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-popup</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popup<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommitPopupChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-commit</span>
					<span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShowCommit<span class="token punctuation">"</span></span>
					<span class="token attr-name">:articleId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleId<span class="token punctuation">"</span></span>
					<span class="token attr-name">@success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSendSuccess<span class="token punctuation">"</span></span>
				<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-commit</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-popup</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 评论发表成功
		 */</span>
		<span class="token function">onSendSuccess</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 关闭弹出层</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isShowCommit <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token comment">// 为 commentList 增加数据</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>mescrollItem<span class="token punctuation">.</span><span class="token function">addCommentList</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>在 **<code>article-comment-list</code>**中定义对应的增加数据的方法。</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 为 commentList 增加一个评论
		 */</span>
		<span class="token function">addCommentList</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>commentList<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="文章操作-点赞功能实现"><a href="#文章操作-点赞功能实现" class="headerlink" title="文章操作 - 点赞功能实现"></a>文章操作 - 点赞功能实现</h2><ol>
<li>定义对应的请求方法</li>
</ol>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">/**
 * 点赞功能
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">userPraise</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/user/praise'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>



<ol start="2">
<li>在 **<code>article-praise</code>**中定义对应的点击事件，并发送请求，将请求得到的结果传递给 **<code>article-operate</code>**，并由 <strong><code>article-operate</code></strong> 传给 **<code>blog-detail</code>**，在 <strong><code>blog-detail</code></strong> 中将 接收到的属性赋值。</li>
</ol>
<p><strong><code>blog-detail</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 文章内容区 --></span>
			<span class="token comment">&lt;!-- 由于获取文章内容是异步的，此处确保文章有内容在渲染，否则会报错 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                ...
				<span class="token comment">&lt;!-- 底部功能区 --></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-operate</span>
					<span class="token attr-name">@commitClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommit<span class="token punctuation">"</span></span>
					<span class="token attr-name">:articleData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span>
					<span class="token attr-name">@changePraise</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChangePraise<span class="token punctuation">"</span></span>
					<span class="token attr-name">@changeCollect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChangeCollect<span class="token punctuation">"</span></span>
				<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-operate</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 点赞或取消点赞成功
		 */</span>
		<span class="token function">onChangePraise</span><span class="token punctuation">(</span><span class="token parameter">isPraise</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isPraise <span class="token operator">=</span> isPraise<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>article-operate</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operator-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 点赞 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-praise</span>
				<span class="token attr-name">:articleData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span>
				<span class="token attr-name">@changePraise</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$emit(<span class="token punctuation">'</span>changePraise<span class="token punctuation">'</span>, !articleData.isPraise)<span class="token punctuation">"</span></span>
			<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-praise</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapActions <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		articleData<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
			required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>article-praise</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>praise-box<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>praiseOnclick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>praiseImg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>点赞<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> userPraise <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/user"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapActions <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"article-praise"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		articleData<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
			required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token function">praiseImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>articleData <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isPraise<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">return</span> <span class="token string">"/static/images/praise.png"</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">return</span> <span class="token string">"/static/images/un-praise.png"</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"isLogin"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">async</span> <span class="token function">praiseOnclick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">await</span> <span class="token function">userPraise</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				articleId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>articleId<span class="token punctuation">,</span>
				isPraise<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isPraise<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"changePraise"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isPraise<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>



<h2 id="文章操作-收藏功能实现"><a href="#文章操作-收藏功能实现" class="headerlink" title="文章操作 - 收藏功能实现"></a>文章操作 - 收藏功能实现</h2><ol>
<li>定义请求方法</li>
</ol>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 收藏功能
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">userCollect</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/user/collect'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<ol start="2">
<li>具体实现</li>
</ol>
<p><strong><code>blog-detail</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>54px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 文章内容区 --></span>
			<span class="token comment">&lt;!-- 由于获取文章内容是异步的，此处确保文章有内容在渲染，否则会报错 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                ...
				<span class="token comment">&lt;!-- 底部功能区 --></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-operate</span>
					<span class="token attr-name">@commitClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommit<span class="token punctuation">"</span></span>
					<span class="token attr-name">:articleData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span>
					<span class="token attr-name">@changePraise</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChangePraise<span class="token punctuation">"</span></span>
					<span class="token attr-name">@changeCollect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onChangeCollect<span class="token punctuation">"</span></span>
				<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-operate</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 收藏或取消收藏成功
		 */</span>
		<span class="token function">onChangeCollect</span><span class="token punctuation">(</span><span class="token parameter">isCollect</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isCollect <span class="token operator">=</span> isCollect<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>article-operate</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operator-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 收藏 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-collect</span>
				<span class="token attr-name">:articleData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>articleData<span class="token punctuation">"</span></span>
				<span class="token attr-name">@changeCollect</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$emit(<span class="token punctuation">'</span>changeCollect<span class="token punctuation">'</span>, !articleData.isCollect)<span class="token punctuation">"</span></span>
			<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-collect</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		articleData<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
			required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p><strong><code>article-collect</code></strong></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>collect-box<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCollectClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>img<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>collectImg<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> userCollect <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/user"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapActions <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	name<span class="token operator">:</span> <span class="token string">"article-collect"</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		articleData<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> Object<span class="token punctuation">,</span>
			required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token function">collectImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleData <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isCollect
				<span class="token operator">?</span> <span class="token string">"/static/images/collect.png"</span>
				<span class="token operator">:</span> <span class="token string">"/static/images/un-collect.png"</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"isLogin"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token keyword">async</span> <span class="token function">onCollectClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"加载中"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">await</span> <span class="token function">userCollect</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				articleId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>articleId<span class="token punctuation">,</span>
				isCollect<span class="token operator">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isCollect<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"changeCollect"</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>articleData<span class="token punctuation">.</span>isCollect<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播列表-获取热播列表数据"><a href="#热播列表-获取热播列表数据" class="headerlink" title="热播列表 - 获取热播列表数据"></a>热播列表 - 获取热播列表数据</h2><p>定义接口：<code>api/video</code></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">'../utils/request'</span>

<span class="token comment">/**
 * 热播视频列表
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getHotVideoList</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/video/list'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在 <code>hot-video.vue</code> 中获取数据：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getHotVideoList <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/video"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			size<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
			videoList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 获取列表数据
		 */</span>
		<span class="token keyword">async</span> <span class="token function">loadHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				page<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">,</span>
				size<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>videoList <span class="token operator">=</span> res<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播列表-渲染UI结构"><a href="#热播列表-渲染UI结构" class="headerlink" title="热播列表 - 渲染UI结构"></a>热播列表 - 渲染UI结构</h2><p><code>hot-video</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in videoList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-item</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.hot-video-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span> $uni-bg-color-grey<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p><code>hot-video-item</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-item-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
				<span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myVideo<span class="token punctuation">"</span></span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video<span class="token punctuation">"</span></span>
				<span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data.play_url<span class="token punctuation">"</span></span>
				<span class="token attr-name">enable-danmu</span>
				<span class="token attr-name">danmu-btn</span>
			<span class="token punctuation">/></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-info</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-info</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.hot-video-item-container</span> <span class="token punctuation">&#123;</span>
	<span class="token property">margin-bottom</span><span class="token punctuation">:</span> $uni-spacing-col-lg<span class="token punctuation">;</span>
	<span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
	<span class="token selector">.video</span> <span class="token punctuation">&#123;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 230px<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<p><code>hot-video-info</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-info-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.title &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-info<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar<span class="token punctuation">"</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data.poster_small<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>author-txt<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.source_name &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>barrage-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-icons</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>barrage-icon<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videocam<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>barrage-num<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; data.fmplaycnt &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.hot-video-info-container</span> <span class="token punctuation">&#123;</span>
	<span class="token selector">.video-title</span> <span class="token punctuation">&#123;</span>
		<span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
		<span class="token property">top</span><span class="token punctuation">:</span> $uni-spacing-col-big<span class="token punctuation">;</span>
		<span class="token property">left</span><span class="token punctuation">:</span> $uni-spacing-row-lg<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color-inverse<span class="token punctuation">;</span>
		<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-lg<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span>
	<span class="token selector">.video-info</span> <span class="token punctuation">&#123;</span>
		<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
		<span class="token property">justify-content</span><span class="token punctuation">:</span> space-between<span class="token punctuation">;</span>
		<span class="token property">background-color</span><span class="token punctuation">:</span> $uni-bg-color<span class="token punctuation">;</span>
		<span class="token property">padding</span><span class="token punctuation">:</span> $uni-spacing-col-sm $uni-spacing-row-lg<span class="token punctuation">;</span>
		<span class="token selector">.author-box</span> <span class="token punctuation">&#123;</span>
			<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
			<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
			<span class="token selector">.author-txt</span> <span class="token punctuation">&#123;</span>
				<span class="token property">margin-left</span><span class="token punctuation">:</span> $uni-spacing-row-sm<span class="token punctuation">;</span>
				<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-base<span class="token punctuation">;</span>
				<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
				<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
		<span class="token selector">.barrage-box</span> <span class="token punctuation">&#123;</span>
			<span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
			<span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
			<span class="token selector">.barrage-num</span> <span class="token punctuation">&#123;</span>
				<span class="token property">margin-left</span><span class="token punctuation">:</span> $uni-spacing-row-sm<span class="token punctuation">;</span>
				<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-sm<span class="token punctuation">;</span>
				<span class="token property">color</span><span class="token punctuation">:</span> $uni-text-color<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播列表-列表的下拉刷新与上拉加载"><a href="#热播列表-列表的下拉刷新与上拉加载" class="headerlink" title="热播列表 - 列表的下拉刷新与上拉加载"></a>热播列表 - 列表的下拉刷新与上拉加载</h2><p><code>hot-video</code>： 在页面中使用 <code>mescroll</code> 比较简单</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 1.导入 mescroll-body --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mescroll-body</span>
			<span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>meScrollRef<span class="token punctuation">"</span></span>
			<span class="token attr-name">@init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollInit<span class="token punctuation">"</span></span>
			<span class="token attr-name">@down</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>downCallback<span class="token punctuation">"</span></span>
			<span class="token attr-name">@up</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upCallback<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in videoList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-item</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mescroll-body</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 2.导入 mixin</span>
<span class="token keyword">import</span> MescrollMixin <span class="token keyword">from</span> <span class="token string">"uni_modules/mescroll-uni/components/mescroll-uni/mescroll-mixins"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getHotVideoList <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/video"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token comment">// 3. 注册 mixin</span>
	mixins<span class="token operator">:</span> <span class="token punctuation">[</span>MescrollMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
			size<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
			videoList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			<span class="token comment">// 是否首次加载</span>
			isInit<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token comment">// 实例</span>
			mescroll<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// this.loadHotVideoList();</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>mescroll <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>meScrollRef<span class="token punctuation">.</span>mescroll<span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">/**
		 * 获取列表数据
		 */</span>
		<span class="token keyword">async</span> <span class="token function">loadHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				page<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>page<span class="token punctuation">,</span>
				size<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>size<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 判断是否为第一页的数据</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>videoList <span class="token operator">=</span> res<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>videoList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>videoList<span class="token punctuation">,</span> <span class="token operator">...</span>res<span class="token punctuation">.</span>list<span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * List 组件首次加载
		 */</span>
		<span class="token keyword">async</span> <span class="token function">mescrollInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isInit <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token comment">// 结束上拉加载 &amp;&amp; 下拉刷新</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>mescroll<span class="token punctuation">.</span><span class="token function">endSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 下拉刷新的回调
		 */</span>
		<span class="token keyword">async</span> <span class="token function">downCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isInit<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 结束上拉加载 &amp;&amp; 下拉刷新</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>mescroll<span class="token punctuation">.</span><span class="token function">endSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * 上拉加载的回调
		 */</span>
		<span class="token keyword">async</span> <span class="token function">upCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isInit<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>page <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadHotVideoList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 结束上拉加载 &amp;&amp; 下拉刷新</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>mescroll<span class="token punctuation">.</span><span class="token function">endSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播列表-热播列表-点击进入详情页"><a href="#热播列表-热播列表-点击进入详情页" class="headerlink" title="热播列表 - 热播列表 - 点击进入详情页"></a>热播列表 - 热播列表 - 点击进入详情页</h2><p>创建新的分包页面 <code>video-detail</code></p>
<p>为 <code>hot-video-item</code> 添加点击事件：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-item-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$emit(<span class="token punctuation">'</span>click<span class="token punctuation">'</span>)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-info</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-info</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p>在 <code>hot-video</code> 中处理点击事件：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in videoList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onItemClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-item</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mescroll-body</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * item 点击事件
		 */</span>
		<span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> url<span class="token operator">:</span> <span class="token string">"/subpkg/pages/video-detail/video-detail"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播详情-渲染详情页面的视频组件"><a href="#热播详情-渲染详情页面的视频组件" class="headerlink" title="热播详情 - 渲染详情页面的视频组件"></a>热播详情 - 渲染详情页面的视频组件</h2><p>因为在 <code>Uniapp</code> 中无法直接通过 <code>navigateTo</code> 方法，传递一个复杂的对象。</p>
<p>在为了不影响 <strong>简洁数据流</strong> 的前提下，我们通过 <code>vuex</code> 来保存当前用户点击的 <code>video</code> 数据。</p>
<p>创建 <strong><code>store/modules/video</code></strong> 模块</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 独立命名空间</span>
    namespaced<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        videoData<span class="token operator">:</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    mutations<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token function">setVideoData</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> videoData</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            state<span class="token punctuation">.</span>videoData <span class="token operator">=</span> videoData
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>在 <strong><code>index.js</code></strong> 中注册该模块</p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> video <span class="token keyword">from</span> <span class="token string">'./modules/video'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. 创建 store 实例</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 模块</span>
    modules<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
        video
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span></code></pre>

<p>在 <strong><code>hot-video-item</code></strong> 中触发事件</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-item-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$emit(<span class="token punctuation">'</span>click<span class="token punctuation">'</span>, data)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-info</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-info</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<p>在 <strong><code>hot-video</code></strong> 中注册事件，将 传递过来的数据存储到 vuex 中</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hot-video-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mescroll-body</span>
			<span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>meScrollRef<span class="token punctuation">"</span></span>
			<span class="token attr-name">@init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mescrollInit<span class="token punctuation">"</span></span>
			<span class="token attr-name">@down</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>downCallback<span class="token punctuation">"</span></span>
			<span class="token attr-name">@up</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upCallback<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in videoList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onItemClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-item</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mescroll-body</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapMutations <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapMutations</span><span class="token punctuation">(</span><span class="token string">"video"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"setVideoData"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * item 点击事件
		 */</span>
		<span class="token function">onItemClick</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setVideoData</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
			uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> url<span class="token operator">:</span> <span class="token string">"/subpkg/pages/video-detail/video-detail"</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
.hot-video-container &#123;</code></pre>

<p>在 <strong><code>video-detail</code></strong> 中获取到vuex的数据，并渲染：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
				<span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myVideo<span class="token punctuation">"</span></span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video<span class="token punctuation">"</span></span>
				<span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoData.play_url<span class="token punctuation">"</span></span>
				<span class="token attr-name">enable-danmu</span>
				<span class="token attr-name">danmu-btn</span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-info</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-info</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> mapState <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vuex"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	computed<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		<span class="token operator">...</span><span class="token function">mapState</span><span class="token punctuation">(</span><span class="token string">"video"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"videoData"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播详情-展示视频弹幕"><a href="#热播详情-展示视频弹幕" class="headerlink" title="热播详情 - 展示视频弹幕"></a>热播详情 - 展示视频弹幕</h2><p>想要展示视频弹幕，那么首先我们需要获取到 <strong>视频弹幕数据:</strong></p>
<p><strong><code>api/video</code></strong></p>
<pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/**
 * 获取视频弹幕列表
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">getVideoDanmuList</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        url<span class="token operator">:</span> <span class="token string">'/video/danmu'</span><span class="token punctuation">,</span>
        data
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>然后在 <strong><code>video-detail</code></strong>  中进行请求，并将请求到的数据配置到 video 组件上：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
				<span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myVideo<span class="token punctuation">"</span></span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video<span class="token punctuation">"</span></span>
				<span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoData.play_url<span class="token punctuation">"</span></span>
				<span class="token attr-name">:danmu-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>danmuList<span class="token punctuation">"</span></span>
				<span class="token attr-name">enable-danmu</span>
				<span class="token attr-name">danmu-btn</span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-info</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-info</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getVideoDanmuList <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"api/video"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	<span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadVideoDanMuList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 获取弹幕数据
		 */</span>
		<span class="token keyword">async</span> <span class="token function">loadVideoDanMuList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getVideoDanmuList</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				videoId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoData<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>danmuList <span class="token operator">=</span> res<span class="token punctuation">.</span>list<span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播详情-渲染全部弹幕模块"><a href="#热播详情-渲染全部弹幕模块" class="headerlink" title="热播详情 - 渲染全部弹幕模块"></a>热播详情 - 渲染全部弹幕模块</h2><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
		<span class="token comment">&lt;!-- 弹幕模块 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>danmu-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token comment">&lt;!-- 弹幕列表 --></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-cotainer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>all-comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>全部弹幕<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in danmuList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-item</span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scss<span class="token punctuation">"</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token selector">.video-detail-container</span> <span class="token punctuation">&#123;</span>
    <span class="token selector">...
	.danmu-box</span> <span class="token punctuation">&#123;</span>
		<span class="token property">border-top</span><span class="token punctuation">:</span> $uni-spacing-col-sm solid $uni-bg-color-grey<span class="token punctuation">;</span>
		<span class="token property">margin-bottom</span><span class="token punctuation">:</span> 36px<span class="token punctuation">;</span>
		<span class="token selector">.comment-container</span> <span class="token punctuation">&#123;</span>
			<span class="token property">padding</span><span class="token punctuation">:</span> $uni-spacing-col-lg $uni-spacing-row-lg<span class="token punctuation">;</span>
			<span class="token selector">.all-comment-title</span> <span class="token punctuation">&#123;</span>
				<span class="token property">font-size</span><span class="token punctuation">:</span> $uni-font-size-lg<span class="token punctuation">;</span>
				<span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播详情-渲染底部功能区"><a href="#热播详情-渲染底部功能区" class="headerlink" title="热播详情 - 渲染底部功能区"></a>热播详情 - 渲染底部功能区</h2><p>此处的 <strong>底部功能区</strong> 与 文章详情的底部功能区一样，所以可以复用 <code>article-operate</code> 组件：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
		<span class="token comment">&lt;!-- 底部功能区 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-operate</span>
			<span class="token attr-name">placeHolder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>发个弹幕，开心一下<span class="token punctuation">"</span></span>
			<span class="token attr-name">@commitClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommit<span class="token punctuation">"</span></span>
			<span class="token attr-name">:articleData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#125;<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-operate</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- popup --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-popup</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popup<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommitPopupChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-commit</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShowCommit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-commit</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-popup</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> 
	         <span class="token operator">...</span>
			isShowCommit<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 发送弹幕事件
		 */</span>
		<span class="token function">onCommit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token comment">/**
		 * popup 切换时间
		 */</span>
		<span class="token function">onCommitPopupChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>show<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>isShowCommit <span class="token operator">=</span> e<span class="token punctuation">.</span>show<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>isShowCommit <span class="token operator">=</span> e<span class="token punctuation">.</span>show<span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<p>功能区的 <code>placeholder</code> 与文章详情 <strong>不同</strong> ，可以通过 <code>props</code> 指定：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>operator-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        ...
		<span class="token comment">&lt;!-- 输入框 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-box<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommitClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-search</span>
				<span class="token attr-name">:placeholderText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>placeHolder<span class="token punctuation">"</span></span>
				<span class="token attr-name">:config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;
					height: 28,
					backgroundColor: <span class="token punctuation">'</span>#eeedf4<span class="token punctuation">'</span>,
					icon: <span class="token punctuation">'</span>/static/images/input-icon.png<span class="token punctuation">'</span>,
					textColor: <span class="token punctuation">'</span>#a6a5ab<span class="token punctuation">'</span>,
					border: <span class="token punctuation">'</span>none<span class="token punctuation">'</span>,
				&#125;<span class="token punctuation">"</span></span>
			<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-search</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
	props<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
		placeHolder<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
			type<span class="token operator">:</span> String<span class="token punctuation">,</span>
			<span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">"评论一句，前排打call..."</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token operator">...</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播详情-发布弹幕"><a href="#热播详情-发布弹幕" class="headerlink" title="热播详情 - 发布弹幕"></a>热播详情 - 发布弹幕</h2><p><code>video-detail：</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-detail-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span>
				<span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myVideo<span class="token punctuation">"</span></span>
				<span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>video<span class="token punctuation">"</span></span>
				<span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoData.play_url<span class="token punctuation">"</span></span>
				<span class="token attr-name">:danmu-list</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>danmuList<span class="token punctuation">"</span></span>
				<span class="token attr-name">enable-danmu</span>
				<span class="token attr-name">danmu-btn</span>
			<span class="token punctuation">/></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hot-video-info</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoData<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hot-video-info</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
        ...
		<span class="token comment">&lt;!-- 底部功能区 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-operate</span>
			<span class="token attr-name">placeHolder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>发个弹幕，开心一下<span class="token punctuation">"</span></span>
			<span class="token attr-name">@commitClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommit<span class="token punctuation">"</span></span>
			<span class="token attr-name">:articleData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&#123;&#125;<span class="token punctuation">"</span></span>
		<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-operate</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- popup --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-popup</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>popup<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onCommitPopupChange<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-commit</span>
				<span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isShowCommit<span class="token punctuation">"</span></span>
				<span class="token attr-name">:articleId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>videoData.id<span class="token punctuation">"</span></span>
				<span class="token attr-name">@success</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onSendDanmu<span class="token punctuation">"</span></span>
			<span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article-comment-commit</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-popup</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
			danmuList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
			isShowCommit<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
			<span class="token comment">// 1. 定义 videoContext 变量</span>
			videoContext<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
	<span class="token comment">// 2. 在 onReady中定义该变量</span>
	<span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>videoContext <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createVideoContext</span><span class="token punctuation">(</span><span class="token string">"myVideo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处的 myVideo 为 video 组件的 id</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token operator">...</span>
		<span class="token comment">/**
		 * 发送弹幕成功之后的回调
		 */</span>
		<span class="token function">onSendDanmu</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token comment">// 3. 调用 sendDanmu 方法发送弹幕</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>videoContext<span class="token punctuation">.</span><span class="token function">sendDanmu</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				text<span class="token operator">:</span> data<span class="token punctuation">.</span>info<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
				color<span class="token operator">:</span> <span class="token string">"#00ff00"</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 4.添加弹幕到弹幕列表</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>danmuList<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 5.关闭 popup</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>popup<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">// 6.关闭 popup 标记</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>isShowCommit <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
			<span class="token comment">// 7. 提示用户</span>
			uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
				title<span class="token operator">:</span> <span class="token string">"发表成功"</span><span class="token punctuation">,</span>
				icon<span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
				mask<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播详情-定义弹幕的随机颜色值"><a href="#热播详情-定义弹幕的随机颜色值" class="headerlink" title="热播详情 - 定义弹幕的随机颜色值"></a>热播详情 - 定义弹幕的随机颜色值</h2><p>在 <code>utils</code> 下创建一个新的 <code>js</code> 文件，用来定义 <strong>随机颜色方法</strong>：</p>
<p><code>utils/index.js</code></p>
<pre class="language-js" data-language="js"><code class="language-js"><span class="token comment">/**
 * 返回随机色值
 */</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> <span class="token function-variable function">getRandomColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> rgb <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> color <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> color<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> color <span class="token operator">:</span> color<span class="token punctuation">;</span>
    rgb<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token string">'#'</span> <span class="token operator">+</span> rgb<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</code></pre>

<p>在 <code>video-detail</code> 中使用该方法：</p>
<pre class="language-html" data-language="html"><code class="language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> getRandomColor <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'utils'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token operator">...</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 获取弹幕数据
     */</span>
    <span class="token keyword">async</span> <span class="token function">loadVideoDanmuList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">const</span> <span class="token punctuation">&#123;</span> data<span class="token operator">:</span> res <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getVideoDanmuList</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        videoId<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>videoData<span class="token punctuation">.</span>id
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 定义随机颜色</span>
      res<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
        item<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token function">getRandomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>danmuList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>res<span class="token punctuation">.</span>list<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>commentList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>res<span class="token punctuation">.</span>list<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>
    <span class="token comment">/**
     * 弹幕发布成功之后的回调
     */</span>
    <span class="token function">onSendBarrage</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// 发送弹幕</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>videoContext<span class="token punctuation">.</span><span class="token function">sendDanmu</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        text<span class="token operator">:</span> data<span class="token punctuation">.</span>info<span class="token punctuation">.</span>content<span class="token punctuation">,</span>
        color<span class="token operator">:</span> <span class="token function">getRandomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token operator">...</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="热播详情-处理弹幕列表数据加载动画"><a href="#热播详情-处理弹幕列表数据加载动画" class="headerlink" title="热播详情 - 处理弹幕列表数据加载动画"></a>热播详情 - 处理弹幕列表数据加载动画</h2><p>当弹幕为空的时候，我们需要给用户一个提示。</p>
<p>以此，弹幕的状态可分为三种：</p>
<ol>
<li>数据加载中</li>
<li>无弹幕数据</li>
<li>有弹幕数据</li>
</ol>
<p>那么我们分别对这三种情况进行处理：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>danmu-box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- 加载动画 --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-load-more</span> <span class="token attr-name">status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>loading<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isLoadingComment<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-load-more</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- 无弹幕 --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>empty-data</span> <span class="token attr-name">v-else-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>commentList.length === 0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>empty-data</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- 弹幕列表 --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comment-container<span class="token punctuation">"</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>all-comment-title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>全部弹幕<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in commentList<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article-comment-item</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token operator">...</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
     <span class="token operator">...</span>
      <span class="token comment">// 弹幕列表数据加载中</span>
      isLoadingComment<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">/**
     * 获取弹幕数据
     */</span>
    <span class="token keyword">async</span> <span class="token function">loadVideoDanmuList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token operator">...</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>isLoadingComment <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="uniapp-中的条件编译"><a href="#uniapp-中的条件编译" class="headerlink" title="uniapp 中的条件编译"></a>uniapp 中的条件编译</h2><p>想要搞定适配的功能，那么我们首先需要了解一个东西，那就是：<a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/platform">条件编译</a></p>
<p>我们可以通过：<strong>特殊的注释作为标记，将注释里面的代码编译到不同平台</strong>。</p>
<p>这样的注释主要有两种：</p>
<ol>
<li>以 <code>#ifdef %PLATFORM% </code> 开头，以 <code>#endif</code> 结尾：仅在某平台存在</li>
<li>以 <code>#ifndef %PLATFORM%  </code> 开头，以 <code>#endif</code> 结尾：除了某平台均存在</li>
</ol>
<p>其中 <code>%PLATFORM% </code> 表示 <strong>平台名称</strong></p>
<p>比如说，我们可以在 <code>App.vue</code> 中，写下这样一行代码：</p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
	<span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
		<span class="token comment">// 当项目运行到 H5 端的时候，进行一个打印：当前处于 H5 编译平台</span>
		<span class="token comment">/* #ifdef H5 */</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"当前处于H5编译平台"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">/* #endif */</span>
		<span class="token comment">// 当项目运行到 非H5 端的时候，进行一个打印：当前处于非 H5 编译平台</span>
		<span class="token comment">/* #ifndef H5 */</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"当前处于非H5编译平台"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">/* #endif */</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function-variable function">onShow</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
	<span class="token function-variable function">onHide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
<span class="token comment">/*每个页面公共css */</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
</code></pre>

<h2 id="多平台适配-tabs-置顶效果消失"><a href="#多平台适配-tabs-置顶效果消失" class="headerlink" title="多平台适配 - tabs 置顶效果消失"></a>多平台适配 - <code>tabs</code> 置顶效果消失</h2><h3 id="分析原因"><a href="#分析原因" class="headerlink" title="分析原因"></a>分析原因</h3><p>在控制台中检查 <code>tab-sticky</code> 的，我们可以发现 它的样式指定其实是没有问题的：</p>
<p><img src="/blogs/320d3645/3.jpg" loading="lazy"></p>
<p><code>position: sticky</code> 依然生效，那么问题是出现在哪里呢？</p>
<p>当我们把页面进行滚动之后，然后再控制台查看 <code>tab-sticky</code> 的位置，此时我们就可以发现问题：</p>
<p><img src="/blogs/320d3645/55.jpg" loading="lazy"></p>
<p><code>tab-sticky</code> 虽然吸顶了，但是它的吸顶位置为 <code>top:0</code> 。</p>
<p>这样的效果在 <strong>微信小程序是没有问题的</strong>，但是在 <strong>浏览器端就会被遮挡！</strong></p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>明确了原因之后，想要处理这个问题就很容易了。我们只需要在 <strong>浏览器端调整 <code>top</code> 的位置就可以了。</strong></p>
<h3 id="处理代码"><a href="#处理代码" class="headerlink" title="处理代码"></a>处理代码</h3><p><code>hot.vue</code></p>
<pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">.tab-sticky</span> <span class="token punctuation">&#123;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> -webkit-sticky<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 99<span class="token punctuation">;</span>
  <span class="token comment">/* #ifndef H5 */</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token comment">/* #endif */</span>
  <span class="token comment">/* #ifdef H5 */</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 44px<span class="token punctuation">;</span>
  <span class="token comment">/* #endif */</span>
<span class="token punctuation">&#125;</span></code></pre>

<h2 id="多平台适配-火狐浏览器处理粗滚动条"><a href="#多平台适配-火狐浏览器处理粗滚动条" class="headerlink" title="多平台适配 - 火狐浏览器处理粗滚动条"></a>多平台适配 - 火狐浏览器处理粗滚动条</h2><h3 id="分析原因-1"><a href="#分析原因-1" class="headerlink" title="分析原因"></a>分析原因</h3><p>在浏览器中出现 <strong>粗滚动条</strong> 的原因是因为： <strong>浏览器对滚动条的处理问题</strong>。</p>
<h3 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h3><p>隐藏浏览器滚动条</p>
<h3 id="处理代码-1"><a href="#处理代码-1" class="headerlink" title="处理代码"></a>处理代码</h3><p><code>my-tabs</code></p>
<pre class="language-scss" data-language="scss"><code class="language-scss"><span class="token comment">/* #ifdef H5 */</span>
<span class="token selector">/deep/.uni-scroll-view::-webkit-scrollbar </span><span class="token punctuation">&#123;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">/deep/.uni-scroll-view </span><span class="token punctuation">&#123;</span>
  <span class="token property">scrollbar-width</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/* #endif */</span></code></pre>

<h2 id="多平台适配-ui-错乱-与-文章详情无法展示"><a href="#多平台适配-ui-错乱-与-文章详情无法展示" class="headerlink" title="多平台适配 -  ui 错乱 与 文章详情无法展示"></a>多平台适配 -  <code>ui</code> 错乱 与 文章详情无法展示</h2><h3 id="分析原因-2"><a href="#分析原因-2" class="headerlink" title="分析原因"></a>分析原因</h3><p>在我们刚进入到首页的时候，我们的 <code>ui</code> 是没有任何问题的。但是当我们进入到 <strong>文章详情</strong> 在返回到首页时，我们就会发现：**<code>item</code> 的 <code>ui</code> 变得错乱了** </p>
<p>那么想要去分析这个问题的原因，就需要到 <strong>文章详情</strong> 页面，看一下，看看 <strong>文章详情</strong> 究竟做了什么事情。</p>
<p>在 <strong>文章详情</strong> 中，我们之前使用过 <code>page-meta</code> 来去处理：<strong>微信小程序中文章详情文字过小的问题</strong>。</p>
<p>而现在在 <strong>浏览器端</strong> 之所以出现这些问题，就是因为 <code>page-meta</code> 导致的。</p>
<h3 id="解决方案-2"><a href="#解决方案-2" class="headerlink" title="解决方案"></a>解决方案</h3><p>在 <code>h5</code> 中，不使用 <code>page-mate</code> ，只使用 <code>article-detail.scss</code> 中的 </p>
<pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">html</span> <span class="token punctuation">&#123;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 52px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>即可</p>
<h3 id="处理代码-2"><a href="#处理代码-2" class="headerlink" title="处理代码"></a>处理代码</h3><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- #ifndef H5 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>page-meta</span> <span class="token attr-name">root-font-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>52px<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- #endif --></span>
    ...
    <span class="token comment">&lt;!-- #ifndef H5 --></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>page-meta</span><span class="token punctuation">></span></span>
  <span class="token comment">&lt;!-- #endif --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code></pre>

<h2 id="多平台适配-文章详情样式处理"><a href="#多平台适配-文章详情样式处理" class="headerlink" title="多平台适配 -  文章详情样式处理"></a>多平台适配 -  文章详情样式处理</h2><h3 id="分析原因-3"><a href="#分析原因-3" class="headerlink" title="分析原因"></a>分析原因</h3><p>通过控制台查看，我们可以发现 <code>article-detail.scss</code> 文件的样式并没有生效，出现这个问题的原因，是因为当 <code>uni-app</code> 运行到浏览器端的时候，页面组件中 <code>style</code> 标签的引入会失效。</p>
<h3 id="解决方案-3"><a href="#解决方案-3" class="headerlink" title="解决方案"></a>解决方案</h3><p>在 <code>main.js</code> 中统一引入</p>
<h3 id="处理代码-3"><a href="#处理代码-3" class="headerlink" title="处理代码"></a>处理代码</h3><pre class="language-js" data-language="js"><code class="language-js"><span class="token operator">...</span>
<span class="token comment">// 文章详情样式</span>
<span class="token keyword">import</span> <span class="token string">'./styles/article-detail.scss'</span><span class="token punctuation">;</span>
<span class="token operator">...</span></code></pre>

<h2 id="多平台适配-热播视频全部无法播放"><a href="#多平台适配-热播视频全部无法播放" class="headerlink" title="多平台适配 -  热播视频全部无法播放"></a>多平台适配 -  热播视频全部无法播放</h2><h3 id="分析原因-4"><a href="#分析原因-4" class="headerlink" title="分析原因"></a>分析原因</h3><p>在浏览器中视频无法播放，并且会出现 403 的错误。</p>
<p>对于这一块，大家需要首先先明确 <code>403</code> 错误表示的是什么意思：</p>
<blockquote>
<p>403错误是一种在网站访问过程中，常见的错误提示，表示资源不可用。 服务器理解客户的请求，但拒绝处理它，通常由于服务器上文件或目录的权限设置导致的WEB访问错误。</p>
</blockquote>
<p>简单来说就是：服务端不愿意处理你的请求。</p>
<p>在某些网站中，服务端只会处理 <strong>它信任的客户端请求，而不愿意处理它不认识的客户端的请求。</strong> </p>
<p>而想要解决这个问题，我们就需要对 <strong>请求进行伪装</strong>，我们无法伪装成 <strong>他信任的人</strong>，但是我们可以 <strong>隐藏身份，让服务端不确定它是不是认识你。</strong> 这样在默认情况下，服务端就 “勉为其难” 的处理你的请求。</p>
<p>那么想要进行伪装，就需要使用到  <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referrer-Policy">referrer</a> 的 <code>no-referrer</code> 指令</p>
<h3 id="解决方案-4"><a href="#解决方案-4" class="headerlink" title="解决方案"></a>解决方案</h3><ol>
<li>在项目的根目录创建 <code>index.html</code> 文件，作为 <strong>根模板</strong>。（可参考：<a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/collocation/manifest?id=h5">自定义模板</a> 相关文档）</li>
<li>添加 <code>&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt;</code> 标签</li>
<li>在 <code>manifest.json-&gt;h5-&gt;template</code> 节点中关联这个<code>html</code>文件的路径</li>
<li>重新编译项目到浏览器</li>
</ol>
<h3 id="处理代码-4"><a href="#处理代码-4" class="headerlink" title="处理代码"></a>处理代码</h3><p><code>index.html</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh-CN<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>
            &lt;%= htmlWebpackPlugin.options.title %>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
				<span class="token comment">&lt;!-- 访问来源信息不随着请求一起发送 --></span>
				<span class="token comment">&lt;!-- 解决 web 访问商品 403 的问题 --></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>referrer<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no-referrer<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- Open Graph data --></span>
        <span class="token comment">&lt;!-- &lt;meta property="og:title" content="Title Here" /> --></span>
        <span class="token comment">&lt;!-- &lt;meta property="og:url" content="http://www.example.com/" /> --></span>
        <span class="token comment">&lt;!-- &lt;meta property="og:image" content="http://example.com/image.jpg" /> --></span>
        <span class="token comment">&lt;!-- &lt;meta property="og:description" content="Description Here" /> --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
            <span class="token keyword">var</span> coverSupport <span class="token operator">=</span> <span class="token string">'CSS'</span> <span class="token keyword">in</span> window <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> <span class="token constant">CSS</span><span class="token punctuation">.</span>supports <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">'top: env(a)'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">'top: constant(a)'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'&lt;meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>coverSupport <span class="token operator">?</span> <span class="token string">', viewport-fit=cover'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'" />'</span><span class="token punctuation">)</span>
        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;%= BASE_URL %>static/index.&lt;%= VUE_APP_INDEX_CSS_HASH %>.css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>noscript</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>Please enable JavaScript to continue.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>noscript</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- built files will be auto injected --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre>

<p><code>manifest.json</code></p>
<pre class="language-json" data-language="json"><code class="language-json"><span class="token property">"h5"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token property">"template"</span><span class="token operator">:</span> <span class="token string">"index.html"</span>
<span class="token punctuation">&#125;</span></code></pre>

<p>或在 HBuilderX中修改：</p>
<p><img src="/blogs/320d3645/6.jpg" loading="lazy"></p>
<h2 id="多平台适配-一键登录功能"><a href="#多平台适配-一键登录功能" class="headerlink" title="多平台适配 -  一键登录功能"></a>多平台适配 -  一键登录功能</h2><h3 id="分析原因-5"><a href="#分析原因-5" class="headerlink" title="分析原因"></a>分析原因</h3><p>在 <code>my-login</code> 中，只处理了 <strong>微信一键登录</strong> 的功能</p>
<h3 id="解决方案-5"><a href="#解决方案-5" class="headerlink" title="解决方案"></a>解决方案</h3><p>按照接口，直接处理对应数据即可。</p>
<h3 id="处理代码-5"><a href="#处理代码-5" class="headerlink" title="处理代码"></a>处理代码</h3><p><code>my-login</code></p>
<pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- 用户未登录 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!token<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>avatar avatar-img<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/images/default-avatar.png<span class="token punctuation">"</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>scaleToFill<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-desc<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>登录后可同步数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- #ifdef MP-WEIXIN --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>getUserInfo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>微信用户一键登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- #endif --></span>
      <span class="token comment">&lt;!-- #ifndef MP-WEIXIN --></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>login-btn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>onAutoLogin<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>一键登录<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- #endif --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  methods<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    <span class="token comment">/**
     * 一键登录
     */</span>
    <span class="token keyword">async</span> <span class="token function">onAutoLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// 展示加载框</span>
      uni<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        title<span class="token operator">:</span> <span class="token string">'加载中'</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
        encryptedData<span class="token operator">:</span> <span class="token string">'BmGEMqpGI5w'</span><span class="token punctuation">,</span>
        errMsg<span class="token operator">:</span> <span class="token string">'getUserProfile:ok'</span><span class="token punctuation">,</span>
        iv<span class="token operator">:</span> <span class="token string">'c+NbINO4CuEWCBYGG2FxWw=='</span><span class="token punctuation">,</span>
        rawData<span class="token operator">:</span>
          <span class="token string">'&#123;"nickName":"小慕同学","gender":1,"language":"zh_CN","city":"","province":"","country":"China","avatarUrl":"https://m.imooc.com/static/wap/static/common/img/logo-small@2x.png"&#125;'</span><span class="token punctuation">,</span>
        signature<span class="token operator">:</span> <span class="token string">'449a10f11998daf680fe546a5176e6e2973516ce'</span><span class="token punctuation">,</span>
        userInfo<span class="token operator">:</span> <span class="token punctuation">&#123;</span> nickName<span class="token operator">:</span> <span class="token string">'小慕同学'</span><span class="token punctuation">,</span> gender<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> language<span class="token operator">:</span> <span class="token string">'zh_CN'</span><span class="token punctuation">,</span> city<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> province<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">&#125;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'onLoginSuccess'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 隐藏loading</span>
      uni<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre>

<h2 id="打包微信小程序"><a href="#打包微信小程序" class="headerlink" title="打包微信小程序"></a>打包微信小程序</h2><ol>
<li>打开 <code>HBuilder</code></li>
<li>打开当前要打包的项目</li>
<li>点击发行，找到【小程序 - 微信】<br><img src="/blogs/320d3645/7.jpg" loading="lazy"></li>
<li>确认小程序名称和 <code>appid</code>，确认无误点击 【发行】<br><img src="/blogs/320d3645/8.jpg" loading="lazy"></li>
<li>等待控制台编译</li>
<li>编译完成之后，会自动打开【微信开发者工具】</li>
<li>点击【上传】即可<br><img src="/blogs/320d3645/9.jpg" loading="lazy"></li>
</ol>
<h2 id="打包H5"><a href="#打包H5" class="headerlink" title="打包H5"></a>打包H5</h2><ol>
<li>打开 <code>HBuilder</code></li>
<li>打开当前要打包的项目</li>
<li>点击发行，找到【网站 - PC web 或手机 H5 】<br><img src="/blogs/320d3645/10.jpg" loading="lazy"></li>
<li>确认【网站标题】，无需【网站域名】，直接点击发行即可<br><img src="/blogs/320d3645/11.jpg" loading="lazy"></li>
<li>等待项目编译<br><img src="/blogs/320d3645/12.jpg" loading="lazy"></li>
<li>编译成功后，项目会被导出到指定路径<br><img src="/blogs/320d3645/13.jpg" loading="lazy"></li>
<li>找到该路径下的文件，即为【打包后的问题】</li>
<li><strong>注意：</strong> 不可直接打开 <code>index.html</code> 进行访问，需要通过 <code>web 服务</code> 进行访问！（可以使用vercel进行编译）</li>
</ol>
<p><img src="/blogs/320d3645/14.jpg" loading="lazy"></p>
</div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>语轻星子</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="https://xxcijmz.top/blogs/320d3645/" title="imooc-blog项目开发-下(uniapp)">https://xxcijmz.top/blogs/320d3645/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> 许可协议。</li></ul></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/blogs/3d307dcc/" rel="prev" title="仿微信项目开发(一)"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">仿微信项目开发(一)</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/blogs/f4ee7e8d/" rel="next" title="imooc-blog项目开发-上(uniapp)"><span class="post-nav-text">imooc-blog项目开发-上(uniapp)</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div><div id="valine-container"></div><script>Yun.utils.getScript("https://cdn.jsdelivr.net/npm/valine@latest/dist/Valine.min.js", () => {
  const valineConfig = {"enable":true,"appId":"MnqOxUn1tp2XfaBiRJqcPNC3-MdYXbMMI","appKey":"BUJAYYUt5IhdIDVVvHH8aHMx","placeholder":"来与我一起讨论吧","avatar":null,"pageSize":10,"visitor":false,"highlight":true,"recordIP":false,"enableQQ":true,"meta":["nick"],"el":"#valine-container","lang":"zh-cn"}
  valineConfig.path = "/blogs/320d3645/"
  new Valine(valineConfig)
}, window.Valine);</script></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">闽ICP备2021017107号-1</a></div><div class="copyright"><span>&copy; 2021 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> 语轻星子</span></div><div class="live_time"><span>本博客已运行：</span><span id="display_live_time"></span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2021-09-23T00:03:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = " " + passDay + " 天 " + passHour + " 小时 " + passMinute + " 分 " + passSecond + " 秒";
}
blog_live_time();
</script></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#5698c3" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-search-line"></use></svg></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-close-line"></use></svg></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/live2d-widget@^3.1.3/lib/L2Dwidget.min.js"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.9},"dialog":{"enable":true},"log":false});</script></body></html>