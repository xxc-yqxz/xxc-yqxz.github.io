<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS案例练习</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./index.css">
    <script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.0/vue.min.js"></script>
</head>

<body>
    <div class="navbar" id="root">
        <div class="avatar-img">
            <img :class="isShow?'rotateImg':'backImg'" src="../images/avatar.jpg" alt="" @click="isShow=!isShow">
        </div>
        <transition name="selectPanel">
            <ul v-show="isShow">
                <li v-for="(item,index) in data" class="item" @click="isShow=false">
                    <a :href="item.url" target="showBox">
                        <span>{{item.fileName}}</span>
                    </a>
                </li>
            </ul>
        </transition>
        <iframe name="showBox" class="mainBox" scrolling="false" src="/demoShow/01_广告灯牌loading动画"></iframe>
    </div>
</body>
<script type="text/javascript">
    Vue.config.productionTip = false
    function getData() {
        return new Promise((resolve, reject) => {
            var xhr = new XMLHttpRequest();
            var data;
            xhr.onreadystatechange = function () {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    data = xhr.responseText
                    resolve(data)
                }
            }
            xhr.open("get", "category.json", true);
            xhr.send();
        })
    }
    (async function init() {
        const result = await getData();
        const vm = new Vue({
            el: "#root",
            data() {
                return {
                    data: JSON.parse(result),
                    isShow: false
                }
            }
        })
    })()
</script>

</html>